<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Tech Bytes - RRT Algorithm Simulation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/image80.webp" rel="icon">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  });
});
</script> 
  

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Tech Bytes - RRT Algorithm Simulation">
<meta property="og:description" content="">
<meta property="og:image" content="https://nishantbharali.github.io/Blog/Robotics/RRT_main.gif">
<meta property="og:site-name" content="Tech Bytes">
<meta name="twitter:title" content="Tech Bytes - RRT Algorithm Simulation">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://nishantbharali.github.io/Blog/Robotics/images/Nishant.jpg">
<meta name="twitter:creator" content="@NishantBharali">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Tech Bytes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../blog.html" rel="" target="">
 <span class="dropdown-text">Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../tool.html" rel="" target="">
 <span class="dropdown-text">Tools</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../robotics.html" rel="" target="">
 <span class="dropdown-text">Robotics</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Resources</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="../resources.html" rel="" target="">
 <span class="dropdown-text">Nishant‚Äôs Resources</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://r4ds.hadley.nz/" rel="" target="_blank">
 <span class="dropdown-text">Python for Data Science</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link active" href="../about.html" rel="" target="" aria-current="page">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-contact" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Contact</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-contact">    
        <li>
    <a class="dropdown-item" href="https://www.linkedin.com/in/nishant-kumar-bharali/" rel="" target="_blank"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="dropdown-text">LinkedIn</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/NishantBharali" rel="" target="_blank"><i class="bi bi-github" role="img">
</i> 
 <span class="dropdown-text">GitHub</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://stackoverflow.com/users/18371927/nishant" rel="" target="_blank"><i class="bi bi-stack-overflow" role="img">
</i> 
 <span class="dropdown-text">Stack Overflow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="mailto:nishantkb@vt.edu" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="dropdown-text">Gmail</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../cv/cv.html" rel="" target="">
 <span class="dropdown-text">Curriculum Vitae</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Projects.html">Projects</a></li><li class="breadcrumb-item"><a href="../blog.html#category=Robotics">Robotics</a></li><li class="breadcrumb-item"><a href="../Robotics/RRT.html">RRT</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../Projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../blog.html#category=Robotics" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Robotics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Robotics/Inverse_kinematics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inverse Kinematics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Robotics/Potential_trajectory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trajectory Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Robotics/Dynamics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dynamics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Robotics/Control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Robotics/RRT.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">RRT</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../blog.html#category=Machine Learning" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Machine Learning</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/Random Processes/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Probability</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/Linear and Non Linear Regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/Clustering/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Clustering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/Classification/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/Anomaly-Outlier Detection/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anamoly</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../blog.html#category=Tools/Packages" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tools</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/git/git.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Git</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/llm/llm.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LLM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../posts/quarto/quarto.qmd" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quarto</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../about.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About Me</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Resources</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">My Resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://r4ds.hadley.nz/" class="sidebar-item-text sidebar-link" target="&quot;_blank&quot;">
 <span class="menu-text">Python for Data Science</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">RRT Algorithm Simulation</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">Robotics</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="rrt-algorithm" class="level2">
<h2 class="anchored" data-anchor-id="rrt-algorithm">RRT Algorithm</h2>
<ul>
<li><p><strong>The path plan should actually work on a robot.</strong> If the path plan makes the robot turn at sharp angles but the robot can‚Äôt move at sharp angles (like a car), that path plan shouldn‚Äôt be allowed.</p></li>
<li><p><strong>The path plan should be as close to optimal as possible.</strong> While it‚Äôs nice to find any path plan that gets the robot from a start location to a goal location, that isn‚Äôt enough unfortunately. We‚Äôd like something that‚Äôs somewhat efficient. Not only will it help the robot complete its task as fast as possible, but it‚Äôll also conserve its precious battery life.</p></li>
<li><p><strong>The path plan should avoid colliding with walls.</strong> This obviously goes without saying. Robots can be pretty expensive, and crashing is never a good thing. My little robot alone cost me well over a thousand bucks.</p></li>
</ul>
<p>One of the most popular algorithms for coming up with a path plan that tries to satisfies these conditions is called Rapidly-exploring Random Trees (RRT). Since a picture is worth a thousand words, check out the diagram below. Let‚Äôs suppose the robot has to go from a start location (the red dot) to a goal location (the green dot) in a simple map without any obstacles. Basically, we‚Äôll start off with a tree that has a root node representing the start position of the robot. After that, we‚Äôll build the tree up gradually. How? We‚Äôll take a bunch of random samples of the map, make a new node for each random sample, and insert each new node into the tree somehow. Once the tree has a node that‚Äôs close enough to the goal position of the robot, we‚Äôre done.</p>
<p>Here we are using the RRT algorithm to perform motion planning in 2-DoF environments. As before, the mobile robot‚Äôs position is <span class="math inline">\(\normalsize \theta = [ùë•, ùë¶]^ùëá\)</span>.</p>
<p>Implementing the RRT algorithm below. This code should be able to work with an arbitrary number of circular obstacles with 2 conditions:</p>
<p>‚Ä¢ The bounds of the workspace are <span class="math inline">\(\normalsize ùë• ‚àà [0, 1], \, ùë¶ ‚àà [0, 1]\)</span> ‚Ä¢ The motion plan must end within <span class="math inline">\(\normalsize \epsilon = 0.1\)</span> units of the goal</p>
<p><strong>Code Implementation</strong></p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>matplotlib.use(<span class="st">'Agg'</span>)  <span class="co"># Set the backend to a non-interactive backend</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.patches <span class="im">import</span> Circle</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.animation <span class="im">import</span> PillowWriter, FuncAnimation</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define start and goal positions</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>theta_start <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">0</span>, <span class="dv">0</span>]), <span class="st">'parent'</span>: <span class="va">None</span>}</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>theta_goal <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">1</span>])</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Workspace bounds</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>x_bounds <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>y_bounds <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Define obstacles</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>obstacles <span class="op">=</span> np.array([</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>],</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.7</span>, <span class="fl">0.7</span>, <span class="fl">0.2</span>],</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.6</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>],</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.4</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>],</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.1</span>, <span class="fl">0.75</span>, <span class="fl">0.3</span>]</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># RRT parameters</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>epsilon <span class="op">=</span> <span class="fl">0.1</span>  <span class="co"># Goal threshold</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fl">0.05</span>   <span class="co"># Step size</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">1000</span>       <span class="co"># Number of iterations</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize tree</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> [theta_start]</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize environment setup</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(x_bounds)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(y_bounds)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>ax.set_aspect(<span class="st">'equal'</span>)</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot obstacles</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> obstacle <span class="kw">in</span> obstacles:</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    circle <span class="op">=</span> Circle(obstacle[<span class="dv">0</span>:<span class="dv">2</span>], obstacle[<span class="dv">2</span>], color<span class="op">=</span><span class="st">'gray'</span>, fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    ax.add_patch(circle)</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot start and goal</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>start_plot, <span class="op">=</span> ax.plot(theta_start[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_start[<span class="st">'coord'</span>][<span class="dv">1</span>], <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>goal_plot, <span class="op">=</span> ax.plot(theta_goal[<span class="dv">0</span>], theta_goal[<span class="dv">1</span>], <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="co"># This flag is used to stop the animation once the goal is reached</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>goal_reached <span class="op">=</span> <span class="va">False</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Animation update function</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update(frame):</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> G, goal_reached</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> goal_reached:</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    theta_rand <span class="op">=</span> theta_goal <span class="cf">if</span> np.random.rand() <span class="op">&lt;</span> <span class="fl">0.2</span> <span class="cf">else</span> np.random.rand(<span class="dv">2</span>)</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    distances <span class="op">=</span> [np.linalg.norm(node[<span class="st">'coord'</span>] <span class="op">-</span> theta_rand) <span class="cf">for</span> node <span class="kw">in</span> G]</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    theta_near_index <span class="op">=</span> np.argmin(distances)</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    theta_near <span class="op">=</span> G[theta_near_index]</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    vec_to_rand <span class="op">=</span> theta_rand <span class="op">-</span> theta_near[<span class="st">'coord'</span>]</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    vec_to_rand <span class="op">=</span> delta <span class="op">*</span> vec_to_rand <span class="op">/</span> np.linalg.norm(vec_to_rand)</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    theta_new <span class="op">=</span> {<span class="st">'coord'</span>: theta_near[<span class="st">'coord'</span>] <span class="op">+</span> vec_to_rand, <span class="st">'parent'</span>: theta_near_index}</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> is_collision(theta_new[<span class="st">'coord'</span>], obstacles):</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>        G.append(theta_new)</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>        ax.plot([theta_near[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>]], [theta_near[<span class="st">'coord'</span>][<span class="dv">1</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'k-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>        ax.plot(theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>], <span class="st">'o'</span>, color<span class="op">=</span><span class="st">'gray'</span>, markerfacecolor<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> np.linalg.norm(theta_new[<span class="st">'coord'</span>] <span class="op">-</span> theta_goal) <span class="op">&lt;</span> epsilon:</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Draw the final path in orange</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>            current <span class="op">=</span> theta_new</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> current[<span class="st">'parent'</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>                parent <span class="op">=</span> G[current[<span class="st">'parent'</span>]]</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>                ax.plot([current[<span class="st">'coord'</span>][<span class="dv">0</span>], parent[<span class="st">'coord'</span>][<span class="dv">0</span>]], [current[<span class="st">'coord'</span>][<span class="dv">1</span>], parent[<span class="st">'coord'</span>][<span class="dv">1</span>]], color<span class="op">=</span><span class="st">'orange'</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>                current <span class="op">=</span> parent</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>            goal_reached <span class="op">=</span> <span class="va">True</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Collision checking function</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_collision(coord, obstacles):</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">any</span>(np.linalg.norm(coord <span class="op">-</span> obstacle[<span class="dv">0</span>:<span class="dv">2</span>]) <span class="op">&lt;</span> obstacle[<span class="dv">2</span>] <span class="cf">for</span> obstacle <span class="kw">in</span> obstacles)</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the animation</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>ani <span class="op">=</span> FuncAnimation(fig, update, frames<span class="op">=</span>N, repeat<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the animation as a GIF</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>gif_path <span class="op">=</span> <span class="st">"RRT_main.gif"</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> PillowWriter(fps<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>ani.save(gif_path, writer<span class="op">=</span>writer)</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a><span class="co"># Close the plot</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>plt.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>MATLAB Implementation</strong></p>
<details>
<div class="sourceCode" id="cb2"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="va">clear</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="va">close</span> <span class="va">all</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">% Define start and goal positions</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>.<span class="va">coord</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">;</span> <span class="fl">0</span>]<span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="va">theta_goal</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">;</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">% Workspace bounds</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="va">x_bounds</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="va">y_bounds</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">% Define obstacles</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">% Each row is an obstacle with format: [center_x, center_y, radius]</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="va">obstacles</span> <span class="op">=</span> [</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.7</span><span class="op">,</span> <span class="fl">0.7</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.6</span><span class="op">,</span> <span class="fl">0.4</span><span class="op">,</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.4</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.1</span><span class="op">,</span> <span class="fl">0.75</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Add as many obstacles required, satisfying the condition of arbitrary</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">% number of obstacles' inclusion</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">% RRT parameters</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span> <span class="co">% Goal threshold</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="va">delta</span> <span class="op">=</span> <span class="fl">0.05</span><span class="op">;</span>  <span class="co">% Step size</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span><span class="op">;</span>      <span class="co">% Number of iterations</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co">% Visualize environment</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">on</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="va">x_bounds</span><span class="op">,</span> <span class="va">y_bounds</span>])</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span> <span class="va">equal</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot obstacles</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">size</span>(<span class="va">obstacles</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="va">viscircles</span>(<span class="va">obstacles</span>(<span class="va">i</span><span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>)<span class="op">,</span> <span class="va">obstacles</span>(<span class="va">i</span><span class="op">,</span> <span class="fl">3</span>)<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])<span class="op">;</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="co">% Initialize tree</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>.<span class="va">parent</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="va">G</span>(<span class="fl">1</span>) <span class="op">=</span> <span class="va">theta_start</span><span class="op">;</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="co">% Main RRT loop</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">N</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">norm</span>(<span class="va">G</span>(<span class="kw">end</span>).<span class="va">coord</span> <span class="op">-</span> <span class="va">theta_goal</span>) <span class="op">&lt;</span> <span class="va">epsilon</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>        <span class="kw">break</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Random sample</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">2</span><span class="op">,</span><span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Nearest node</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    [<span class="va">min_dist</span><span class="op">,</span> <span class="va">theta_near_index</span>] <span class="op">=</span> <span class="va">min</span>(<span class="va">vecnorm</span>([<span class="va">G</span>.<span class="va">coord</span>] <span class="op">-</span> <span class="va">theta_rand</span>))<span class="op">;</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">theta_near_index</span>)<span class="op">;</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Step towards random sample</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">theta_rand</span> <span class="op">-</span> <span class="va">theta_near</span>.<span class="va">coord</span><span class="op">;</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">norm</span>(<span class="va">vec_to_rand</span>) <span class="op">&gt;</span> <span class="va">delta</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>        <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">delta</span> <span class="op">*</span> <span class="va">vec_to_rand</span> <span class="op">/</span> <span class="va">norm</span>(<span class="va">vec_to_rand</span>)<span class="op">;</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">=</span> <span class="va">theta_near</span>.<span class="va">coord</span> <span class="op">+</span> <span class="va">vec_to_rand</span><span class="op">;</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Collision check with all obstacles</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">isCollision</span>(<span class="va">theta_new</span>.<span class="va">coord</span><span class="op">,</span> <span class="va">obstacles</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>        <span class="kw">continue</span><span class="op">;</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Add new node to tree</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>.<span class="va">parent</span> <span class="op">=</span> <span class="va">theta_near_index</span><span class="op">;</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    <span class="va">G</span> <span class="op">=</span> [<span class="va">G</span><span class="op">,</span> <span class="va">theta_new</span>]<span class="op">;</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Plotting</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="ss">'o'</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="op">...</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>    <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])<span class="op">;</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>    <span class="va">line</span>([<span class="va">theta_near</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">1</span>)]<span class="op">,</span> [<span class="va">theta_near</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">2</span>)]<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> <span class="ss">'k'</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a><span class="co">% Trace back path</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a><span class="va">child_theta</span> <span class="op">=</span> <span class="va">G</span>(<span class="kw">end</span>)<span class="op">;</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="va">child_theta</span>.<span class="va">parent</span> <span class="op">~=</span> <span class="fl">0</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>    <span class="va">parent_theta</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">child_theta</span>.<span class="va">parent</span>)<span class="op">;</span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>    <span class="va">line</span>([<span class="va">child_theta</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">parent_theta</span>.<span class="va">coord</span>(<span class="fl">1</span>)]<span class="op">,</span> [<span class="va">child_theta</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="va">parent_theta</span>.<span class="va">coord</span>(<span class="fl">2</span>)]<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0</span>]<span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>    <span class="va">child_theta</span> <span class="op">=</span> <span class="va">parent_theta</span><span class="op">;</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot start and goal</span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">theta_start</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_start</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> <span class="ss">'k'</span>)<span class="op">;</span></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">theta_goal</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_goal</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> <span class="ss">'k'</span>)<span class="op">;</span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a><span class="co">% Collision checking function</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="va">collision</span> <span class="op">=</span> <span class="va">isCollision</span>(<span class="va">coord</span><span class="op">,</span> <span class="va">obstacles</span>)</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    <span class="va">collision</span> <span class="op">=</span> <span class="va">any</span>(<span class="va">arrayfun</span>(<span class="op">@</span>(<span class="va">idx</span>) <span class="va">norm</span>(<span class="va">coord</span> <span class="op">-</span> <span class="va">obstacles</span>(<span class="va">idx</span><span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>)<span class="op">'</span>) <span class="op">&lt;</span> <span class="va">obstacles</span>(<span class="va">idx</span><span class="op">,</span> <span class="fl">3</span>)<span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="va">size</span>(<span class="va">obstacles</span><span class="op">,</span> <span class="fl">1</span>)))<span class="op">;</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p><strong>Result</strong></p>
<p><img src="RRT_main.gif" alt="Animated GIF" loop="" width="50%" height="50%"></p>
<p>Notice that centers is a matrix where each column corresponds to an obstacle center. Similarly, radii is a vector where the <span class="math inline">\(\normalsize ùëñ^{th}\)</span> entry corresponds to the radius of the <span class="math inline">\(\normalsize ùëñ^{th}\)</span> obstacle.</p>
<ul>
<li><strong>Environment 1: One obstacle with <span class="math inline">\(\normalsize center \; ùëê_1 = [0.55, 0.5]^ùëá \; and \; radius \; ùëü_1 = 0.3\)</span>.</strong></li>
</ul>
<p><strong>RRT Algorithm for 1 Obstacle</strong></p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>matplotlib.use(<span class="st">'Agg'</span>)  <span class="co"># Set the backend to a non-interactive backend</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.patches <span class="im">import</span> Circle</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.animation <span class="im">import</span> PillowWriter, FuncAnimation</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Environment</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>theta_start <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">0</span>, <span class="dv">0</span>])}</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>theta_goal <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">1</span>, <span class="dv">1</span>])}</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>centers <span class="op">=</span> np.array([[<span class="fl">0.5</span>], [<span class="fl">0.5</span>]])</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>radii <span class="op">=</span> np.array([<span class="fl">0.3</span>])</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>epsilon <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize figure</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>ax.set_aspect(<span class="st">'equal'</span>, adjustable<span class="op">=</span><span class="st">'box'</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw obstacles</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(radii)):</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    circle <span class="op">=</span> Circle(centers[:, idx], radii[idx], color<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>], alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    ax.add_patch(circle)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot start and goal</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>ax.plot(<span class="dv">0</span>, <span class="dv">0</span>, <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>ax.plot(<span class="dv">1</span>, <span class="dv">1</span>, <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize tree</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>theta_start[<span class="st">'parent'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> [theta_start]</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>final_path_plotted <span class="op">=</span> <span class="va">False</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update(frame):</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> G, final_path_plotted</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> frame <span class="op">==</span> <span class="dv">0</span> <span class="kw">or</span> final_path_plotted:</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample random joint position</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    theta_rand <span class="op">=</span> np.random.rand(<span class="dv">2</span>)</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Find node in G nearest to theta_rand</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> [np.linalg.norm(node[<span class="st">'coord'</span>] <span class="op">-</span> theta_rand) <span class="cf">for</span> node <span class="kw">in</span> G]</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    theta_near_index <span class="op">=</span> np.argmin(dist)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>    theta_near <span class="op">=</span> G[theta_near_index]</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Take a step from theta_near towards theta_rand</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>    vec_to_rand <span class="op">=</span> theta_rand <span class="op">-</span> theta_near[<span class="st">'coord'</span>]</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>    dist_to_rand <span class="op">=</span> np.linalg.norm(vec_to_rand)</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>    theta_new <span class="op">=</span> {}</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> dist_to_rand <span class="op">&lt;</span> delta:</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>        theta_new[<span class="st">'coord'</span>] <span class="op">=</span> theta_rand</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>        theta_new[<span class="st">'coord'</span>] <span class="op">=</span> theta_near[<span class="st">'coord'</span>] <span class="op">+</span> delta <span class="op">*</span> vec_to_rand <span class="op">/</span> dist_to_rand</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if theta_new is collision-free</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>    collision <span class="op">=</span> <span class="va">False</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> jdx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(radii)):</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>        center <span class="op">=</span> centers[:, jdx]</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>        radius <span class="op">=</span> radii[jdx]</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> np.linalg.norm(theta_new[<span class="st">'coord'</span>] <span class="op">-</span> center) <span class="op">&lt;</span> radius:</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>            collision <span class="op">=</span> <span class="va">True</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> collision:</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If collision-free, add theta_new to tree with parent theta_near</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>    theta_new[<span class="st">'parent'</span>] <span class="op">=</span> theta_near_index</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>    G.append(theta_new)</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot node and edge</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>    ax.plot(theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>], <span class="st">'o'</span>, color<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>], markerfacecolor<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>])</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>    ax.plot([theta_near[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>]], [theta_near[<span class="st">'coord'</span>][<span class="dv">1</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'k-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If goal is close enough to the last node in G, plot the final path</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.linalg.norm(G[<span class="op">-</span><span class="dv">1</span>][<span class="st">'coord'</span>] <span class="op">-</span> theta_goal[<span class="st">'coord'</span>]) <span class="op">&lt;</span> epsilon:</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>        next_theta <span class="op">=</span> G[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> next_theta[<span class="st">'parent'</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>            prev_theta <span class="op">=</span> G[next_theta[<span class="st">'parent'</span>]]</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>            line, <span class="op">=</span> ax.plot([next_theta[<span class="st">'coord'</span>][<span class="dv">0</span>], prev_theta[<span class="st">'coord'</span>][<span class="dv">0</span>]], [next_theta[<span class="st">'coord'</span>][<span class="dv">1</span>], prev_theta[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'orange'</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>            next_theta <span class="op">=</span> prev_theta</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add final path to the animation</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>        final_path_plotted <span class="op">=</span> <span class="va">True</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> line,</span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the animation</span></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>ani <span class="op">=</span> FuncAnimation(fig, update, frames<span class="op">=</span>N, repeat<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the animation</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> PillowWriter(fps<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>ani.save(<span class="st">"RRT_1_obstacles.gif"</span>, writer<span class="op">=</span>writer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Result:</strong></p>
<p><img src="RRT_1_obstacles.gif" alt="Animated GIF" loop="" width="50%" height="50%"></p>
<ul>
<li><strong>Environment 2: One obstacle with <span class="math inline">\(\normalsize center \; ùëê_1 = [0.5, 0.3]^ùëá \; and \; radius \; ùëü_1 = 0.3\)</span>. A second obstacle with <span class="math inline">\(\normalsize center \; ùëê_2 = [0.5, 0.7]^ùëá \; and \; radius \; ùëü_2 = 0.2\)</span></strong></li>
</ul>
<p><strong>RRT Algorithm for 2 Obstacles</strong></p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>matplotlib.use(<span class="st">'Agg'</span>)  <span class="co"># Set the backend to a non-interactive backend</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.patches <span class="im">import</span> Circle</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.animation <span class="im">import</span> PillowWriter, FuncAnimation</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Environment</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>theta_start <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">0</span>, <span class="dv">0</span>])}</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>theta_goal <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">1</span>, <span class="dv">1</span>])}</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>centers <span class="op">=</span> np.array([[<span class="fl">0.5</span>, <span class="fl">0.5</span>], [<span class="fl">0.3</span>, <span class="fl">0.7</span>]])</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>radii <span class="op">=</span> np.array([<span class="fl">0.3</span>, <span class="fl">0.2</span>])</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>epsilon <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize figure</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>ax.set_aspect(<span class="st">'equal'</span>, adjustable<span class="op">=</span><span class="st">'box'</span>)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw obstacles</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(radii)):</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    circle <span class="op">=</span> Circle(centers[:, idx], radii[idx], color<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>], alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    ax.add_patch(circle)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot start and goal</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>ax.plot(<span class="dv">0</span>, <span class="dv">0</span>, <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>ax.plot(<span class="dv">1</span>, <span class="dv">1</span>, <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize tree</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>theta_start[<span class="st">'parent'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> [theta_start]</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>final_path_plotted <span class="op">=</span> <span class="va">False</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update(frame):</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> G, final_path_plotted</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> frame <span class="op">==</span> <span class="dv">0</span> <span class="kw">or</span> final_path_plotted:</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample random joint position</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    theta_rand <span class="op">=</span> np.random.rand(<span class="dv">2</span>)</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Find node in G nearest to theta_rand</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> [np.linalg.norm(node[<span class="st">'coord'</span>] <span class="op">-</span> theta_rand) <span class="cf">for</span> node <span class="kw">in</span> G]</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    theta_near_index <span class="op">=</span> np.argmin(dist)</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    theta_near <span class="op">=</span> G[theta_near_index]</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Take a step from theta_near towards theta_rand</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>    vec_to_rand <span class="op">=</span> theta_rand <span class="op">-</span> theta_near[<span class="st">'coord'</span>]</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>    dist_to_rand <span class="op">=</span> np.linalg.norm(vec_to_rand)</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>    theta_new <span class="op">=</span> {}</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> dist_to_rand <span class="op">&lt;</span> delta:</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>        theta_new[<span class="st">'coord'</span>] <span class="op">=</span> theta_rand</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>        theta_new[<span class="st">'coord'</span>] <span class="op">=</span> theta_near[<span class="st">'coord'</span>] <span class="op">+</span> delta <span class="op">*</span> vec_to_rand <span class="op">/</span> dist_to_rand</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if theta_new is collision-free</span></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    collision <span class="op">=</span> <span class="va">False</span></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> jdx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(radii)):</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>        center <span class="op">=</span> centers[:, jdx]</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>        radius <span class="op">=</span> radii[jdx]</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> np.linalg.norm(theta_new[<span class="st">'coord'</span>] <span class="op">-</span> center) <span class="op">&lt;</span> radius:</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>            collision <span class="op">=</span> <span class="va">True</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> collision:</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If collision-free, add theta_new to tree with parent theta_near</span></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>    theta_new[<span class="st">'parent'</span>] <span class="op">=</span> theta_near_index</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>    G.append(theta_new)</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot node and edge</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>    ax.plot(theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>], <span class="st">'o'</span>, color<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>], markerfacecolor<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>])</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>    ax.plot([theta_near[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>]], [theta_near[<span class="st">'coord'</span>][<span class="dv">1</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'k-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If goal is close enough to the last node in G, plot the final path</span></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.linalg.norm(G[<span class="op">-</span><span class="dv">1</span>][<span class="st">'coord'</span>] <span class="op">-</span> theta_goal[<span class="st">'coord'</span>]) <span class="op">&lt;</span> epsilon:</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>        next_theta <span class="op">=</span> G[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> next_theta[<span class="st">'parent'</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>            prev_theta <span class="op">=</span> G[next_theta[<span class="st">'parent'</span>]]</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>            line, <span class="op">=</span> ax.plot([next_theta[<span class="st">'coord'</span>][<span class="dv">0</span>], prev_theta[<span class="st">'coord'</span>][<span class="dv">0</span>]], [next_theta[<span class="st">'coord'</span>][<span class="dv">1</span>], prev_theta[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'orange'</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>            next_theta <span class="op">=</span> prev_theta</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add final path to the animation</span></span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>        final_path_plotted <span class="op">=</span> <span class="va">True</span></span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> line,</span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the animation</span></span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>ani <span class="op">=</span> FuncAnimation(fig, update, frames<span class="op">=</span>N, repeat<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the animation</span></span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> PillowWriter(fps<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>ani.save(<span class="st">"RRT_2_obstacles.gif"</span>, writer<span class="op">=</span>writer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Result:</strong></p>
<p><img src="RRT_2_obstacles.gif" alt="Animated GIF" loop="" width="50%" height="50%"></p>
<ul>
<li><strong>Environment 3: One obstacle with <span class="math inline">\(\normalsize center \; ùëê_1 = [0.2, 0.35]^ùëá \; and \; radius \; ùëü_1 = 0.2\)</span>. A second obstacle with <span class="math inline">\(\normalsize center \; ùëê_2 = [0.5, 0.3]^ùëá \; and \; radius \; ùëü_2 = 0.2\)</span>. A third obstacle with <span class="math inline">\(\normalsize center \; ùëê_3 = [0.7, 0.5]^ùëá \; and \; radius \; ùëü_3 = 0.2\)</span></strong></li>
</ul>
<p>Here we are declaring it a Baseline Algorithm for 3 obstacles. Later below we will discuss the differences between a baseline and Goal-bias algorithm and their pros-cons.</p>
<p><strong>Baseline RRT Algorithm</strong></p>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>matplotlib.use(<span class="st">'Agg'</span>)  <span class="co"># Set the backend to a non-interactive backend</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.patches <span class="im">import</span> Circle</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.animation <span class="im">import</span> PillowWriter, FuncAnimation</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Environment</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>theta_start <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">0</span>, <span class="dv">0</span>])}</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>theta_goal <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">1</span>, <span class="dv">1</span>])}</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>centers <span class="op">=</span> np.array([[<span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>], [<span class="fl">0.35</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span>]])</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>radii <span class="op">=</span> np.array([<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>])</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>epsilon <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize figure</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>ax.set_aspect(<span class="st">'equal'</span>, adjustable<span class="op">=</span><span class="st">'box'</span>)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw obstacles</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(radii)):</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    circle <span class="op">=</span> Circle(centers[:, idx], radii[idx], color<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>], alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    ax.add_patch(circle)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot start and goal</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>ax.plot(<span class="dv">0</span>, <span class="dv">0</span>, <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>ax.plot(<span class="dv">1</span>, <span class="dv">1</span>, <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize tree</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>theta_start[<span class="st">'parent'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> [theta_start]</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>final_path_plotted <span class="op">=</span> <span class="va">False</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update(frame):</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> G, final_path_plotted</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> frame <span class="op">==</span> <span class="dv">0</span> <span class="kw">or</span> final_path_plotted:</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample random joint position</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>    theta_rand <span class="op">=</span> np.random.rand(<span class="dv">2</span>)</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Find node in G nearest to theta_rand</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> [np.linalg.norm(node[<span class="st">'coord'</span>] <span class="op">-</span> theta_rand) <span class="cf">for</span> node <span class="kw">in</span> G]</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    theta_near_index <span class="op">=</span> np.argmin(dist)</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>    theta_near <span class="op">=</span> G[theta_near_index]</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Take a step from theta_near towards theta_rand</span></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>    vec_to_rand <span class="op">=</span> theta_rand <span class="op">-</span> theta_near[<span class="st">'coord'</span>]</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>    dist_to_rand <span class="op">=</span> np.linalg.norm(vec_to_rand)</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>    theta_new <span class="op">=</span> {}</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> dist_to_rand <span class="op">&lt;</span> delta:</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>        theta_new[<span class="st">'coord'</span>] <span class="op">=</span> theta_rand</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>        theta_new[<span class="st">'coord'</span>] <span class="op">=</span> theta_near[<span class="st">'coord'</span>] <span class="op">+</span> delta <span class="op">*</span> vec_to_rand <span class="op">/</span> dist_to_rand</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if theta_new is collision-free</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>    collision <span class="op">=</span> <span class="va">False</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> jdx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(radii)):</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>        center <span class="op">=</span> centers[:, jdx]</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>        radius <span class="op">=</span> radii[jdx]</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> np.linalg.norm(theta_new[<span class="st">'coord'</span>] <span class="op">-</span> center) <span class="op">&lt;</span> radius:</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>            collision <span class="op">=</span> <span class="va">True</span></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> collision:</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If collision-free, add theta_new to tree with parent theta_near</span></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>    theta_new[<span class="st">'parent'</span>] <span class="op">=</span> theta_near_index</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>    G.append(theta_new)</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot node and edge</span></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>    ax.plot(theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>], <span class="st">'o'</span>, color<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>], markerfacecolor<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>])</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>    ax.plot([theta_near[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>]], [theta_near[<span class="st">'coord'</span>][<span class="dv">1</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'k-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If goal is close enough to the last node in G, plot the final path</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.linalg.norm(G[<span class="op">-</span><span class="dv">1</span>][<span class="st">'coord'</span>] <span class="op">-</span> theta_goal[<span class="st">'coord'</span>]) <span class="op">&lt;</span> epsilon:</span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>        next_theta <span class="op">=</span> G[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> next_theta[<span class="st">'parent'</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>            prev_theta <span class="op">=</span> G[next_theta[<span class="st">'parent'</span>]]</span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>            line, <span class="op">=</span> ax.plot([next_theta[<span class="st">'coord'</span>][<span class="dv">0</span>], prev_theta[<span class="st">'coord'</span>][<span class="dv">0</span>]], [next_theta[<span class="st">'coord'</span>][<span class="dv">1</span>], prev_theta[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'orange'</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>            next_theta <span class="op">=</span> prev_theta</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add final path to the animation</span></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>        final_path_plotted <span class="op">=</span> <span class="va">True</span></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> line,</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the animation</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>ani <span class="op">=</span> FuncAnimation(fig, update, frames<span class="op">=</span>N, repeat<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the animation</span></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> PillowWriter(fps<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>ani.save(<span class="st">"Baseline_RRT.gif"</span>, writer<span class="op">=</span>writer)</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\bhara\AppData\Local\Temp\ipykernel_6676\592816222.py:104: UserWarning: FigureCanvasAgg is non-interactive, and thus cannot be shown
  plt.show()</code></pre>
</div>
</div>
<p><strong>MATLAB Implementation</strong></p>
<details>
<pre class="{matlab}"><code>clear
close all

% environment
theta_start.coord = [0; 0];
theta_goal.coord = [1; 1];
centers = [0.2, 0.5, 0.7; 0.35, 0.3, 0.5];
radii = [0.2, 0.2, 0.2];

% parameters
epsilon = 0.1;
delta = 0.1;
N = 1000;

% visualize environment
figure
grid on
hold on
axis([0, 1, 0, 1])
axis equal

for idx = 1:length(radii)
 viscircles(centers(:, idx)', radii(idx), 'Color', [0.5, 0.5, ...
 0.5]);
end

plot(0, 0, 'ko', 'MarkerFaceColor', 'k')
plot(1, 1, 'ko', 'MarkerFaceColor', 'k')

% initialize tree
theta_start.parent = 0;
G(1) = theta_start;

for idx = 1:N
 % stop if theta_new is close to theta_goal
 if norm(G(end).coord - theta_goal.coord) &lt; epsilon
 break
 end

 % sample random joint position
 theta_rand = rand(2,1);

 % find node in G nearest to theta_rand
 dist = zeros(length(G), 1);
 for jdx = 1:1:length(G)
 dist(jdx) = norm(G(jdx).coord - theta_rand);
 end
 [~, theta_near_index] = min(dist);
 theta_near = G(theta_near_index);

 % take a step from theta_near towards theta_rand
 vec_to_rand = theta_rand - theta_near.coord;
 dist_to_rand = norm(vec_to_rand);

 if dist_to_rand &lt; delta
 theta_new.coord = theta_rand;
 else
 theta_new.coord = theta_near.coord + delta * ...
 vec_to_rand/dist_to_rand;
 end

 % check if theta_new is collision free
 collision = false;
 for jdx = 1:length(radii)
 center = centers(:, jdx);
 radius = radii(jdx);
 if norm(theta_new.coord - center) &lt; radius
 collision = true;
 end
 end

 if collision
 continue
 end

 % if collision free, add theta_new to tree with parent theta_near
 theta_new.parent = theta_near_index;
 G = [G, theta_new];

 % plot node and edge
 plot(theta_new.coord(1), theta_new.coord(2), 'o', 'Color', [0.5, ...
 0.5, 0.5], 'MarkerFaceColor', [0.5, 0.5, 0.5])
 line([theta_near.coord(1), theta_new.coord(1)], ...
 [theta_near.coord(2), theta_new.coord(2)], 'Color', 'k', 'LineWidth', ...
 2);
end

% work backwards from the final node to the root of the tree
next_theta = G(end);
while next_theta.parent ~= 0
 prev_theta_idx = next_theta.parent;
 prev_theta = G(prev_theta_idx);
 line([next_theta.coord(1), prev_theta.coord(1)], ...
 [next_theta.coord(2), prev_theta.coord(2)], 'Color', [1, 0.5, ...
 0], 'LineWidth', 3);
 next_theta = prev_theta;
end</code></pre>
</details>
<p><strong>Result:</strong></p>
<p><img src="Baseline_RRT.gif" alt="Animated GIF" loop="" width="50%" height="50%"></p>
<p>We can see the trajectory plots in the above figures. Here the black lines and gray dots show the tree ùê∫, while the orange line is the final motion plan from ùúÉùë†ùë°ùëéùëüùë° to a point close to the goal <span class="math inline">\(\normalsize (\epsilon ‚â§ 0.1)\)</span>. Each time we run your RRT code you should get a different solution: RRT builds the tree through random sampling.</p>
</section>
<section id="goal-bias-rrt-algorithm" class="level2">
<h2 class="anchored" data-anchor-id="goal-bias-rrt-algorithm">Goal-Bias RRT Algorithm</h2>
<p>This version will sample the goal more frequently (let‚Äôs refer to this as goal bias). For goal bias, with probability <span class="math inline">\(\normalsize 0.2\)</span> set <span class="math inline">\(\normalsize \theta_{rand}\)</span> as <span class="math inline">\(\normalsize \theta_{goal}\)</span>. Otherwise sample randomly as normal. Then we run our code 10 times for baseline and 10 times for goal bias.</p>
<p>Thus we write down how many samples it takes on average to find a motion plan. Which approach is more sample-efficient: baseline or goal bias?</p>
<p>Let us check the implementation and results.</p>
<p><strong>Goal-Bias RRT Implementation</strong></p>
<div class="cell" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>matplotlib.use(<span class="st">'Agg'</span>)  <span class="co"># Set the backend to a non-interactive backend</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.patches <span class="im">import</span> Circle</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.animation <span class="im">import</span> PillowWriter, FuncAnimation</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Environment</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>theta_start <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">0</span>, <span class="dv">0</span>])}</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>theta_goal <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">1</span>, <span class="dv">1</span>])}</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>centers <span class="op">=</span> np.array([[<span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.7</span>], [<span class="fl">0.35</span>, <span class="fl">0.3</span>, <span class="fl">0.5</span>]])</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>radii <span class="op">=</span> np.array([<span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="fl">0.2</span>])</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>epsilon <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize figure</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>ax.set_aspect(<span class="st">'equal'</span>, adjustable<span class="op">=</span><span class="st">'box'</span>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw obstacles</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(radii)):</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    circle <span class="op">=</span> Circle(centers[:, idx], radii[idx], color<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>], alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    ax.add_patch(circle)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot start and goal</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>ax.plot(<span class="dv">0</span>, <span class="dv">0</span>, <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>ax.plot(<span class="dv">1</span>, <span class="dv">1</span>, <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize tree</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>theta_start[<span class="st">'parent'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> [theta_start]</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>final_path_plotted <span class="op">=</span> <span class="va">False</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update(frame):</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> G, final_path_plotted</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> frame <span class="op">==</span> <span class="dv">0</span> <span class="kw">or</span> final_path_plotted:</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample random joint position</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.random.rand() <span class="op">&lt;</span> <span class="fl">0.2</span>:</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>        theta_rand <span class="op">=</span> theta_goal[<span class="st">'coord'</span>]</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>        theta_rand <span class="op">=</span> np.random.rand(<span class="dv">2</span>)</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Find node in G nearest to theta_rand</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>    dist <span class="op">=</span> [np.linalg.norm(node[<span class="st">'coord'</span>] <span class="op">-</span> theta_rand) <span class="cf">for</span> node <span class="kw">in</span> G]</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>    theta_near_index <span class="op">=</span> np.argmin(dist)</span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    theta_near <span class="op">=</span> G[theta_near_index]</span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Take a step from theta_near towards theta_rand</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    vec_to_rand <span class="op">=</span> theta_rand <span class="op">-</span> theta_near[<span class="st">'coord'</span>]</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>    dist_to_rand <span class="op">=</span> np.linalg.norm(vec_to_rand)</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>    theta_new <span class="op">=</span> {}</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> dist_to_rand <span class="op">&lt;</span> delta:</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>        theta_new[<span class="st">'coord'</span>] <span class="op">=</span> theta_rand</span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>        theta_new[<span class="st">'coord'</span>] <span class="op">=</span> theta_near[<span class="st">'coord'</span>] <span class="op">+</span> delta <span class="op">*</span> vec_to_rand <span class="op">/</span> dist_to_rand</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if theta_new is collision-free</span></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a>    collision <span class="op">=</span> <span class="va">False</span></span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> jdx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(radii)):</span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>        center <span class="op">=</span> centers[:, jdx]</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>        radius <span class="op">=</span> radii[jdx]</span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> np.linalg.norm(theta_new[<span class="st">'coord'</span>] <span class="op">-</span> center) <span class="op">&lt;</span> radius:</span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>            collision <span class="op">=</span> <span class="va">True</span></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> collision:</span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If collision-free, add theta_new to tree with parent theta_near</span></span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>    theta_new[<span class="st">'parent'</span>] <span class="op">=</span> theta_near_index</span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a>    G.append(theta_new)</span>
<span id="cb8-82"><a href="#cb8-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-83"><a href="#cb8-83" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot node and edge</span></span>
<span id="cb8-84"><a href="#cb8-84" aria-hidden="true" tabindex="-1"></a>    ax.plot(theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>], <span class="st">'o'</span>, color<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>], markerfacecolor<span class="op">=</span>[<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>])</span>
<span id="cb8-85"><a href="#cb8-85" aria-hidden="true" tabindex="-1"></a>    ax.plot([theta_near[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>]], [theta_near[<span class="st">'coord'</span>][<span class="dv">1</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'k-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb8-86"><a href="#cb8-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-87"><a href="#cb8-87" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If goal is close enough to the last node in G, plot the final path</span></span>
<span id="cb8-88"><a href="#cb8-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.linalg.norm(G[<span class="op">-</span><span class="dv">1</span>][<span class="st">'coord'</span>] <span class="op">-</span> theta_goal[<span class="st">'coord'</span>]) <span class="op">&lt;</span> epsilon:</span>
<span id="cb8-89"><a href="#cb8-89" aria-hidden="true" tabindex="-1"></a>        next_theta <span class="op">=</span> G[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb8-90"><a href="#cb8-90" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> next_theta[<span class="st">'parent'</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb8-91"><a href="#cb8-91" aria-hidden="true" tabindex="-1"></a>            prev_theta <span class="op">=</span> G[next_theta[<span class="st">'parent'</span>]]</span>
<span id="cb8-92"><a href="#cb8-92" aria-hidden="true" tabindex="-1"></a>            line, <span class="op">=</span> ax.plot([next_theta[<span class="st">'coord'</span>][<span class="dv">0</span>], prev_theta[<span class="st">'coord'</span>][<span class="dv">0</span>]], [next_theta[<span class="st">'coord'</span>][<span class="dv">1</span>], prev_theta[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'orange'</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb8-93"><a href="#cb8-93" aria-hidden="true" tabindex="-1"></a>            next_theta <span class="op">=</span> prev_theta</span>
<span id="cb8-94"><a href="#cb8-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-95"><a href="#cb8-95" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add final path to the animation</span></span>
<span id="cb8-96"><a href="#cb8-96" aria-hidden="true" tabindex="-1"></a>        final_path_plotted <span class="op">=</span> <span class="va">True</span></span>
<span id="cb8-97"><a href="#cb8-97" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> line,</span>
<span id="cb8-98"><a href="#cb8-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-99"><a href="#cb8-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-100"><a href="#cb8-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the animation</span></span>
<span id="cb8-101"><a href="#cb8-101" aria-hidden="true" tabindex="-1"></a>ani <span class="op">=</span> FuncAnimation(fig, update, frames<span class="op">=</span>N, repeat<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb8-102"><a href="#cb8-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-103"><a href="#cb8-103" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the animation</span></span>
<span id="cb8-104"><a href="#cb8-104" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> PillowWriter(fps<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb8-105"><a href="#cb8-105" aria-hidden="true" tabindex="-1"></a>ani.save(<span class="st">"Goal_bias_RRT.gif"</span>, writer<span class="op">=</span>writer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>MATLAB Implementation</strong></p>
<details>
<pre class="{matlab}"><code>clear
close all
% Environment initiation
theta_start.coord = [0; 0];
theta_goal = [1; 1];

% Obstacle Parameters
% First obstacle center and radius
center = [0.2; 0.35];
radius = 0.2;
% Second obstacle center and radius
center2 = [0.5; 0.3]; 
radius2 = 0.2;
% Third obstacle center and radius
center3 = [0.7; 0.5];
radius3 = 0.2;

% Specifying parameters
epsilon = 0.1;
delta = 0.1;
N = 1000;

% Visualizing the environment
figure
grid on
hold on
axis([0, 1, 0, 1])
axis equal
viscircles(center', radius, 'Color', [0.5, 0.5, 0.5]);
viscircles(center2', radius2, 'Color', [0.7, 0.3, 0.3]); % Visualizing the second obstacle
viscircles(center3', radius3, 'Color', [0.3, 0.5, 0.7]); % Visualizing the third obstacle
plot(0, 0, 'ko', 'MarkerFaceColor', 'k')
plot(1, 1, 'ko', 'MarkerFaceColor', 'k')

% Initializing the tree
theta_start.parent = 0;
G(1) = theta_start;

for idx = 1:N
    
    % Stop if the last node in G is close to theta_goal
    if norm(G(end).coord  - theta_goal) &lt; epsilon
        break
    end

    % sample random joint position: probability 0.2
    
    if rand() &lt; 0.2
        theta_rand = theta_goal;
    else
        theta_rand = rand(2,1);
    end
    
    % find node in G nearest to theta_rand
    min_dist = inf;
    theta_near_index = 0;

    for jdx = 1:length(G)
        coord = G(jdx).coord;
        dist = norm(theta_rand - coord);
        if dist &lt; min_dist
            min_dist = dist;
            theta_near_index = jdx;
        end
    end

    theta_near = G(theta_near_index);
    % take a step from theta_near towards theta_rand
    vec_to_rand = theta_rand - theta_near.coord;
    dist_to_rand = norm(vec_to_rand);
    if dist_to_rand &lt; delta
        theta_new.coord = theta_rand;
    else
        theta_new.coord = theta_near.coord + delta * ...
        vec_to_rand/dist_to_rand;
    end
    
    % check if theta_new is collision free with all obstacles
    dist_to_obs1 = norm(theta_new.coord - center);
    dist_to_obs2 = norm(theta_new.coord - center2);
    dist_to_obs3 = norm(theta_new.coord - center3);
    if dist_to_obs1 &lt; radius || dist_to_obs2 &lt; radius2 || dist_to_obs3 &lt; radius3
        continue
    end

    % if collision free, add theta_new to tree with parent theta_near
    theta_new.parent = theta_near_index;
    G = [G, theta_new];

    % plot node and edge
    plot(theta_new.coord(1), theta_new.coord(2), 'o', 'Color', [0.5, 0.5, 0.5], ...
    'MarkerFaceColor', [0.5, 0.5, 0.5])
    line([theta_near.coord(1), theta_new.coord(1)], [theta_near.coord(2), ...
    theta_new.coord(2)], 'Color', 'k', 'LineWidth', 2);
    drawnow

end

% work backwards from the final node to the root of the tree
child_theta = G(end);
while child_theta.parent ~= 0

    parent_theta_index = child_theta.parent;
    parent_theta = G(parent_theta_index);
    line([child_theta.coord(1), parent_theta.coord(1)], ...
        [child_theta.coord(2), parent_theta.coord(2)], ...
        'Color', [1, 0.5, 0], 'LineWidth', 3);
    child_theta = parent_theta;
end</code></pre>
</details>
<p><strong>Result:</strong></p>
<p><img src="Goal_bias_RRT.gif" alt="Animated GIF" loop="" width="50%" height="50%"></p>
<p>The samples ùëÅ across ten runs with baseline and goal bias are tabulated below.</p>
<table class="table">
<thead>
<tr class="header">
<th>run</th>
<th>baseline</th>
<th>goal bias</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>254</td>
<td>225</td>
</tr>
<tr class="even">
<td>2</td>
<td>363</td>
<td>169</td>
</tr>
<tr class="odd">
<td>3</td>
<td>318</td>
<td>150</td>
</tr>
<tr class="even">
<td>4</td>
<td>590</td>
<td>143</td>
</tr>
<tr class="odd">
<td>5</td>
<td>352</td>
<td>249</td>
</tr>
<tr class="even">
<td>6</td>
<td>359</td>
<td>166</td>
</tr>
<tr class="odd">
<td>7</td>
<td>202</td>
<td>251</td>
</tr>
<tr class="even">
<td>8</td>
<td>267</td>
<td>162</td>
</tr>
<tr class="odd">
<td>9</td>
<td>440</td>
<td>183</td>
</tr>
<tr class="even">
<td>10</td>
<td>226</td>
<td>313</td>
</tr>
</tbody>
</table>
<p>On average, the <strong>baseline</strong> required <strong>337</strong> samples to reach a valid motion plan, while <strong>goal bias</strong> needed <strong>201</strong> samples. For <strong>Environment 3</strong> the evidence suggests that biasing the samples towards ùúÉùëîùëúùëéùëô decreases the total number of samples and causes RRT to reach a solution faster. Intuitively, this is because the tree is trying to move in the direction of the goal more frequently.</p>
<p>This is particularly advantageous when the robot is in free space (or has passed the obstacles) and should move directly towards the goal. The code snippet required to implement goal bias is shown below:</p>
<p><strong>Python version</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample random joint position: probability 0.2</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> np.random.rand() <span class="op">&lt;</span> <span class="fl">0.2</span>:</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    theta_rand <span class="op">=</span> theta_goal[<span class="st">'coord'</span>]</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    theta_rand <span class="op">=</span> np.random.rand(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>MATLAB version</strong></p>
<details>
<div class="sourceCode" id="cb11"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">% sample random joint position: probability 0.2</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="va">rand</span>() <span class="op">&lt;</span> <span class="fl">0.2</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">theta_goal</span><span class="op">;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">2</span><span class="op">,</span><span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<p><strong>Sample Efficiency Comparison:</strong></p>
<p>‚Ä¢ Goal-biased RRT seemed to be more sample-efficient in open or less complex environments because it directs its exploration towards the goal, thereby potentially finding a path with fewer samples.</p>
<p>‚Ä¢ In contrast, the baseline RRT might be more effective in highly cluttered environments where a direct path to the goal is less likely, and a more uniform exploration of the space is beneficial.</p>
<p>We need to understand the key differences between the two methods and their impact on sample efficiency:</p>
<ul>
<li><p>Baseline RRT: This approach uniformly samples the entire configuration space without any bias towards the goal. It explores the space in a more scattered manner, which can be beneficial in complex environments with many obstacles. However, it might take more samples to find a path to the goal, especially in large or open spaces, because the sampling is entirely random and not directed towards the goal.</p></li>
<li><p>Goal-Biased RRT: In this approach, the algorithm is biased to sample near the goal state more frequently. This bias can significantly reduce the number of samples required to find a path to the goal in many cases, especially in less complex environments or when the goal is not surrounded by obstacles. The downside is that in highly cluttered environments, this bias might lead to more samples being wasted near the goal where paths are infeasible.</p></li>
</ul>
<script>
const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
</script>
<style>
div#quarto-sidebar-glass { display: none !important; }
ul.navbar-nav.navbar-nav-scroll { -webkit-flex-direction: row !important; }
/* #quarto-sidebar { padding: 5px; }
#quarto-sidebar > * { padding: 5px; }
div.sidebar-menu-container > * { padding: 5px 5px 5px 5px; }
#quarto-margin-sidebar { padding: 40px; } */
</style>


<!-- -->

</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb12" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "RRT Algorithm Simulation"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [Robotics]</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> RRT_main.gif</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">    html: </span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">        code-fold: true</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">        code-overflow: scroll</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">        code-tools: true</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="fu">## RRT Algorithm</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>**The path plan should actually work on a robot.** If the path plan makes the robot turn at sharp angles but the robot can‚Äôt move at sharp angles (like a car), that path plan shouldn‚Äôt be allowed.</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>**The path plan should be as close to optimal as possible.** While it‚Äôs nice to find any path plan that gets the robot from a start location to a goal location, that isn‚Äôt enough unfortunately. We‚Äôd like something that‚Äôs somewhat efficient. Not only will it help the robot complete its task as fast as possible, but it‚Äôll also conserve its precious battery life.</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>**The path plan should avoid colliding with walls.** This obviously goes without saying. Robots can be pretty expensive, and crashing is never a good thing. My little robot alone cost me well over a thousand bucks.</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>One of the most popular algorithms for coming up with a path plan that tries to satisfies these conditions is called Rapidly-exploring Random Trees (RRT). Since a picture is worth a thousand words, check out the diagram below. Let‚Äôs suppose the robot has to go from a start location (the red dot) to a goal location (the green dot) in a simple map without any obstacles. Basically, we‚Äôll start off with a tree that has a root node representing the start position of the robot. After that, we‚Äôll build the tree up gradually. How? We‚Äôll take a bunch of random samples of the map, make a new node for each random sample, and insert each new node into the tree somehow. Once the tree has a node that‚Äôs close enough to the goal position of the robot, we‚Äôre done.</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>Here we are using the RRT algorithm to perform motion planning in 2-DoF environments. As before, the mobile robot‚Äôs position is $\normalsize \theta = <span class="co">[</span><span class="ot">ùë•, ùë¶</span><span class="co">]</span>^ùëá$.</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>Implementing the RRT algorithm below. This code should be able to work with an arbitrary number of circular obstacles with 2 conditions:</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>‚Ä¢ The bounds of the workspace are $\normalsize ùë• ‚àà <span class="co">[</span><span class="ot">0, 1</span><span class="co">]</span>, \, ùë¶ ‚àà <span class="co">[</span><span class="ot">0, 1</span><span class="co">]</span>$</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>‚Ä¢ The motion plan must end within $\normalsize \epsilon = 0.1$  units of the goal</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>**Code Implementation** </span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>matplotlib.use(<span class="st">'Agg'</span>)  <span class="co"># Set the backend to a non-interactive backend</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.patches <span class="im">import</span> Circle</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.animation <span class="im">import</span> PillowWriter, FuncAnimation</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Define start and goal positions</span></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>theta_start <span class="op">=</span> {<span class="st">'coord'</span>: np.array([<span class="dv">0</span>, <span class="dv">0</span>]), <span class="st">'parent'</span>: <span class="va">None</span>}</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>theta_goal <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">1</span>])</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Workspace bounds</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>x_bounds <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>y_bounds <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Define obstacles</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>obstacles <span class="op">=</span> np.array([</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>],</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.7</span>, <span class="fl">0.7</span>, <span class="fl">0.2</span>],</span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.6</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>],</span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.4</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>],</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>    [<span class="fl">0.1</span>, <span class="fl">0.75</span>, <span class="fl">0.3</span>]</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a><span class="co"># RRT parameters</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>epsilon <span class="op">=</span> <span class="fl">0.1</span>  <span class="co"># Goal threshold</span></span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fl">0.05</span>   <span class="co"># Step size</span></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">1000</span>       <span class="co"># Number of iterations</span></span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize tree</span></span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> [theta_start]</span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize environment setup</span></span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>ax.set_xlim(x_bounds)</span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a>ax.set_ylim(y_bounds)</span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a>ax.set_aspect(<span class="st">'equal'</span>)</span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot obstacles</span></span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> obstacle <span class="kw">in</span> obstacles:</span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a>    circle <span class="op">=</span> Circle(obstacle[<span class="dv">0</span>:<span class="dv">2</span>], obstacle[<span class="dv">2</span>], color<span class="op">=</span><span class="st">'gray'</span>, fill<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a>    ax.add_patch(circle)</span>
<span id="cb12-79"><a href="#cb12-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-80"><a href="#cb12-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot start and goal</span></span>
<span id="cb12-81"><a href="#cb12-81" aria-hidden="true" tabindex="-1"></a>start_plot, <span class="op">=</span> ax.plot(theta_start[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_start[<span class="st">'coord'</span>][<span class="dv">1</span>], <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb12-82"><a href="#cb12-82" aria-hidden="true" tabindex="-1"></a>goal_plot, <span class="op">=</span> ax.plot(theta_goal[<span class="dv">0</span>], theta_goal[<span class="dv">1</span>], <span class="st">'ko'</span>, markerfacecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb12-83"><a href="#cb12-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-84"><a href="#cb12-84" aria-hidden="true" tabindex="-1"></a><span class="co"># This flag is used to stop the animation once the goal is reached</span></span>
<span id="cb12-85"><a href="#cb12-85" aria-hidden="true" tabindex="-1"></a>goal_reached <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-86"><a href="#cb12-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-87"><a href="#cb12-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Animation update function</span></span>
<span id="cb12-88"><a href="#cb12-88" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update(frame):</span>
<span id="cb12-89"><a href="#cb12-89" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> G, goal_reached</span>
<span id="cb12-90"><a href="#cb12-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-91"><a href="#cb12-91" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> goal_reached:</span>
<span id="cb12-92"><a href="#cb12-92" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb12-93"><a href="#cb12-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-94"><a href="#cb12-94" aria-hidden="true" tabindex="-1"></a>    theta_rand <span class="op">=</span> theta_goal <span class="cf">if</span> np.random.rand() <span class="op">&lt;</span> <span class="fl">0.2</span> <span class="cf">else</span> np.random.rand(<span class="dv">2</span>)</span>
<span id="cb12-95"><a href="#cb12-95" aria-hidden="true" tabindex="-1"></a>    distances <span class="op">=</span> [np.linalg.norm(node[<span class="st">'coord'</span>] <span class="op">-</span> theta_rand) <span class="cf">for</span> node <span class="kw">in</span> G]</span>
<span id="cb12-96"><a href="#cb12-96" aria-hidden="true" tabindex="-1"></a>    theta_near_index <span class="op">=</span> np.argmin(distances)</span>
<span id="cb12-97"><a href="#cb12-97" aria-hidden="true" tabindex="-1"></a>    theta_near <span class="op">=</span> G[theta_near_index]</span>
<span id="cb12-98"><a href="#cb12-98" aria-hidden="true" tabindex="-1"></a>    vec_to_rand <span class="op">=</span> theta_rand <span class="op">-</span> theta_near[<span class="st">'coord'</span>]</span>
<span id="cb12-99"><a href="#cb12-99" aria-hidden="true" tabindex="-1"></a>    vec_to_rand <span class="op">=</span> delta <span class="op">*</span> vec_to_rand <span class="op">/</span> np.linalg.norm(vec_to_rand)</span>
<span id="cb12-100"><a href="#cb12-100" aria-hidden="true" tabindex="-1"></a>    theta_new <span class="op">=</span> {<span class="st">'coord'</span>: theta_near[<span class="st">'coord'</span>] <span class="op">+</span> vec_to_rand, <span class="st">'parent'</span>: theta_near_index}</span>
<span id="cb12-101"><a href="#cb12-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-102"><a href="#cb12-102" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> is_collision(theta_new[<span class="st">'coord'</span>], obstacles):</span>
<span id="cb12-103"><a href="#cb12-103" aria-hidden="true" tabindex="-1"></a>        G.append(theta_new)</span>
<span id="cb12-104"><a href="#cb12-104" aria-hidden="true" tabindex="-1"></a>        ax.plot([theta_near[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>]], [theta_near[<span class="st">'coord'</span>][<span class="dv">1</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>]], <span class="st">'k-'</span>, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb12-105"><a href="#cb12-105" aria-hidden="true" tabindex="-1"></a>        ax.plot(theta_new[<span class="st">'coord'</span>][<span class="dv">0</span>], theta_new[<span class="st">'coord'</span>][<span class="dv">1</span>], <span class="st">'o'</span>, color<span class="op">=</span><span class="st">'gray'</span>, markerfacecolor<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb12-106"><a href="#cb12-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-107"><a href="#cb12-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> np.linalg.norm(theta_new[<span class="st">'coord'</span>] <span class="op">-</span> theta_goal) <span class="op">&lt;</span> epsilon:</span>
<span id="cb12-108"><a href="#cb12-108" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Draw the final path in orange</span></span>
<span id="cb12-109"><a href="#cb12-109" aria-hidden="true" tabindex="-1"></a>            current <span class="op">=</span> theta_new</span>
<span id="cb12-110"><a href="#cb12-110" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> current[<span class="st">'parent'</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb12-111"><a href="#cb12-111" aria-hidden="true" tabindex="-1"></a>                parent <span class="op">=</span> G[current[<span class="st">'parent'</span>]]</span>
<span id="cb12-112"><a href="#cb12-112" aria-hidden="true" tabindex="-1"></a>                ax.plot([current[<span class="st">'coord'</span>][<span class="dv">0</span>], parent[<span class="st">'coord'</span>][<span class="dv">0</span>]], [current[<span class="st">'coord'</span>][<span class="dv">1</span>], parent[<span class="st">'coord'</span>][<span class="dv">1</span>]], color<span class="op">=</span><span class="st">'orange'</span>, linewidth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb12-113"><a href="#cb12-113" aria-hidden="true" tabindex="-1"></a>                current <span class="op">=</span> parent</span>
<span id="cb12-114"><a href="#cb12-114" aria-hidden="true" tabindex="-1"></a>            goal_reached <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-115"><a href="#cb12-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-116"><a href="#cb12-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Collision checking function</span></span>
<span id="cb12-117"><a href="#cb12-117" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_collision(coord, obstacles):</span>
<span id="cb12-118"><a href="#cb12-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">any</span>(np.linalg.norm(coord <span class="op">-</span> obstacle[<span class="dv">0</span>:<span class="dv">2</span>]) <span class="op">&lt;</span> obstacle[<span class="dv">2</span>] <span class="cf">for</span> obstacle <span class="kw">in</span> obstacles)</span>
<span id="cb12-119"><a href="#cb12-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-120"><a href="#cb12-120" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the animation</span></span>
<span id="cb12-121"><a href="#cb12-121" aria-hidden="true" tabindex="-1"></a>ani <span class="op">=</span> FuncAnimation(fig, update, frames<span class="op">=</span>N, repeat<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-122"><a href="#cb12-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-123"><a href="#cb12-123" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the animation as a GIF</span></span>
<span id="cb12-124"><a href="#cb12-124" aria-hidden="true" tabindex="-1"></a>gif_path <span class="op">=</span> <span class="st">"RRT_main.gif"</span></span>
<span id="cb12-125"><a href="#cb12-125" aria-hidden="true" tabindex="-1"></a>writer <span class="op">=</span> PillowWriter(fps<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb12-126"><a href="#cb12-126" aria-hidden="true" tabindex="-1"></a>ani.save(gif_path, writer<span class="op">=</span>writer)</span>
<span id="cb12-127"><a href="#cb12-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-128"><a href="#cb12-128" aria-hidden="true" tabindex="-1"></a><span class="co"># Close the plot</span></span>
<span id="cb12-129"><a href="#cb12-129" aria-hidden="true" tabindex="-1"></a>plt.close()</span>
<span id="cb12-130"><a href="#cb12-130" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb12-131"><a href="#cb12-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-132"><a href="#cb12-132" aria-hidden="true" tabindex="-1"></a>**MATLAB Implementation**</span>
<span id="cb12-133"><a href="#cb12-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-134"><a href="#cb12-134" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;details&gt;</span></span>
<span id="cb12-135"><a href="#cb12-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-136"><a href="#cb12-136" aria-hidden="true" tabindex="-1"></a><span class="in">```matlab</span></span>
<span id="cb12-137"><a href="#cb12-137" aria-hidden="true" tabindex="-1"></a><span class="va">clear</span></span>
<span id="cb12-138"><a href="#cb12-138" aria-hidden="true" tabindex="-1"></a><span class="va">close</span> <span class="va">all</span></span>
<span id="cb12-139"><a href="#cb12-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-140"><a href="#cb12-140" aria-hidden="true" tabindex="-1"></a><span class="co">% Define start and goal positions</span></span>
<span id="cb12-141"><a href="#cb12-141" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>.<span class="va">coord</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">;</span> <span class="fl">0</span>]<span class="op">;</span></span>
<span id="cb12-142"><a href="#cb12-142" aria-hidden="true" tabindex="-1"></a><span class="va">theta_goal</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">;</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb12-143"><a href="#cb12-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-144"><a href="#cb12-144" aria-hidden="true" tabindex="-1"></a><span class="co">% Workspace bounds</span></span>
<span id="cb12-145"><a href="#cb12-145" aria-hidden="true" tabindex="-1"></a><span class="va">x_bounds</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb12-146"><a href="#cb12-146" aria-hidden="true" tabindex="-1"></a><span class="va">y_bounds</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb12-147"><a href="#cb12-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-148"><a href="#cb12-148" aria-hidden="true" tabindex="-1"></a><span class="co">% Define obstacles</span></span>
<span id="cb12-149"><a href="#cb12-149" aria-hidden="true" tabindex="-1"></a><span class="co">% Each row is an obstacle with format: [center_x, center_y, radius]</span></span>
<span id="cb12-150"><a href="#cb12-150" aria-hidden="true" tabindex="-1"></a><span class="va">obstacles</span> <span class="op">=</span> [</span>
<span id="cb12-151"><a href="#cb12-151" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb12-152"><a href="#cb12-152" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.7</span><span class="op">,</span> <span class="fl">0.7</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb12-153"><a href="#cb12-153" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.6</span><span class="op">,</span> <span class="fl">0.4</span><span class="op">,</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb12-154"><a href="#cb12-154" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.4</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb12-155"><a href="#cb12-155" aria-hidden="true" tabindex="-1"></a>    <span class="fl">0.1</span><span class="op">,</span> <span class="fl">0.75</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">;</span></span>
<span id="cb12-156"><a href="#cb12-156" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Add as many obstacles required, satisfying the condition of arbitrary</span></span>
<span id="cb12-157"><a href="#cb12-157" aria-hidden="true" tabindex="-1"></a>    <span class="co">% number of obstacles' inclusion</span></span>
<span id="cb12-158"><a href="#cb12-158" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb12-159"><a href="#cb12-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-160"><a href="#cb12-160" aria-hidden="true" tabindex="-1"></a><span class="co">% RRT parameters</span></span>
<span id="cb12-161"><a href="#cb12-161" aria-hidden="true" tabindex="-1"></a><span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span> <span class="co">% Goal threshold</span></span>
<span id="cb12-162"><a href="#cb12-162" aria-hidden="true" tabindex="-1"></a><span class="va">delta</span> <span class="op">=</span> <span class="fl">0.05</span><span class="op">;</span>  <span class="co">% Step size</span></span>
<span id="cb12-163"><a href="#cb12-163" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span><span class="op">;</span>      <span class="co">% Number of iterations</span></span>
<span id="cb12-164"><a href="#cb12-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-165"><a href="#cb12-165" aria-hidden="true" tabindex="-1"></a><span class="co">% Visualize environment</span></span>
<span id="cb12-166"><a href="#cb12-166" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb12-167"><a href="#cb12-167" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">on</span></span>
<span id="cb12-168"><a href="#cb12-168" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span></span>
<span id="cb12-169"><a href="#cb12-169" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="va">x_bounds</span><span class="op">,</span> <span class="va">y_bounds</span>])</span>
<span id="cb12-170"><a href="#cb12-170" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span> <span class="va">equal</span></span>
<span id="cb12-171"><a href="#cb12-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-172"><a href="#cb12-172" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot obstacles</span></span>
<span id="cb12-173"><a href="#cb12-173" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">i</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">size</span>(<span class="va">obstacles</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-174"><a href="#cb12-174" aria-hidden="true" tabindex="-1"></a>    <span class="va">viscircles</span>(<span class="va">obstacles</span>(<span class="va">i</span><span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>)<span class="op">,</span> <span class="va">obstacles</span>(<span class="va">i</span><span class="op">,</span> <span class="fl">3</span>)<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])<span class="op">;</span></span>
<span id="cb12-175"><a href="#cb12-175" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-176"><a href="#cb12-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-177"><a href="#cb12-177" aria-hidden="true" tabindex="-1"></a><span class="co">% Initialize tree</span></span>
<span id="cb12-178"><a href="#cb12-178" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>.<span class="va">parent</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb12-179"><a href="#cb12-179" aria-hidden="true" tabindex="-1"></a><span class="va">G</span>(<span class="fl">1</span>) <span class="op">=</span> <span class="va">theta_start</span><span class="op">;</span></span>
<span id="cb12-180"><a href="#cb12-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-181"><a href="#cb12-181" aria-hidden="true" tabindex="-1"></a><span class="co">% Main RRT loop</span></span>
<span id="cb12-182"><a href="#cb12-182" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">N</span></span>
<span id="cb12-183"><a href="#cb12-183" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">norm</span>(<span class="va">G</span>(<span class="kw">end</span>).<span class="va">coord</span> <span class="op">-</span> <span class="va">theta_goal</span>) <span class="op">&lt;</span> <span class="va">epsilon</span></span>
<span id="cb12-184"><a href="#cb12-184" aria-hidden="true" tabindex="-1"></a>        <span class="kw">break</span></span>
<span id="cb12-185"><a href="#cb12-185" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb12-186"><a href="#cb12-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-187"><a href="#cb12-187" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Random sample</span></span>
<span id="cb12-188"><a href="#cb12-188" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">2</span><span class="op">,</span><span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb12-189"><a href="#cb12-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-190"><a href="#cb12-190" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Nearest node</span></span>
<span id="cb12-191"><a href="#cb12-191" aria-hidden="true" tabindex="-1"></a>    [<span class="va">min_dist</span><span class="op">,</span> <span class="va">theta_near_index</span>] <span class="op">=</span> <span class="va">min</span>(<span class="va">vecnorm</span>([<span class="va">G</span>.<span class="va">coord</span>] <span class="op">-</span> <span class="va">theta_rand</span>))<span class="op">;</span></span>
<span id="cb12-192"><a href="#cb12-192" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">theta_near_index</span>)<span class="op">;</span></span>
<span id="cb12-193"><a href="#cb12-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-194"><a href="#cb12-194" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Step towards random sample</span></span>
<span id="cb12-195"><a href="#cb12-195" aria-hidden="true" tabindex="-1"></a>    <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">theta_rand</span> <span class="op">-</span> <span class="va">theta_near</span>.<span class="va">coord</span><span class="op">;</span></span>
<span id="cb12-196"><a href="#cb12-196" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">norm</span>(<span class="va">vec_to_rand</span>) <span class="op">&gt;</span> <span class="va">delta</span></span>
<span id="cb12-197"><a href="#cb12-197" aria-hidden="true" tabindex="-1"></a>        <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">delta</span> <span class="op">*</span> <span class="va">vec_to_rand</span> <span class="op">/</span> <span class="va">norm</span>(<span class="va">vec_to_rand</span>)<span class="op">;</span></span>
<span id="cb12-198"><a href="#cb12-198" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb12-199"><a href="#cb12-199" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">=</span> <span class="va">theta_near</span>.<span class="va">coord</span> <span class="op">+</span> <span class="va">vec_to_rand</span><span class="op">;</span></span>
<span id="cb12-200"><a href="#cb12-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-201"><a href="#cb12-201" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Collision check with all obstacles</span></span>
<span id="cb12-202"><a href="#cb12-202" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">isCollision</span>(<span class="va">theta_new</span>.<span class="va">coord</span><span class="op">,</span> <span class="va">obstacles</span>)</span>
<span id="cb12-203"><a href="#cb12-203" aria-hidden="true" tabindex="-1"></a>        <span class="kw">continue</span><span class="op">;</span></span>
<span id="cb12-204"><a href="#cb12-204" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb12-205"><a href="#cb12-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-206"><a href="#cb12-206" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Add new node to tree</span></span>
<span id="cb12-207"><a href="#cb12-207" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>.<span class="va">parent</span> <span class="op">=</span> <span class="va">theta_near_index</span><span class="op">;</span></span>
<span id="cb12-208"><a href="#cb12-208" aria-hidden="true" tabindex="-1"></a>    <span class="va">G</span> <span class="op">=</span> [<span class="va">G</span><span class="op">,</span> <span class="va">theta_new</span>]<span class="op">;</span></span>
<span id="cb12-209"><a href="#cb12-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-210"><a href="#cb12-210" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Plotting</span></span>
<span id="cb12-211"><a href="#cb12-211" aria-hidden="true" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="ss">'o'</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-212"><a href="#cb12-212" aria-hidden="true" tabindex="-1"></a>    <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])<span class="op">;</span></span>
<span id="cb12-213"><a href="#cb12-213" aria-hidden="true" tabindex="-1"></a>    <span class="va">line</span>([<span class="va">theta_near</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">1</span>)]<span class="op">,</span> [<span class="va">theta_near</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">2</span>)]<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> <span class="ss">'k'</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb12-214"><a href="#cb12-214" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-215"><a href="#cb12-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-216"><a href="#cb12-216" aria-hidden="true" tabindex="-1"></a><span class="co">% Trace back path</span></span>
<span id="cb12-217"><a href="#cb12-217" aria-hidden="true" tabindex="-1"></a><span class="va">child_theta</span> <span class="op">=</span> <span class="va">G</span>(<span class="kw">end</span>)<span class="op">;</span></span>
<span id="cb12-218"><a href="#cb12-218" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="va">child_theta</span>.<span class="va">parent</span> <span class="op">~=</span> <span class="fl">0</span></span>
<span id="cb12-219"><a href="#cb12-219" aria-hidden="true" tabindex="-1"></a>    <span class="va">parent_theta</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">child_theta</span>.<span class="va">parent</span>)<span class="op">;</span></span>
<span id="cb12-220"><a href="#cb12-220" aria-hidden="true" tabindex="-1"></a>    <span class="va">line</span>([<span class="va">child_theta</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">parent_theta</span>.<span class="va">coord</span>(<span class="fl">1</span>)]<span class="op">,</span> [<span class="va">child_theta</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="va">parent_theta</span>.<span class="va">coord</span>(<span class="fl">2</span>)]<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0</span>]<span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb12-221"><a href="#cb12-221" aria-hidden="true" tabindex="-1"></a>    <span class="va">child_theta</span> <span class="op">=</span> <span class="va">parent_theta</span><span class="op">;</span></span>
<span id="cb12-222"><a href="#cb12-222" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-223"><a href="#cb12-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-224"><a href="#cb12-224" aria-hidden="true" tabindex="-1"></a><span class="co">% Plot start and goal</span></span>
<span id="cb12-225"><a href="#cb12-225" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">theta_start</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_start</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> <span class="ss">'k'</span>)<span class="op">;</span></span>
<span id="cb12-226"><a href="#cb12-226" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">theta_goal</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_goal</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> <span class="ss">'k'</span>)<span class="op">;</span></span>
<span id="cb12-227"><a href="#cb12-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-228"><a href="#cb12-228" aria-hidden="true" tabindex="-1"></a><span class="co">% Collision checking function</span></span>
<span id="cb12-229"><a href="#cb12-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-230"><a href="#cb12-230" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="va">collision</span> <span class="op">=</span> <span class="va">isCollision</span>(<span class="va">coord</span><span class="op">,</span> <span class="va">obstacles</span>)</span>
<span id="cb12-231"><a href="#cb12-231" aria-hidden="true" tabindex="-1"></a>    <span class="va">collision</span> <span class="op">=</span> <span class="va">any</span>(<span class="va">arrayfun</span>(<span class="op">@</span>(<span class="va">idx</span>) <span class="va">norm</span>(<span class="va">coord</span> <span class="op">-</span> <span class="va">obstacles</span>(<span class="va">idx</span><span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>)<span class="op">'</span>) <span class="op">&lt;</span> <span class="va">obstacles</span>(<span class="va">idx</span><span class="op">,</span> <span class="fl">3</span>)<span class="op">,</span> <span class="fl">1</span><span class="op">:</span><span class="va">size</span>(<span class="va">obstacles</span><span class="op">,</span> <span class="fl">1</span>)))<span class="op">;</span></span>
<span id="cb12-232"><a href="#cb12-232" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-233"><a href="#cb12-233" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-234"><a href="#cb12-234" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span><span class="va">details</span><span class="op">&gt;</span></span>
<span id="cb12-235"><a href="#cb12-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-236"><a href="#cb12-236" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Result</span><span class="op">**</span></span>
<span id="cb12-237"><a href="#cb12-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-238"><a href="#cb12-238" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">img</span> <span class="va">src</span><span class="op">=</span><span class="st">"RRT_main.gif"</span> <span class="va">alt</span><span class="op">=</span><span class="st">"Animated GIF"</span> <span class="va">loop</span> <span class="va">width</span><span class="op">=</span><span class="st">"50%"</span> <span class="va">height</span><span class="op">=</span><span class="st">"50%"</span><span class="op">&gt;</span></span>
<span id="cb12-239"><a href="#cb12-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-240"><a href="#cb12-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-241"><a href="#cb12-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-242"><a href="#cb12-242" aria-hidden="true" tabindex="-1"></a><span class="va">Notice</span> <span class="va">that</span> <span class="va">centers</span> <span class="va">is</span> <span class="va">a</span> <span class="va">matrix</span> <span class="va">where</span> <span class="va">each</span> <span class="va">column</span> <span class="va">corresponds</span> <span class="va">to</span> <span class="va">an</span> <span class="va">obstacle</span> <span class="va">center</span>. <span class="va">Similarly</span><span class="op">,</span> <span class="va">radii</span> <span class="va">is</span> <span class="va">a</span> <span class="va">vector</span> <span class="va">where</span> <span class="va">the</span> $<span class="op">\</span><span class="va">normalsize</span> ùëñ<span class="op">^</span>{<span class="va">th</span>}$ <span class="va">entry</span> <span class="va">corresponds</span> <span class="va">to</span> <span class="va">the</span> <span class="va">radius</span> <span class="va">of</span> <span class="va">the</span> $<span class="op">\</span><span class="va">normalsize</span> ùëñ<span class="op">^</span>{<span class="va">th</span>}$ <span class="va">obstacle</span>.</span>
<span id="cb12-243"><a href="#cb12-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-244"><a href="#cb12-244" aria-hidden="true" tabindex="-1"></a> <span class="op">*</span> <span class="op">**</span><span class="va">Environment</span> <span class="fl">1</span><span class="op">:</span> <span class="va">One</span> <span class="va">obstacle</span> <span class="va">with</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="va">center</span> <span class="op">\;</span> ùëê_<span class="fl">1</span> <span class="op">=</span> [<span class="fl">0.55</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">^</span>ùëá <span class="op">\;</span> <span class="va">and</span> <span class="op">\;</span> <span class="va">radius</span> <span class="op">\;</span> ùëü_<span class="fl">1</span> <span class="op">=</span> <span class="fl">0.3</span>$<span class="op">.**</span></span>
<span id="cb12-245"><a href="#cb12-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-246"><a href="#cb12-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-247"><a href="#cb12-247" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">RRT</span> <span class="va">Algorithm</span> <span class="kw">for</span> <span class="fl">1</span> <span class="va">Obstacle</span><span class="op">**</span></span>
<span id="cb12-248"><a href="#cb12-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-251"><a href="#cb12-251" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb12-252"><a href="#cb12-252" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">numpy</span> <span class="va">as</span> <span class="va">np</span></span>
<span id="cb12-253"><a href="#cb12-253" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">matplotlib</span></span>
<span id="cb12-254"><a href="#cb12-254" aria-hidden="true" tabindex="-1"></a><span class="va">matplotlib</span>.<span class="va">use</span>(<span class="ss">'Agg'</span>)  # <span class="va">Set</span> <span class="va">the</span> <span class="va">backend</span> <span class="va">to</span> <span class="va">a</span> <span class="va">non</span><span class="op">-</span><span class="va">interactive</span> <span class="va">backend</span></span>
<span id="cb12-255"><a href="#cb12-255" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">matplotlib</span>.<span class="va">pyplot</span> <span class="va">as</span> <span class="va">plt</span></span>
<span id="cb12-256"><a href="#cb12-256" aria-hidden="true" tabindex="-1"></a><span class="va">from</span> <span class="va">matplotlib</span>.<span class="va">patches</span> <span class="va">import</span> <span class="va">Circle</span></span>
<span id="cb12-257"><a href="#cb12-257" aria-hidden="true" tabindex="-1"></a><span class="va">from</span> <span class="va">matplotlib</span>.<span class="va">animation</span> <span class="va">import</span> <span class="va">PillowWriter</span><span class="op">,</span> <span class="va">FuncAnimation</span></span>
<span id="cb12-258"><a href="#cb12-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-259"><a href="#cb12-259" aria-hidden="true" tabindex="-1"></a># <span class="va">Environment</span></span>
<span id="cb12-260"><a href="#cb12-260" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span> <span class="op">=</span> {<span class="ss">'coord'</span><span class="op">:</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span>])}</span>
<span id="cb12-261"><a href="#cb12-261" aria-hidden="true" tabindex="-1"></a><span class="va">theta_goal</span> <span class="op">=</span> {<span class="ss">'coord'</span><span class="op">:</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span>])}</span>
<span id="cb12-262"><a href="#cb12-262" aria-hidden="true" tabindex="-1"></a><span class="va">centers</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">array</span>([[<span class="fl">0.5</span>]<span class="op">,</span> [<span class="fl">0.5</span>]])</span>
<span id="cb12-263"><a href="#cb12-263" aria-hidden="true" tabindex="-1"></a><span class="va">radii</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">0.3</span>])</span>
<span id="cb12-264"><a href="#cb12-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-265"><a href="#cb12-265" aria-hidden="true" tabindex="-1"></a># <span class="va">Parameters</span></span>
<span id="cb12-266"><a href="#cb12-266" aria-hidden="true" tabindex="-1"></a><span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb12-267"><a href="#cb12-267" aria-hidden="true" tabindex="-1"></a><span class="va">delta</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb12-268"><a href="#cb12-268" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span></span>
<span id="cb12-269"><a href="#cb12-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-270"><a href="#cb12-270" aria-hidden="true" tabindex="-1"></a># <span class="va">Initialize</span> <span class="va">figure</span></span>
<span id="cb12-271"><a href="#cb12-271" aria-hidden="true" tabindex="-1"></a><span class="va">fig</span><span class="op">,</span> <span class="va">ax</span> <span class="op">=</span> <span class="va">plt</span>.<span class="va">subplots</span>()</span>
<span id="cb12-272"><a href="#cb12-272" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">grid</span>(<span class="va">True</span>)</span>
<span id="cb12-273"><a href="#cb12-273" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_xlim</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-274"><a href="#cb12-274" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_ylim</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-275"><a href="#cb12-275" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_aspect</span>(<span class="ss">'equal'</span><span class="op">,</span> <span class="va">adjustable</span><span class="op">=</span><span class="ss">'box'</span>)</span>
<span id="cb12-276"><a href="#cb12-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-277"><a href="#cb12-277" aria-hidden="true" tabindex="-1"></a># <span class="va">Draw</span> <span class="va">obstacles</span></span>
<span id="cb12-278"><a href="#cb12-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-279"><a href="#cb12-279" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="va">in</span> <span class="va">range</span>(<span class="va">len</span>(<span class="va">radii</span>))<span class="op">:</span></span>
<span id="cb12-280"><a href="#cb12-280" aria-hidden="true" tabindex="-1"></a>    <span class="va">circle</span> <span class="op">=</span> <span class="va">Circle</span>(<span class="va">centers</span>[<span class="op">:,</span> <span class="va">idx</span>]<span class="op">,</span> <span class="va">radii</span>[<span class="va">idx</span>]<span class="op">,</span> <span class="va">color</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="va">alpha</span><span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb12-281"><a href="#cb12-281" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">add_patch</span>(<span class="va">circle</span>)</span>
<span id="cb12-282"><a href="#cb12-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-283"><a href="#cb12-283" aria-hidden="true" tabindex="-1"></a># <span class="va">Plot</span> <span class="va">start</span> <span class="va">and</span> <span class="va">goal</span></span>
<span id="cb12-284"><a href="#cb12-284" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">plot</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span><span class="ss">'k'</span>)</span>
<span id="cb12-285"><a href="#cb12-285" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">plot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span><span class="ss">'k'</span>)</span>
<span id="cb12-286"><a href="#cb12-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-287"><a href="#cb12-287" aria-hidden="true" tabindex="-1"></a># <span class="va">Initialize</span> <span class="va">tree</span></span>
<span id="cb12-288"><a href="#cb12-288" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>[<span class="ss">'parent'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb12-289"><a href="#cb12-289" aria-hidden="true" tabindex="-1"></a><span class="va">G</span> <span class="op">=</span> [<span class="va">theta_start</span>]</span>
<span id="cb12-290"><a href="#cb12-290" aria-hidden="true" tabindex="-1"></a><span class="va">final_path_plotted</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-291"><a href="#cb12-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-292"><a href="#cb12-292" aria-hidden="true" tabindex="-1"></a><span class="va">def</span> <span class="va">update</span>(<span class="va">frame</span>)<span class="op">:</span></span>
<span id="cb12-293"><a href="#cb12-293" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> <span class="va">G</span><span class="op">,</span> <span class="va">final_path_plotted</span></span>
<span id="cb12-294"><a href="#cb12-294" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">frame</span> <span class="op">==</span> <span class="fl">0</span> <span class="va">or</span> <span class="va">final_path_plotted</span><span class="op">:</span></span>
<span id="cb12-295"><a href="#cb12-295" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span>
<span id="cb12-296"><a href="#cb12-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-297"><a href="#cb12-297" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Sample</span> <span class="va">random</span> <span class="va">joint</span> <span class="va">position</span></span>
<span id="cb12-298"><a href="#cb12-298" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">random</span>.<span class="va">rand</span>(<span class="fl">2</span>)</span>
<span id="cb12-299"><a href="#cb12-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-300"><a href="#cb12-300" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Find</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span> <span class="va">nearest</span> <span class="va">to</span> <span class="va">theta_rand</span></span>
<span id="cb12-301"><a href="#cb12-301" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist</span> <span class="op">=</span> [<span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">node</span>[<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">theta_rand</span>) <span class="kw">for</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span>]</span>
<span id="cb12-302"><a href="#cb12-302" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near_index</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">argmin</span>(<span class="va">dist</span>)</span>
<span id="cb12-303"><a href="#cb12-303" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near</span> <span class="op">=</span> <span class="va">G</span>[<span class="va">theta_near_index</span>]</span>
<span id="cb12-304"><a href="#cb12-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-305"><a href="#cb12-305" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Take</span> <span class="va">a</span> <span class="va">step</span> <span class="va">from</span> <span class="va">theta_near</span> <span class="va">towards</span> <span class="va">theta_rand</span></span>
<span id="cb12-306"><a href="#cb12-306" aria-hidden="true" tabindex="-1"></a>    <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">theta_rand</span> <span class="op">-</span> <span class="va">theta_near</span>[<span class="ss">'coord'</span>]</span>
<span id="cb12-307"><a href="#cb12-307" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist_to_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">vec_to_rand</span>)</span>
<span id="cb12-308"><a href="#cb12-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-309"><a href="#cb12-309" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span> <span class="op">=</span> {}</span>
<span id="cb12-310"><a href="#cb12-310" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">dist_to_rand</span> <span class="op">&lt;</span> <span class="va">delta</span><span class="op">:</span></span>
<span id="cb12-311"><a href="#cb12-311" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">=</span> <span class="va">theta_rand</span></span>
<span id="cb12-312"><a href="#cb12-312" aria-hidden="true" tabindex="-1"></a>    <span class="kw">else</span><span class="op">:</span></span>
<span id="cb12-313"><a href="#cb12-313" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">=</span> <span class="va">theta_near</span>[<span class="ss">'coord'</span>] <span class="op">+</span> <span class="va">delta</span> <span class="op">*</span> <span class="va">vec_to_rand</span> <span class="op">/</span> <span class="va">dist_to_rand</span></span>
<span id="cb12-314"><a href="#cb12-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-315"><a href="#cb12-315" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Check</span> <span class="kw">if</span> <span class="va">theta_new</span> <span class="va">is</span> <span class="va">collision</span><span class="op">-</span><span class="va">free</span></span>
<span id="cb12-316"><a href="#cb12-316" aria-hidden="true" tabindex="-1"></a>    <span class="va">collision</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-317"><a href="#cb12-317" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">jdx</span> <span class="va">in</span> <span class="va">range</span>(<span class="va">len</span>(<span class="va">radii</span>))<span class="op">:</span></span>
<span id="cb12-318"><a href="#cb12-318" aria-hidden="true" tabindex="-1"></a>        <span class="va">center</span> <span class="op">=</span> <span class="va">centers</span>[<span class="op">:,</span> <span class="va">jdx</span>]</span>
<span id="cb12-319"><a href="#cb12-319" aria-hidden="true" tabindex="-1"></a>        <span class="va">radius</span> <span class="op">=</span> <span class="va">radii</span>[<span class="va">jdx</span>]</span>
<span id="cb12-320"><a href="#cb12-320" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">center</span>) <span class="op">&lt;</span> <span class="va">radius</span><span class="op">:</span></span>
<span id="cb12-321"><a href="#cb12-321" aria-hidden="true" tabindex="-1"></a>            <span class="va">collision</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-322"><a href="#cb12-322" aria-hidden="true" tabindex="-1"></a>            <span class="kw">break</span></span>
<span id="cb12-323"><a href="#cb12-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-324"><a href="#cb12-324" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">collision</span><span class="op">:</span></span>
<span id="cb12-325"><a href="#cb12-325" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span>
<span id="cb12-326"><a href="#cb12-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-327"><a href="#cb12-327" aria-hidden="true" tabindex="-1"></a>    # <span class="va">If</span> <span class="va">collision</span><span class="op">-</span><span class="va">free</span><span class="op">,</span> <span class="va">add</span> <span class="va">theta_new</span> <span class="va">to</span> <span class="va">tree</span> <span class="va">with</span> <span class="va">parent</span> <span class="va">theta_near</span></span>
<span id="cb12-328"><a href="#cb12-328" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>[<span class="ss">'parent'</span>] <span class="op">=</span> <span class="va">theta_near_index</span></span>
<span id="cb12-329"><a href="#cb12-329" aria-hidden="true" tabindex="-1"></a>    <span class="va">G</span>.<span class="va">append</span>(<span class="va">theta_new</span>)</span>
<span id="cb12-330"><a href="#cb12-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-331"><a href="#cb12-331" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Plot</span> <span class="va">node</span> <span class="va">and</span> <span class="va">edge</span></span>
<span id="cb12-332"><a href="#cb12-332" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">plot</span>(<span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="ss">'o'</span><span class="op">,</span> <span class="va">color</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])</span>
<span id="cb12-333"><a href="#cb12-333" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">plot</span>([<span class="va">theta_near</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]]<span class="op">,</span> [<span class="va">theta_near</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]]<span class="op">,</span> <span class="ss">'k-'</span><span class="op">,</span> <span class="va">linewidth</span><span class="op">=</span><span class="fl">2</span>)</span>
<span id="cb12-334"><a href="#cb12-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-335"><a href="#cb12-335" aria-hidden="true" tabindex="-1"></a>    # <span class="va">If</span> <span class="va">goal</span> <span class="va">is</span> <span class="va">close</span> <span class="va">enough</span> <span class="va">to</span> <span class="va">the</span> <span class="va">last</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span><span class="op">,</span> <span class="va">plot</span> <span class="va">the</span> <span class="va">final</span> <span class="va">path</span></span>
<span id="cb12-336"><a href="#cb12-336" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">G</span>[<span class="op">-</span><span class="fl">1</span>][<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">theta_goal</span>[<span class="ss">'coord'</span>]) <span class="op">&lt;</span> <span class="va">epsilon</span><span class="op">:</span></span>
<span id="cb12-337"><a href="#cb12-337" aria-hidden="true" tabindex="-1"></a>        <span class="va">next_theta</span> <span class="op">=</span> <span class="va">G</span>[<span class="op">-</span><span class="fl">1</span>]</span>
<span id="cb12-338"><a href="#cb12-338" aria-hidden="true" tabindex="-1"></a>        <span class="kw">while</span> <span class="va">next_theta</span>[<span class="ss">'parent'</span>] <span class="va">is</span> <span class="va">not</span> <span class="va">None</span><span class="op">:</span></span>
<span id="cb12-339"><a href="#cb12-339" aria-hidden="true" tabindex="-1"></a>            <span class="va">prev_theta</span> <span class="op">=</span> <span class="va">G</span>[<span class="va">next_theta</span>[<span class="ss">'parent'</span>]]</span>
<span id="cb12-340"><a href="#cb12-340" aria-hidden="true" tabindex="-1"></a>            <span class="va">line</span><span class="op">,</span> <span class="op">=</span> <span class="va">ax</span>.<span class="va">plot</span>([<span class="va">next_theta</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">prev_theta</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]]<span class="op">,</span> [<span class="va">next_theta</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="va">prev_theta</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]]<span class="op">,</span> <span class="ss">'orange'</span><span class="op">,</span> <span class="va">linewidth</span><span class="op">=</span><span class="fl">3</span>)</span>
<span id="cb12-341"><a href="#cb12-341" aria-hidden="true" tabindex="-1"></a>            <span class="va">next_theta</span> <span class="op">=</span> <span class="va">prev_theta</span></span>
<span id="cb12-342"><a href="#cb12-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-343"><a href="#cb12-343" aria-hidden="true" tabindex="-1"></a>        # <span class="va">Add</span> <span class="va">final</span> <span class="va">path</span> <span class="va">to</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-344"><a href="#cb12-344" aria-hidden="true" tabindex="-1"></a>        <span class="va">final_path_plotted</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-345"><a href="#cb12-345" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="va">line</span><span class="op">,</span></span>
<span id="cb12-346"><a href="#cb12-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-347"><a href="#cb12-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-348"><a href="#cb12-348" aria-hidden="true" tabindex="-1"></a># <span class="va">Create</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-349"><a href="#cb12-349" aria-hidden="true" tabindex="-1"></a><span class="va">ani</span> <span class="op">=</span> <span class="va">FuncAnimation</span>(<span class="va">fig</span><span class="op">,</span> <span class="va">update</span><span class="op">,</span> <span class="va">frames</span><span class="op">=</span><span class="va">N</span><span class="op">,</span> <span class="va">repeat</span><span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-350"><a href="#cb12-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-351"><a href="#cb12-351" aria-hidden="true" tabindex="-1"></a># <span class="va">Save</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-352"><a href="#cb12-352" aria-hidden="true" tabindex="-1"></a><span class="va">writer</span> <span class="op">=</span> <span class="va">PillowWriter</span>(<span class="va">fps</span><span class="op">=</span><span class="fl">20</span>)</span>
<span id="cb12-353"><a href="#cb12-353" aria-hidden="true" tabindex="-1"></a><span class="va">ani</span>.<span class="va">save</span>(<span class="st">"RRT_1_obstacles.gif"</span><span class="op">,</span> <span class="va">writer</span><span class="op">=</span><span class="va">writer</span>)</span>
<span id="cb12-354"><a href="#cb12-354" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-355"><a href="#cb12-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-356"><a href="#cb12-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-357"><a href="#cb12-357" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Result</span><span class="op">:**</span></span>
<span id="cb12-358"><a href="#cb12-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-359"><a href="#cb12-359" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">img</span> <span class="va">src</span><span class="op">=</span><span class="st">"RRT_1_obstacles.gif"</span> <span class="va">alt</span><span class="op">=</span><span class="st">"Animated GIF"</span> <span class="va">loop</span> <span class="va">width</span><span class="op">=</span><span class="st">"50%"</span> <span class="va">height</span><span class="op">=</span><span class="st">"50%"</span><span class="op">&gt;</span></span>
<span id="cb12-360"><a href="#cb12-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-361"><a href="#cb12-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-362"><a href="#cb12-362" aria-hidden="true" tabindex="-1"></a><span class="op">*</span> <span class="op">**</span><span class="va">Environment</span> <span class="fl">2</span><span class="op">:</span> <span class="va">One</span> <span class="va">obstacle</span> <span class="va">with</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="va">center</span> <span class="op">\;</span> ùëê_<span class="fl">1</span> <span class="op">=</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.3</span>]<span class="op">^</span>ùëá <span class="op">\;</span> <span class="va">and</span> <span class="op">\;</span> <span class="va">radius</span> <span class="op">\;</span> ùëü_<span class="fl">1</span> <span class="op">=</span> <span class="fl">0.3</span>$. <span class="va">A</span> <span class="va">second</span> <span class="va">obstacle</span> <span class="va">with</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="va">center</span> <span class="op">\;</span> ùëê_<span class="fl">2</span> <span class="op">=</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.7</span>]<span class="op">^</span>ùëá <span class="op">\;</span> <span class="va">and</span> <span class="op">\;</span> <span class="va">radius</span> <span class="op">\;</span> ùëü_<span class="fl">2</span> <span class="op">=</span> <span class="fl">0.2</span>$<span class="op">**</span></span>
<span id="cb12-363"><a href="#cb12-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-364"><a href="#cb12-364" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">RRT</span> <span class="va">Algorithm</span> <span class="kw">for</span> <span class="fl">2</span> <span class="va">Obstacles</span><span class="op">**</span></span>
<span id="cb12-365"><a href="#cb12-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-368"><a href="#cb12-368" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb12-369"><a href="#cb12-369" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">numpy</span> <span class="va">as</span> <span class="va">np</span></span>
<span id="cb12-370"><a href="#cb12-370" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">matplotlib</span></span>
<span id="cb12-371"><a href="#cb12-371" aria-hidden="true" tabindex="-1"></a><span class="va">matplotlib</span>.<span class="va">use</span>(<span class="ss">'Agg'</span>)  # <span class="va">Set</span> <span class="va">the</span> <span class="va">backend</span> <span class="va">to</span> <span class="va">a</span> <span class="va">non</span><span class="op">-</span><span class="va">interactive</span> <span class="va">backend</span></span>
<span id="cb12-372"><a href="#cb12-372" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">matplotlib</span>.<span class="va">pyplot</span> <span class="va">as</span> <span class="va">plt</span></span>
<span id="cb12-373"><a href="#cb12-373" aria-hidden="true" tabindex="-1"></a><span class="va">from</span> <span class="va">matplotlib</span>.<span class="va">patches</span> <span class="va">import</span> <span class="va">Circle</span></span>
<span id="cb12-374"><a href="#cb12-374" aria-hidden="true" tabindex="-1"></a><span class="va">from</span> <span class="va">matplotlib</span>.<span class="va">animation</span> <span class="va">import</span> <span class="va">PillowWriter</span><span class="op">,</span> <span class="va">FuncAnimation</span></span>
<span id="cb12-375"><a href="#cb12-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-376"><a href="#cb12-376" aria-hidden="true" tabindex="-1"></a># <span class="va">Environment</span></span>
<span id="cb12-377"><a href="#cb12-377" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span> <span class="op">=</span> {<span class="ss">'coord'</span><span class="op">:</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span>])}</span>
<span id="cb12-378"><a href="#cb12-378" aria-hidden="true" tabindex="-1"></a><span class="va">theta_goal</span> <span class="op">=</span> {<span class="ss">'coord'</span><span class="op">:</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span>])}</span>
<span id="cb12-379"><a href="#cb12-379" aria-hidden="true" tabindex="-1"></a><span class="va">centers</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">array</span>([[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> [<span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.7</span>]])</span>
<span id="cb12-380"><a href="#cb12-380" aria-hidden="true" tabindex="-1"></a><span class="va">radii</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.2</span>])</span>
<span id="cb12-381"><a href="#cb12-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-382"><a href="#cb12-382" aria-hidden="true" tabindex="-1"></a># <span class="va">Parameters</span></span>
<span id="cb12-383"><a href="#cb12-383" aria-hidden="true" tabindex="-1"></a><span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb12-384"><a href="#cb12-384" aria-hidden="true" tabindex="-1"></a><span class="va">delta</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb12-385"><a href="#cb12-385" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span></span>
<span id="cb12-386"><a href="#cb12-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-387"><a href="#cb12-387" aria-hidden="true" tabindex="-1"></a># <span class="va">Initialize</span> <span class="va">figure</span></span>
<span id="cb12-388"><a href="#cb12-388" aria-hidden="true" tabindex="-1"></a><span class="va">fig</span><span class="op">,</span> <span class="va">ax</span> <span class="op">=</span> <span class="va">plt</span>.<span class="va">subplots</span>()</span>
<span id="cb12-389"><a href="#cb12-389" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">grid</span>(<span class="va">True</span>)</span>
<span id="cb12-390"><a href="#cb12-390" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_xlim</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-391"><a href="#cb12-391" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_ylim</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-392"><a href="#cb12-392" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_aspect</span>(<span class="ss">'equal'</span><span class="op">,</span> <span class="va">adjustable</span><span class="op">=</span><span class="ss">'box'</span>)</span>
<span id="cb12-393"><a href="#cb12-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-394"><a href="#cb12-394" aria-hidden="true" tabindex="-1"></a># <span class="va">Draw</span> <span class="va">obstacles</span></span>
<span id="cb12-395"><a href="#cb12-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-396"><a href="#cb12-396" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="va">in</span> <span class="va">range</span>(<span class="va">len</span>(<span class="va">radii</span>))<span class="op">:</span></span>
<span id="cb12-397"><a href="#cb12-397" aria-hidden="true" tabindex="-1"></a>    <span class="va">circle</span> <span class="op">=</span> <span class="va">Circle</span>(<span class="va">centers</span>[<span class="op">:,</span> <span class="va">idx</span>]<span class="op">,</span> <span class="va">radii</span>[<span class="va">idx</span>]<span class="op">,</span> <span class="va">color</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="va">alpha</span><span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb12-398"><a href="#cb12-398" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">add_patch</span>(<span class="va">circle</span>)</span>
<span id="cb12-399"><a href="#cb12-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-400"><a href="#cb12-400" aria-hidden="true" tabindex="-1"></a># <span class="va">Plot</span> <span class="va">start</span> <span class="va">and</span> <span class="va">goal</span></span>
<span id="cb12-401"><a href="#cb12-401" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">plot</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span><span class="ss">'k'</span>)</span>
<span id="cb12-402"><a href="#cb12-402" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">plot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span><span class="ss">'k'</span>)</span>
<span id="cb12-403"><a href="#cb12-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-404"><a href="#cb12-404" aria-hidden="true" tabindex="-1"></a># <span class="va">Initialize</span> <span class="va">tree</span></span>
<span id="cb12-405"><a href="#cb12-405" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>[<span class="ss">'parent'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb12-406"><a href="#cb12-406" aria-hidden="true" tabindex="-1"></a><span class="va">G</span> <span class="op">=</span> [<span class="va">theta_start</span>]</span>
<span id="cb12-407"><a href="#cb12-407" aria-hidden="true" tabindex="-1"></a><span class="va">final_path_plotted</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-408"><a href="#cb12-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-409"><a href="#cb12-409" aria-hidden="true" tabindex="-1"></a><span class="va">def</span> <span class="va">update</span>(<span class="va">frame</span>)<span class="op">:</span></span>
<span id="cb12-410"><a href="#cb12-410" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> <span class="va">G</span><span class="op">,</span> <span class="va">final_path_plotted</span></span>
<span id="cb12-411"><a href="#cb12-411" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">frame</span> <span class="op">==</span> <span class="fl">0</span> <span class="va">or</span> <span class="va">final_path_plotted</span><span class="op">:</span></span>
<span id="cb12-412"><a href="#cb12-412" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span>
<span id="cb12-413"><a href="#cb12-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-414"><a href="#cb12-414" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Sample</span> <span class="va">random</span> <span class="va">joint</span> <span class="va">position</span></span>
<span id="cb12-415"><a href="#cb12-415" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">random</span>.<span class="va">rand</span>(<span class="fl">2</span>)</span>
<span id="cb12-416"><a href="#cb12-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-417"><a href="#cb12-417" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Find</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span> <span class="va">nearest</span> <span class="va">to</span> <span class="va">theta_rand</span></span>
<span id="cb12-418"><a href="#cb12-418" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist</span> <span class="op">=</span> [<span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">node</span>[<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">theta_rand</span>) <span class="kw">for</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span>]</span>
<span id="cb12-419"><a href="#cb12-419" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near_index</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">argmin</span>(<span class="va">dist</span>)</span>
<span id="cb12-420"><a href="#cb12-420" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near</span> <span class="op">=</span> <span class="va">G</span>[<span class="va">theta_near_index</span>]</span>
<span id="cb12-421"><a href="#cb12-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-422"><a href="#cb12-422" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Take</span> <span class="va">a</span> <span class="va">step</span> <span class="va">from</span> <span class="va">theta_near</span> <span class="va">towards</span> <span class="va">theta_rand</span></span>
<span id="cb12-423"><a href="#cb12-423" aria-hidden="true" tabindex="-1"></a>    <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">theta_rand</span> <span class="op">-</span> <span class="va">theta_near</span>[<span class="ss">'coord'</span>]</span>
<span id="cb12-424"><a href="#cb12-424" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist_to_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">vec_to_rand</span>)</span>
<span id="cb12-425"><a href="#cb12-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-426"><a href="#cb12-426" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span> <span class="op">=</span> {}</span>
<span id="cb12-427"><a href="#cb12-427" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">dist_to_rand</span> <span class="op">&lt;</span> <span class="va">delta</span><span class="op">:</span></span>
<span id="cb12-428"><a href="#cb12-428" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">=</span> <span class="va">theta_rand</span></span>
<span id="cb12-429"><a href="#cb12-429" aria-hidden="true" tabindex="-1"></a>    <span class="kw">else</span><span class="op">:</span></span>
<span id="cb12-430"><a href="#cb12-430" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">=</span> <span class="va">theta_near</span>[<span class="ss">'coord'</span>] <span class="op">+</span> <span class="va">delta</span> <span class="op">*</span> <span class="va">vec_to_rand</span> <span class="op">/</span> <span class="va">dist_to_rand</span></span>
<span id="cb12-431"><a href="#cb12-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-432"><a href="#cb12-432" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Check</span> <span class="kw">if</span> <span class="va">theta_new</span> <span class="va">is</span> <span class="va">collision</span><span class="op">-</span><span class="va">free</span></span>
<span id="cb12-433"><a href="#cb12-433" aria-hidden="true" tabindex="-1"></a>    <span class="va">collision</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-434"><a href="#cb12-434" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">jdx</span> <span class="va">in</span> <span class="va">range</span>(<span class="va">len</span>(<span class="va">radii</span>))<span class="op">:</span></span>
<span id="cb12-435"><a href="#cb12-435" aria-hidden="true" tabindex="-1"></a>        <span class="va">center</span> <span class="op">=</span> <span class="va">centers</span>[<span class="op">:,</span> <span class="va">jdx</span>]</span>
<span id="cb12-436"><a href="#cb12-436" aria-hidden="true" tabindex="-1"></a>        <span class="va">radius</span> <span class="op">=</span> <span class="va">radii</span>[<span class="va">jdx</span>]</span>
<span id="cb12-437"><a href="#cb12-437" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">center</span>) <span class="op">&lt;</span> <span class="va">radius</span><span class="op">:</span></span>
<span id="cb12-438"><a href="#cb12-438" aria-hidden="true" tabindex="-1"></a>            <span class="va">collision</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-439"><a href="#cb12-439" aria-hidden="true" tabindex="-1"></a>            <span class="kw">break</span></span>
<span id="cb12-440"><a href="#cb12-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-441"><a href="#cb12-441" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">collision</span><span class="op">:</span></span>
<span id="cb12-442"><a href="#cb12-442" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span>
<span id="cb12-443"><a href="#cb12-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-444"><a href="#cb12-444" aria-hidden="true" tabindex="-1"></a>    # <span class="va">If</span> <span class="va">collision</span><span class="op">-</span><span class="va">free</span><span class="op">,</span> <span class="va">add</span> <span class="va">theta_new</span> <span class="va">to</span> <span class="va">tree</span> <span class="va">with</span> <span class="va">parent</span> <span class="va">theta_near</span></span>
<span id="cb12-445"><a href="#cb12-445" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>[<span class="ss">'parent'</span>] <span class="op">=</span> <span class="va">theta_near_index</span></span>
<span id="cb12-446"><a href="#cb12-446" aria-hidden="true" tabindex="-1"></a>    <span class="va">G</span>.<span class="va">append</span>(<span class="va">theta_new</span>)</span>
<span id="cb12-447"><a href="#cb12-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-448"><a href="#cb12-448" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Plot</span> <span class="va">node</span> <span class="va">and</span> <span class="va">edge</span></span>
<span id="cb12-449"><a href="#cb12-449" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">plot</span>(<span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="ss">'o'</span><span class="op">,</span> <span class="va">color</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])</span>
<span id="cb12-450"><a href="#cb12-450" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">plot</span>([<span class="va">theta_near</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]]<span class="op">,</span> [<span class="va">theta_near</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]]<span class="op">,</span> <span class="ss">'k-'</span><span class="op">,</span> <span class="va">linewidth</span><span class="op">=</span><span class="fl">2</span>)</span>
<span id="cb12-451"><a href="#cb12-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-452"><a href="#cb12-452" aria-hidden="true" tabindex="-1"></a>    # <span class="va">If</span> <span class="va">goal</span> <span class="va">is</span> <span class="va">close</span> <span class="va">enough</span> <span class="va">to</span> <span class="va">the</span> <span class="va">last</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span><span class="op">,</span> <span class="va">plot</span> <span class="va">the</span> <span class="va">final</span> <span class="va">path</span></span>
<span id="cb12-453"><a href="#cb12-453" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">G</span>[<span class="op">-</span><span class="fl">1</span>][<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">theta_goal</span>[<span class="ss">'coord'</span>]) <span class="op">&lt;</span> <span class="va">epsilon</span><span class="op">:</span></span>
<span id="cb12-454"><a href="#cb12-454" aria-hidden="true" tabindex="-1"></a>        <span class="va">next_theta</span> <span class="op">=</span> <span class="va">G</span>[<span class="op">-</span><span class="fl">1</span>]</span>
<span id="cb12-455"><a href="#cb12-455" aria-hidden="true" tabindex="-1"></a>        <span class="kw">while</span> <span class="va">next_theta</span>[<span class="ss">'parent'</span>] <span class="va">is</span> <span class="va">not</span> <span class="va">None</span><span class="op">:</span></span>
<span id="cb12-456"><a href="#cb12-456" aria-hidden="true" tabindex="-1"></a>            <span class="va">prev_theta</span> <span class="op">=</span> <span class="va">G</span>[<span class="va">next_theta</span>[<span class="ss">'parent'</span>]]</span>
<span id="cb12-457"><a href="#cb12-457" aria-hidden="true" tabindex="-1"></a>            <span class="va">line</span><span class="op">,</span> <span class="op">=</span> <span class="va">ax</span>.<span class="va">plot</span>([<span class="va">next_theta</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">prev_theta</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]]<span class="op">,</span> [<span class="va">next_theta</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="va">prev_theta</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]]<span class="op">,</span> <span class="ss">'orange'</span><span class="op">,</span> <span class="va">linewidth</span><span class="op">=</span><span class="fl">3</span>)</span>
<span id="cb12-458"><a href="#cb12-458" aria-hidden="true" tabindex="-1"></a>            <span class="va">next_theta</span> <span class="op">=</span> <span class="va">prev_theta</span></span>
<span id="cb12-459"><a href="#cb12-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-460"><a href="#cb12-460" aria-hidden="true" tabindex="-1"></a>        # <span class="va">Add</span> <span class="va">final</span> <span class="va">path</span> <span class="va">to</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-461"><a href="#cb12-461" aria-hidden="true" tabindex="-1"></a>        <span class="va">final_path_plotted</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-462"><a href="#cb12-462" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="va">line</span><span class="op">,</span></span>
<span id="cb12-463"><a href="#cb12-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-464"><a href="#cb12-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-465"><a href="#cb12-465" aria-hidden="true" tabindex="-1"></a># <span class="va">Create</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-466"><a href="#cb12-466" aria-hidden="true" tabindex="-1"></a><span class="va">ani</span> <span class="op">=</span> <span class="va">FuncAnimation</span>(<span class="va">fig</span><span class="op">,</span> <span class="va">update</span><span class="op">,</span> <span class="va">frames</span><span class="op">=</span><span class="va">N</span><span class="op">,</span> <span class="va">repeat</span><span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-467"><a href="#cb12-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-468"><a href="#cb12-468" aria-hidden="true" tabindex="-1"></a># <span class="va">Save</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-469"><a href="#cb12-469" aria-hidden="true" tabindex="-1"></a><span class="va">writer</span> <span class="op">=</span> <span class="va">PillowWriter</span>(<span class="va">fps</span><span class="op">=</span><span class="fl">20</span>)</span>
<span id="cb12-470"><a href="#cb12-470" aria-hidden="true" tabindex="-1"></a><span class="va">ani</span>.<span class="va">save</span>(<span class="st">"RRT_2_obstacles.gif"</span><span class="op">,</span> <span class="va">writer</span><span class="op">=</span><span class="va">writer</span>)</span>
<span id="cb12-471"><a href="#cb12-471" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-472"><a href="#cb12-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-473"><a href="#cb12-473" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Result</span><span class="op">:**</span></span>
<span id="cb12-474"><a href="#cb12-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-475"><a href="#cb12-475" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">img</span> <span class="va">src</span><span class="op">=</span><span class="st">"RRT_2_obstacles.gif"</span> <span class="va">alt</span><span class="op">=</span><span class="st">"Animated GIF"</span> <span class="va">loop</span> <span class="va">width</span><span class="op">=</span><span class="st">"50%"</span> <span class="va">height</span><span class="op">=</span><span class="st">"50%"</span><span class="op">&gt;</span></span>
<span id="cb12-476"><a href="#cb12-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-477"><a href="#cb12-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-478"><a href="#cb12-478" aria-hidden="true" tabindex="-1"></a><span class="op">*</span> <span class="op">**</span><span class="va">Environment</span> <span class="fl">3</span><span class="op">:</span> <span class="va">One</span> <span class="va">obstacle</span> <span class="va">with</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="va">center</span> <span class="op">\;</span> ùëê_<span class="fl">1</span> <span class="op">=</span> [<span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.35</span>]<span class="op">^</span>ùëá <span class="op">\;</span> <span class="va">and</span> <span class="op">\;</span> <span class="va">radius</span> <span class="op">\;</span> ùëü_<span class="fl">1</span> <span class="op">=</span> <span class="fl">0.2</span>$. <span class="va">A</span> <span class="va">second</span> <span class="va">obstacle</span> <span class="va">with</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="va">center</span> <span class="op">\;</span> ùëê_<span class="fl">2</span> <span class="op">=</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.3</span>]<span class="op">^</span>ùëá <span class="op">\;</span> <span class="va">and</span> <span class="op">\;</span> <span class="va">radius</span> <span class="op">\;</span> ùëü_<span class="fl">2</span> <span class="op">=</span> <span class="fl">0.2</span>$. <span class="va">A</span> <span class="va">third</span> <span class="va">obstacle</span> <span class="va">with</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="va">center</span> <span class="op">\;</span> ùëê_<span class="fl">3</span> <span class="op">=</span> [<span class="fl">0.7</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">^</span>ùëá <span class="op">\;</span> <span class="va">and</span> <span class="op">\;</span> <span class="va">radius</span> <span class="op">\;</span> ùëü_<span class="fl">3</span> <span class="op">=</span> <span class="fl">0.2</span>$<span class="op">**</span></span>
<span id="cb12-479"><a href="#cb12-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-480"><a href="#cb12-480" aria-hidden="true" tabindex="-1"></a><span class="va">Here</span> <span class="va">we</span> <span class="va">are</span> <span class="va">declaring</span> <span class="va">it</span> <span class="va">a</span> <span class="va">Baseline</span> <span class="va">Algorithm</span> <span class="kw">for</span> <span class="fl">3</span> <span class="va">obstacles</span>. <span class="va">Later</span> <span class="va">below</span> <span class="va">we</span> <span class="va">will</span> <span class="va">discuss</span> <span class="va">the</span> <span class="va">differences</span> <span class="va">between</span> <span class="va">a</span> <span class="va">baseline</span> <span class="va">and</span> <span class="va">Goal</span><span class="op">-</span><span class="va">bias</span> <span class="va">algorithm</span> <span class="va">and</span> <span class="va">their</span> <span class="va">pros</span><span class="op">-</span><span class="va">cons</span>.</span>
<span id="cb12-481"><a href="#cb12-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-482"><a href="#cb12-482" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Baseline</span> <span class="va">RRT</span> <span class="va">Algorithm</span><span class="op">**</span></span>
<span id="cb12-483"><a href="#cb12-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-486"><a href="#cb12-486" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb12-487"><a href="#cb12-487" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">numpy</span> <span class="va">as</span> <span class="va">np</span></span>
<span id="cb12-488"><a href="#cb12-488" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">matplotlib</span></span>
<span id="cb12-489"><a href="#cb12-489" aria-hidden="true" tabindex="-1"></a><span class="va">matplotlib</span>.<span class="va">use</span>(<span class="ss">'Agg'</span>)  # <span class="va">Set</span> <span class="va">the</span> <span class="va">backend</span> <span class="va">to</span> <span class="va">a</span> <span class="va">non</span><span class="op">-</span><span class="va">interactive</span> <span class="va">backend</span></span>
<span id="cb12-490"><a href="#cb12-490" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">matplotlib</span>.<span class="va">pyplot</span> <span class="va">as</span> <span class="va">plt</span></span>
<span id="cb12-491"><a href="#cb12-491" aria-hidden="true" tabindex="-1"></a><span class="va">from</span> <span class="va">matplotlib</span>.<span class="va">patches</span> <span class="va">import</span> <span class="va">Circle</span></span>
<span id="cb12-492"><a href="#cb12-492" aria-hidden="true" tabindex="-1"></a><span class="va">from</span> <span class="va">matplotlib</span>.<span class="va">animation</span> <span class="va">import</span> <span class="va">PillowWriter</span><span class="op">,</span> <span class="va">FuncAnimation</span></span>
<span id="cb12-493"><a href="#cb12-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-494"><a href="#cb12-494" aria-hidden="true" tabindex="-1"></a># <span class="va">Environment</span></span>
<span id="cb12-495"><a href="#cb12-495" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span> <span class="op">=</span> {<span class="ss">'coord'</span><span class="op">:</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span>])}</span>
<span id="cb12-496"><a href="#cb12-496" aria-hidden="true" tabindex="-1"></a><span class="va">theta_goal</span> <span class="op">=</span> {<span class="ss">'coord'</span><span class="op">:</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span>])}</span>
<span id="cb12-497"><a href="#cb12-497" aria-hidden="true" tabindex="-1"></a><span class="va">centers</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">array</span>([[<span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.7</span>]<span class="op">,</span> [<span class="fl">0.35</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.5</span>]])</span>
<span id="cb12-498"><a href="#cb12-498" aria-hidden="true" tabindex="-1"></a><span class="va">radii</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.2</span>])</span>
<span id="cb12-499"><a href="#cb12-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-500"><a href="#cb12-500" aria-hidden="true" tabindex="-1"></a># <span class="va">Parameters</span></span>
<span id="cb12-501"><a href="#cb12-501" aria-hidden="true" tabindex="-1"></a><span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb12-502"><a href="#cb12-502" aria-hidden="true" tabindex="-1"></a><span class="va">delta</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb12-503"><a href="#cb12-503" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span></span>
<span id="cb12-504"><a href="#cb12-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-505"><a href="#cb12-505" aria-hidden="true" tabindex="-1"></a># <span class="va">Initialize</span> <span class="va">figure</span></span>
<span id="cb12-506"><a href="#cb12-506" aria-hidden="true" tabindex="-1"></a><span class="va">fig</span><span class="op">,</span> <span class="va">ax</span> <span class="op">=</span> <span class="va">plt</span>.<span class="va">subplots</span>()</span>
<span id="cb12-507"><a href="#cb12-507" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">grid</span>(<span class="va">True</span>)</span>
<span id="cb12-508"><a href="#cb12-508" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_xlim</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-509"><a href="#cb12-509" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_ylim</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-510"><a href="#cb12-510" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_aspect</span>(<span class="ss">'equal'</span><span class="op">,</span> <span class="va">adjustable</span><span class="op">=</span><span class="ss">'box'</span>)</span>
<span id="cb12-511"><a href="#cb12-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-512"><a href="#cb12-512" aria-hidden="true" tabindex="-1"></a># <span class="va">Draw</span> <span class="va">obstacles</span></span>
<span id="cb12-513"><a href="#cb12-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-514"><a href="#cb12-514" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="va">in</span> <span class="va">range</span>(<span class="va">len</span>(<span class="va">radii</span>))<span class="op">:</span></span>
<span id="cb12-515"><a href="#cb12-515" aria-hidden="true" tabindex="-1"></a>    <span class="va">circle</span> <span class="op">=</span> <span class="va">Circle</span>(<span class="va">centers</span>[<span class="op">:,</span> <span class="va">idx</span>]<span class="op">,</span> <span class="va">radii</span>[<span class="va">idx</span>]<span class="op">,</span> <span class="va">color</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="va">alpha</span><span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb12-516"><a href="#cb12-516" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">add_patch</span>(<span class="va">circle</span>)</span>
<span id="cb12-517"><a href="#cb12-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-518"><a href="#cb12-518" aria-hidden="true" tabindex="-1"></a># <span class="va">Plot</span> <span class="va">start</span> <span class="va">and</span> <span class="va">goal</span></span>
<span id="cb12-519"><a href="#cb12-519" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">plot</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span><span class="ss">'k'</span>)</span>
<span id="cb12-520"><a href="#cb12-520" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">plot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span><span class="ss">'k'</span>)</span>
<span id="cb12-521"><a href="#cb12-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-522"><a href="#cb12-522" aria-hidden="true" tabindex="-1"></a># <span class="va">Initialize</span> <span class="va">tree</span></span>
<span id="cb12-523"><a href="#cb12-523" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>[<span class="ss">'parent'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb12-524"><a href="#cb12-524" aria-hidden="true" tabindex="-1"></a><span class="va">G</span> <span class="op">=</span> [<span class="va">theta_start</span>]</span>
<span id="cb12-525"><a href="#cb12-525" aria-hidden="true" tabindex="-1"></a><span class="va">final_path_plotted</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-526"><a href="#cb12-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-527"><a href="#cb12-527" aria-hidden="true" tabindex="-1"></a><span class="va">def</span> <span class="va">update</span>(<span class="va">frame</span>)<span class="op">:</span></span>
<span id="cb12-528"><a href="#cb12-528" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> <span class="va">G</span><span class="op">,</span> <span class="va">final_path_plotted</span></span>
<span id="cb12-529"><a href="#cb12-529" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">frame</span> <span class="op">==</span> <span class="fl">0</span> <span class="va">or</span> <span class="va">final_path_plotted</span><span class="op">:</span></span>
<span id="cb12-530"><a href="#cb12-530" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span>
<span id="cb12-531"><a href="#cb12-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-532"><a href="#cb12-532" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Sample</span> <span class="va">random</span> <span class="va">joint</span> <span class="va">position</span></span>
<span id="cb12-533"><a href="#cb12-533" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">random</span>.<span class="va">rand</span>(<span class="fl">2</span>)</span>
<span id="cb12-534"><a href="#cb12-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-535"><a href="#cb12-535" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Find</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span> <span class="va">nearest</span> <span class="va">to</span> <span class="va">theta_rand</span></span>
<span id="cb12-536"><a href="#cb12-536" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist</span> <span class="op">=</span> [<span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">node</span>[<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">theta_rand</span>) <span class="kw">for</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span>]</span>
<span id="cb12-537"><a href="#cb12-537" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near_index</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">argmin</span>(<span class="va">dist</span>)</span>
<span id="cb12-538"><a href="#cb12-538" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near</span> <span class="op">=</span> <span class="va">G</span>[<span class="va">theta_near_index</span>]</span>
<span id="cb12-539"><a href="#cb12-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-540"><a href="#cb12-540" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Take</span> <span class="va">a</span> <span class="va">step</span> <span class="va">from</span> <span class="va">theta_near</span> <span class="va">towards</span> <span class="va">theta_rand</span></span>
<span id="cb12-541"><a href="#cb12-541" aria-hidden="true" tabindex="-1"></a>    <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">theta_rand</span> <span class="op">-</span> <span class="va">theta_near</span>[<span class="ss">'coord'</span>]</span>
<span id="cb12-542"><a href="#cb12-542" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist_to_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">vec_to_rand</span>)</span>
<span id="cb12-543"><a href="#cb12-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-544"><a href="#cb12-544" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span> <span class="op">=</span> {}</span>
<span id="cb12-545"><a href="#cb12-545" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">dist_to_rand</span> <span class="op">&lt;</span> <span class="va">delta</span><span class="op">:</span></span>
<span id="cb12-546"><a href="#cb12-546" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">=</span> <span class="va">theta_rand</span></span>
<span id="cb12-547"><a href="#cb12-547" aria-hidden="true" tabindex="-1"></a>    <span class="kw">else</span><span class="op">:</span></span>
<span id="cb12-548"><a href="#cb12-548" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">=</span> <span class="va">theta_near</span>[<span class="ss">'coord'</span>] <span class="op">+</span> <span class="va">delta</span> <span class="op">*</span> <span class="va">vec_to_rand</span> <span class="op">/</span> <span class="va">dist_to_rand</span></span>
<span id="cb12-549"><a href="#cb12-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-550"><a href="#cb12-550" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Check</span> <span class="kw">if</span> <span class="va">theta_new</span> <span class="va">is</span> <span class="va">collision</span><span class="op">-</span><span class="va">free</span></span>
<span id="cb12-551"><a href="#cb12-551" aria-hidden="true" tabindex="-1"></a>    <span class="va">collision</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-552"><a href="#cb12-552" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">jdx</span> <span class="va">in</span> <span class="va">range</span>(<span class="va">len</span>(<span class="va">radii</span>))<span class="op">:</span></span>
<span id="cb12-553"><a href="#cb12-553" aria-hidden="true" tabindex="-1"></a>        <span class="va">center</span> <span class="op">=</span> <span class="va">centers</span>[<span class="op">:,</span> <span class="va">jdx</span>]</span>
<span id="cb12-554"><a href="#cb12-554" aria-hidden="true" tabindex="-1"></a>        <span class="va">radius</span> <span class="op">=</span> <span class="va">radii</span>[<span class="va">jdx</span>]</span>
<span id="cb12-555"><a href="#cb12-555" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">center</span>) <span class="op">&lt;</span> <span class="va">radius</span><span class="op">:</span></span>
<span id="cb12-556"><a href="#cb12-556" aria-hidden="true" tabindex="-1"></a>            <span class="va">collision</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-557"><a href="#cb12-557" aria-hidden="true" tabindex="-1"></a>            <span class="kw">break</span></span>
<span id="cb12-558"><a href="#cb12-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-559"><a href="#cb12-559" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">collision</span><span class="op">:</span></span>
<span id="cb12-560"><a href="#cb12-560" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span>
<span id="cb12-561"><a href="#cb12-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-562"><a href="#cb12-562" aria-hidden="true" tabindex="-1"></a>    # <span class="va">If</span> <span class="va">collision</span><span class="op">-</span><span class="va">free</span><span class="op">,</span> <span class="va">add</span> <span class="va">theta_new</span> <span class="va">to</span> <span class="va">tree</span> <span class="va">with</span> <span class="va">parent</span> <span class="va">theta_near</span></span>
<span id="cb12-563"><a href="#cb12-563" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>[<span class="ss">'parent'</span>] <span class="op">=</span> <span class="va">theta_near_index</span></span>
<span id="cb12-564"><a href="#cb12-564" aria-hidden="true" tabindex="-1"></a>    <span class="va">G</span>.<span class="va">append</span>(<span class="va">theta_new</span>)</span>
<span id="cb12-565"><a href="#cb12-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-566"><a href="#cb12-566" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Plot</span> <span class="va">node</span> <span class="va">and</span> <span class="va">edge</span></span>
<span id="cb12-567"><a href="#cb12-567" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">plot</span>(<span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="ss">'o'</span><span class="op">,</span> <span class="va">color</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])</span>
<span id="cb12-568"><a href="#cb12-568" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">plot</span>([<span class="va">theta_near</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]]<span class="op">,</span> [<span class="va">theta_near</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]]<span class="op">,</span> <span class="ss">'k-'</span><span class="op">,</span> <span class="va">linewidth</span><span class="op">=</span><span class="fl">2</span>)</span>
<span id="cb12-569"><a href="#cb12-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-570"><a href="#cb12-570" aria-hidden="true" tabindex="-1"></a>    # <span class="va">If</span> <span class="va">goal</span> <span class="va">is</span> <span class="va">close</span> <span class="va">enough</span> <span class="va">to</span> <span class="va">the</span> <span class="va">last</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span><span class="op">,</span> <span class="va">plot</span> <span class="va">the</span> <span class="va">final</span> <span class="va">path</span></span>
<span id="cb12-571"><a href="#cb12-571" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">G</span>[<span class="op">-</span><span class="fl">1</span>][<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">theta_goal</span>[<span class="ss">'coord'</span>]) <span class="op">&lt;</span> <span class="va">epsilon</span><span class="op">:</span></span>
<span id="cb12-572"><a href="#cb12-572" aria-hidden="true" tabindex="-1"></a>        <span class="va">next_theta</span> <span class="op">=</span> <span class="va">G</span>[<span class="op">-</span><span class="fl">1</span>]</span>
<span id="cb12-573"><a href="#cb12-573" aria-hidden="true" tabindex="-1"></a>        <span class="kw">while</span> <span class="va">next_theta</span>[<span class="ss">'parent'</span>] <span class="va">is</span> <span class="va">not</span> <span class="va">None</span><span class="op">:</span></span>
<span id="cb12-574"><a href="#cb12-574" aria-hidden="true" tabindex="-1"></a>            <span class="va">prev_theta</span> <span class="op">=</span> <span class="va">G</span>[<span class="va">next_theta</span>[<span class="ss">'parent'</span>]]</span>
<span id="cb12-575"><a href="#cb12-575" aria-hidden="true" tabindex="-1"></a>            <span class="va">line</span><span class="op">,</span> <span class="op">=</span> <span class="va">ax</span>.<span class="va">plot</span>([<span class="va">next_theta</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">prev_theta</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]]<span class="op">,</span> [<span class="va">next_theta</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="va">prev_theta</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]]<span class="op">,</span> <span class="ss">'orange'</span><span class="op">,</span> <span class="va">linewidth</span><span class="op">=</span><span class="fl">3</span>)</span>
<span id="cb12-576"><a href="#cb12-576" aria-hidden="true" tabindex="-1"></a>            <span class="va">next_theta</span> <span class="op">=</span> <span class="va">prev_theta</span></span>
<span id="cb12-577"><a href="#cb12-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-578"><a href="#cb12-578" aria-hidden="true" tabindex="-1"></a>        # <span class="va">Add</span> <span class="va">final</span> <span class="va">path</span> <span class="va">to</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-579"><a href="#cb12-579" aria-hidden="true" tabindex="-1"></a>        <span class="va">final_path_plotted</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-580"><a href="#cb12-580" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="va">line</span><span class="op">,</span></span>
<span id="cb12-581"><a href="#cb12-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-582"><a href="#cb12-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-583"><a href="#cb12-583" aria-hidden="true" tabindex="-1"></a># <span class="va">Create</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-584"><a href="#cb12-584" aria-hidden="true" tabindex="-1"></a><span class="va">ani</span> <span class="op">=</span> <span class="va">FuncAnimation</span>(<span class="va">fig</span><span class="op">,</span> <span class="va">update</span><span class="op">,</span> <span class="va">frames</span><span class="op">=</span><span class="va">N</span><span class="op">,</span> <span class="va">repeat</span><span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-585"><a href="#cb12-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-586"><a href="#cb12-586" aria-hidden="true" tabindex="-1"></a># <span class="va">Save</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-587"><a href="#cb12-587" aria-hidden="true" tabindex="-1"></a><span class="va">writer</span> <span class="op">=</span> <span class="va">PillowWriter</span>(<span class="va">fps</span><span class="op">=</span><span class="fl">20</span>)</span>
<span id="cb12-588"><a href="#cb12-588" aria-hidden="true" tabindex="-1"></a><span class="va">ani</span>.<span class="va">save</span>(<span class="st">"Baseline_RRT.gif"</span><span class="op">,</span> <span class="va">writer</span><span class="op">=</span><span class="va">writer</span>)</span>
<span id="cb12-589"><a href="#cb12-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-590"><a href="#cb12-590" aria-hidden="true" tabindex="-1"></a><span class="va">plt</span>.<span class="va">show</span>()</span>
<span id="cb12-591"><a href="#cb12-591" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-592"><a href="#cb12-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-593"><a href="#cb12-593" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">MATLAB</span> <span class="va">Implementation</span><span class="op">**</span></span>
<span id="cb12-594"><a href="#cb12-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-595"><a href="#cb12-595" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">details</span><span class="op">&gt;</span></span>
<span id="cb12-596"><a href="#cb12-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-599"><a href="#cb12-599" aria-hidden="true" tabindex="-1"></a><span class="in">```{matlab}</span></span>
<span id="cb12-600"><a href="#cb12-600" aria-hidden="true" tabindex="-1"></a><span class="va">clear</span></span>
<span id="cb12-601"><a href="#cb12-601" aria-hidden="true" tabindex="-1"></a><span class="va">close</span> <span class="va">all</span></span>
<span id="cb12-602"><a href="#cb12-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-603"><a href="#cb12-603" aria-hidden="true" tabindex="-1"></a><span class="co">% environment</span></span>
<span id="cb12-604"><a href="#cb12-604" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>.<span class="va">coord</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">;</span> <span class="fl">0</span>]<span class="op">;</span></span>
<span id="cb12-605"><a href="#cb12-605" aria-hidden="true" tabindex="-1"></a><span class="va">theta_goal</span>.<span class="va">coord</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">;</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb12-606"><a href="#cb12-606" aria-hidden="true" tabindex="-1"></a><span class="va">centers</span> <span class="op">=</span> [<span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.7</span><span class="op">;</span> <span class="fl">0.35</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">;</span></span>
<span id="cb12-607"><a href="#cb12-607" aria-hidden="true" tabindex="-1"></a><span class="va">radii</span> <span class="op">=</span> [<span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.2</span>]<span class="op">;</span></span>
<span id="cb12-608"><a href="#cb12-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-609"><a href="#cb12-609" aria-hidden="true" tabindex="-1"></a><span class="co">% parameters</span></span>
<span id="cb12-610"><a href="#cb12-610" aria-hidden="true" tabindex="-1"></a><span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb12-611"><a href="#cb12-611" aria-hidden="true" tabindex="-1"></a><span class="va">delta</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb12-612"><a href="#cb12-612" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span><span class="op">;</span></span>
<span id="cb12-613"><a href="#cb12-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-614"><a href="#cb12-614" aria-hidden="true" tabindex="-1"></a><span class="co">% visualize environment</span></span>
<span id="cb12-615"><a href="#cb12-615" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb12-616"><a href="#cb12-616" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span></span>
<span id="cb12-617"><a href="#cb12-617" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">on</span></span>
<span id="cb12-618"><a href="#cb12-618" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>])</span>
<span id="cb12-619"><a href="#cb12-619" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span> <span class="va">equal</span></span>
<span id="cb12-620"><a href="#cb12-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-621"><a href="#cb12-621" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">radii</span>)</span>
<span id="cb12-622"><a href="#cb12-622" aria-hidden="true" tabindex="-1"></a> <span class="va">viscircles</span>(<span class="va">centers</span>(<span class="op">:,</span> <span class="va">idx</span>)<span class="op">',</span> <span class="va">radii</span>(<span class="va">idx</span>)<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-623"><a href="#cb12-623" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.5</span>])<span class="op">;</span></span>
<span id="cb12-624"><a href="#cb12-624" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-625"><a href="#cb12-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-626"><a href="#cb12-626" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> <span class="ss">'k'</span>)</span>
<span id="cb12-627"><a href="#cb12-627" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> <span class="ss">'k'</span>)</span>
<span id="cb12-628"><a href="#cb12-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-629"><a href="#cb12-629" aria-hidden="true" tabindex="-1"></a><span class="co">% initialize tree</span></span>
<span id="cb12-630"><a href="#cb12-630" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>.<span class="va">parent</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb12-631"><a href="#cb12-631" aria-hidden="true" tabindex="-1"></a><span class="va">G</span>(<span class="fl">1</span>) <span class="op">=</span> <span class="va">theta_start</span><span class="op">;</span></span>
<span id="cb12-632"><a href="#cb12-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-633"><a href="#cb12-633" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">N</span></span>
<span id="cb12-634"><a href="#cb12-634" aria-hidden="true" tabindex="-1"></a> <span class="co">% stop if theta_new is close to theta_goal</span></span>
<span id="cb12-635"><a href="#cb12-635" aria-hidden="true" tabindex="-1"></a> <span class="kw">if</span> <span class="va">norm</span>(<span class="va">G</span>(<span class="kw">end</span>).<span class="va">coord</span> <span class="op">-</span> <span class="va">theta_goal</span>.<span class="va">coord</span>) <span class="op">&lt;</span> <span class="va">epsilon</span></span>
<span id="cb12-636"><a href="#cb12-636" aria-hidden="true" tabindex="-1"></a> <span class="kw">break</span></span>
<span id="cb12-637"><a href="#cb12-637" aria-hidden="true" tabindex="-1"></a> <span class="kw">end</span></span>
<span id="cb12-638"><a href="#cb12-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-639"><a href="#cb12-639" aria-hidden="true" tabindex="-1"></a> <span class="co">% sample random joint position</span></span>
<span id="cb12-640"><a href="#cb12-640" aria-hidden="true" tabindex="-1"></a> <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">2</span><span class="op">,</span><span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb12-641"><a href="#cb12-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-642"><a href="#cb12-642" aria-hidden="true" tabindex="-1"></a> <span class="co">% find node in G nearest to theta_rand</span></span>
<span id="cb12-643"><a href="#cb12-643" aria-hidden="true" tabindex="-1"></a> <span class="va">dist</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="va">length</span>(<span class="va">G</span>)<span class="op">,</span> <span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb12-644"><a href="#cb12-644" aria-hidden="true" tabindex="-1"></a> <span class="kw">for</span> <span class="va">jdx</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">G</span>)</span>
<span id="cb12-645"><a href="#cb12-645" aria-hidden="true" tabindex="-1"></a> <span class="va">dist</span>(<span class="va">jdx</span>) <span class="op">=</span> <span class="va">norm</span>(<span class="va">G</span>(<span class="va">jdx</span>).<span class="va">coord</span> <span class="op">-</span> <span class="va">theta_rand</span>)<span class="op">;</span></span>
<span id="cb12-646"><a href="#cb12-646" aria-hidden="true" tabindex="-1"></a> <span class="kw">end</span></span>
<span id="cb12-647"><a href="#cb12-647" aria-hidden="true" tabindex="-1"></a> [<span class="op">~,</span> <span class="va">theta_near_index</span>] <span class="op">=</span> <span class="va">min</span>(<span class="va">dist</span>)<span class="op">;</span></span>
<span id="cb12-648"><a href="#cb12-648" aria-hidden="true" tabindex="-1"></a> <span class="va">theta_near</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">theta_near_index</span>)<span class="op">;</span></span>
<span id="cb12-649"><a href="#cb12-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-650"><a href="#cb12-650" aria-hidden="true" tabindex="-1"></a> <span class="co">% take a step from theta_near towards theta_rand</span></span>
<span id="cb12-651"><a href="#cb12-651" aria-hidden="true" tabindex="-1"></a> <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">theta_rand</span> <span class="op">-</span> <span class="va">theta_near</span>.<span class="va">coord</span><span class="op">;</span></span>
<span id="cb12-652"><a href="#cb12-652" aria-hidden="true" tabindex="-1"></a> <span class="va">dist_to_rand</span> <span class="op">=</span> <span class="va">norm</span>(<span class="va">vec_to_rand</span>)<span class="op">;</span></span>
<span id="cb12-653"><a href="#cb12-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-654"><a href="#cb12-654" aria-hidden="true" tabindex="-1"></a> <span class="kw">if</span> <span class="va">dist_to_rand</span> <span class="op">&lt;</span> <span class="va">delta</span></span>
<span id="cb12-655"><a href="#cb12-655" aria-hidden="true" tabindex="-1"></a> <span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">=</span> <span class="va">theta_rand</span><span class="op">;</span></span>
<span id="cb12-656"><a href="#cb12-656" aria-hidden="true" tabindex="-1"></a> <span class="kw">else</span></span>
<span id="cb12-657"><a href="#cb12-657" aria-hidden="true" tabindex="-1"></a> <span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">=</span> <span class="va">theta_near</span>.<span class="va">coord</span> <span class="op">+</span> <span class="va">delta</span> <span class="op">*</span> <span class="op">...</span></span>
<span id="cb12-658"><a href="#cb12-658" aria-hidden="true" tabindex="-1"></a> <span class="va">vec_to_rand</span><span class="op">/</span><span class="va">dist_to_rand</span><span class="op">;</span></span>
<span id="cb12-659"><a href="#cb12-659" aria-hidden="true" tabindex="-1"></a> <span class="kw">end</span></span>
<span id="cb12-660"><a href="#cb12-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-661"><a href="#cb12-661" aria-hidden="true" tabindex="-1"></a> <span class="co">% check if theta_new is collision free</span></span>
<span id="cb12-662"><a href="#cb12-662" aria-hidden="true" tabindex="-1"></a> <span class="va">collision</span> <span class="op">=</span> <span class="va">false</span><span class="op">;</span></span>
<span id="cb12-663"><a href="#cb12-663" aria-hidden="true" tabindex="-1"></a> <span class="kw">for</span> <span class="va">jdx</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">radii</span>)</span>
<span id="cb12-664"><a href="#cb12-664" aria-hidden="true" tabindex="-1"></a> <span class="va">center</span> <span class="op">=</span> <span class="va">centers</span>(<span class="op">:,</span> <span class="va">jdx</span>)<span class="op">;</span></span>
<span id="cb12-665"><a href="#cb12-665" aria-hidden="true" tabindex="-1"></a> <span class="va">radius</span> <span class="op">=</span> <span class="va">radii</span>(<span class="va">jdx</span>)<span class="op">;</span></span>
<span id="cb12-666"><a href="#cb12-666" aria-hidden="true" tabindex="-1"></a> <span class="kw">if</span> <span class="va">norm</span>(<span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">-</span> <span class="va">center</span>) <span class="op">&lt;</span> <span class="va">radius</span></span>
<span id="cb12-667"><a href="#cb12-667" aria-hidden="true" tabindex="-1"></a> <span class="va">collision</span> <span class="op">=</span> <span class="va">true</span><span class="op">;</span></span>
<span id="cb12-668"><a href="#cb12-668" aria-hidden="true" tabindex="-1"></a> <span class="kw">end</span></span>
<span id="cb12-669"><a href="#cb12-669" aria-hidden="true" tabindex="-1"></a> <span class="kw">end</span></span>
<span id="cb12-670"><a href="#cb12-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-671"><a href="#cb12-671" aria-hidden="true" tabindex="-1"></a> <span class="kw">if</span> <span class="va">collision</span></span>
<span id="cb12-672"><a href="#cb12-672" aria-hidden="true" tabindex="-1"></a> <span class="kw">continue</span></span>
<span id="cb12-673"><a href="#cb12-673" aria-hidden="true" tabindex="-1"></a> <span class="kw">end</span></span>
<span id="cb12-674"><a href="#cb12-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-675"><a href="#cb12-675" aria-hidden="true" tabindex="-1"></a> <span class="co">% if collision free, add theta_new to tree with parent theta_near</span></span>
<span id="cb12-676"><a href="#cb12-676" aria-hidden="true" tabindex="-1"></a> <span class="va">theta_new</span>.<span class="va">parent</span> <span class="op">=</span> <span class="va">theta_near_index</span><span class="op">;</span></span>
<span id="cb12-677"><a href="#cb12-677" aria-hidden="true" tabindex="-1"></a> <span class="va">G</span> <span class="op">=</span> [<span class="va">G</span><span class="op">,</span> <span class="va">theta_new</span>]<span class="op">;</span></span>
<span id="cb12-678"><a href="#cb12-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-679"><a href="#cb12-679" aria-hidden="true" tabindex="-1"></a> <span class="co">% plot node and edge</span></span>
<span id="cb12-680"><a href="#cb12-680" aria-hidden="true" tabindex="-1"></a> <span class="va">plot</span>(<span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="ss">'o'</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-681"><a href="#cb12-681" aria-hidden="true" tabindex="-1"></a> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])</span>
<span id="cb12-682"><a href="#cb12-682" aria-hidden="true" tabindex="-1"></a> <span class="va">line</span>([<span class="va">theta_near</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">1</span>)]<span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-683"><a href="#cb12-683" aria-hidden="true" tabindex="-1"></a> [<span class="va">theta_near</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">2</span>)]<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> <span class="ss">'k'</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-684"><a href="#cb12-684" aria-hidden="true" tabindex="-1"></a> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb12-685"><a href="#cb12-685" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-686"><a href="#cb12-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-687"><a href="#cb12-687" aria-hidden="true" tabindex="-1"></a><span class="co">% work backwards from the final node to the root of the tree</span></span>
<span id="cb12-688"><a href="#cb12-688" aria-hidden="true" tabindex="-1"></a><span class="va">next_theta</span> <span class="op">=</span> <span class="va">G</span>(<span class="kw">end</span>)<span class="op">;</span></span>
<span id="cb12-689"><a href="#cb12-689" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="va">next_theta</span>.<span class="va">parent</span> <span class="op">~=</span> <span class="fl">0</span></span>
<span id="cb12-690"><a href="#cb12-690" aria-hidden="true" tabindex="-1"></a> <span class="va">prev_theta_idx</span> <span class="op">=</span> <span class="va">next_theta</span>.<span class="va">parent</span><span class="op">;</span></span>
<span id="cb12-691"><a href="#cb12-691" aria-hidden="true" tabindex="-1"></a> <span class="va">prev_theta</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">prev_theta_idx</span>)<span class="op">;</span></span>
<span id="cb12-692"><a href="#cb12-692" aria-hidden="true" tabindex="-1"></a> <span class="va">line</span>([<span class="va">next_theta</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">prev_theta</span>.<span class="va">coord</span>(<span class="fl">1</span>)]<span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-693"><a href="#cb12-693" aria-hidden="true" tabindex="-1"></a> [<span class="va">next_theta</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="va">prev_theta</span>.<span class="va">coord</span>(<span class="fl">2</span>)]<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-694"><a href="#cb12-694" aria-hidden="true" tabindex="-1"></a> <span class="fl">0</span>]<span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb12-695"><a href="#cb12-695" aria-hidden="true" tabindex="-1"></a> <span class="va">next_theta</span> <span class="op">=</span> <span class="va">prev_theta</span><span class="op">;</span></span>
<span id="cb12-696"><a href="#cb12-696" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-697"><a href="#cb12-697" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-698"><a href="#cb12-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-699"><a href="#cb12-699" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span><span class="va">details</span><span class="op">&gt;</span></span>
<span id="cb12-700"><a href="#cb12-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-701"><a href="#cb12-701" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Result</span><span class="op">:**</span></span>
<span id="cb12-702"><a href="#cb12-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-703"><a href="#cb12-703" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">img</span> <span class="va">src</span><span class="op">=</span><span class="st">"Baseline_RRT.gif"</span> <span class="va">alt</span><span class="op">=</span><span class="st">"Animated GIF"</span> <span class="va">loop</span> <span class="va">width</span><span class="op">=</span><span class="st">"50%"</span> <span class="va">height</span><span class="op">=</span><span class="st">"50%"</span><span class="op">&gt;</span></span>
<span id="cb12-704"><a href="#cb12-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-705"><a href="#cb12-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-706"><a href="#cb12-706" aria-hidden="true" tabindex="-1"></a><span class="va">We</span> <span class="va">can</span> <span class="va">see</span> <span class="va">the</span> <span class="va">trajectory</span> <span class="va">plots</span> <span class="va">in</span> <span class="va">the</span> <span class="va">above</span> <span class="va">figures</span>. <span class="va">Here</span> <span class="va">the</span> <span class="va">black</span> <span class="va">lines</span> <span class="va">and</span> <span class="va">gray</span> <span class="va">dots</span> <span class="va">show</span> <span class="va">the</span> <span class="va">tree</span> ùê∫<span class="op">,</span> <span class="kw">while</span> <span class="va">the</span> <span class="va">orange</span> <span class="va">line</span> <span class="va">is</span> <span class="va">the</span> <span class="va">final</span> <span class="va">motion</span> <span class="va">plan</span> <span class="va">from</span> ùúÉùë†ùë°ùëéùëüùë° <span class="va">to</span> <span class="va">a</span> <span class="va">point</span> <span class="va">close</span> <span class="va">to</span> <span class="va">the</span> <span class="va">goal</span> $<span class="op">\</span><span class="va">normalsize</span> (<span class="op">\</span><span class="va">epsilon</span> ‚â§ <span class="fl">0.1</span>)$. <span class="va">Each</span> <span class="va">time</span> <span class="va">we</span> <span class="va">run</span> <span class="va">your</span> <span class="va">RRT</span> <span class="va">code</span> <span class="va">you</span> <span class="va">should</span> <span class="va">get</span> <span class="va">a</span> <span class="va">different</span> <span class="va">solution</span><span class="op">:</span> <span class="va">RRT</span> <span class="va">builds</span> <span class="va">the</span> <span class="va">tree</span> <span class="va">through</span> <span class="va">random</span> <span class="va">sampling</span>.</span>
<span id="cb12-707"><a href="#cb12-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-708"><a href="#cb12-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-709"><a href="#cb12-709" aria-hidden="true" tabindex="-1"></a>## <span class="va">Goal</span><span class="op">-</span><span class="va">Bias</span> <span class="va">RRT</span> <span class="va">Algorithm</span></span>
<span id="cb12-710"><a href="#cb12-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-711"><a href="#cb12-711" aria-hidden="true" tabindex="-1"></a><span class="va">This</span> <span class="va">version</span> <span class="va">will</span> <span class="va">sample</span> <span class="va">the</span> <span class="va">goal</span> <span class="va">more</span> <span class="va">frequently</span> (<span class="va">let</span>‚Äô<span class="va">s</span> <span class="va">refer</span> <span class="va">to</span> <span class="va">this</span> <span class="va">as</span> <span class="va">goal</span> <span class="va">bias</span>). <span class="va">For</span> <span class="va">goal</span> <span class="va">bias</span><span class="op">,</span> <span class="va">with</span> <span class="va">probability</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="fl">0.2</span>$ <span class="va">set</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="op">\</span><span class="va">theta_</span>{<span class="va">rand</span>}$ <span class="va">as</span> $<span class="op">\</span><span class="va">normalsize</span> <span class="op">\</span><span class="va">theta_</span>{<span class="va">goal</span>}$. <span class="va">Otherwise</span> <span class="va">sample</span> <span class="va">randomly</span> <span class="va">as</span> <span class="va">normal</span>. <span class="va">Then</span> <span class="va">we</span> <span class="va">run</span> <span class="va">our</span> <span class="va">code</span> <span class="fl">10</span> <span class="va">times</span> <span class="kw">for</span> <span class="va">baseline</span> <span class="va">and</span> <span class="fl">10</span> <span class="va">times</span> <span class="kw">for</span> <span class="va">goal</span> <span class="va">bias</span>. </span>
<span id="cb12-712"><a href="#cb12-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-713"><a href="#cb12-713" aria-hidden="true" tabindex="-1"></a><span class="va">Thus</span> <span class="va">we</span> <span class="va">write</span> <span class="va">down</span> <span class="va">how</span> <span class="va">many</span> <span class="va">samples</span> <span class="va">it</span> <span class="va">takes</span> <span class="va">on</span> <span class="va">average</span> <span class="va">to</span> <span class="va">find</span> <span class="va">a</span> <span class="va">motion</span> <span class="va">plan</span>. <span class="va">Which</span> <span class="va">approach</span> <span class="va">is</span> <span class="va">more</span> <span class="va">sample</span><span class="op">-</span><span class="va">efficient</span><span class="op">:</span> <span class="va">baseline</span> <span class="va">or</span> <span class="va">goal</span> <span class="va">bias</span>? </span>
<span id="cb12-714"><a href="#cb12-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-715"><a href="#cb12-715" aria-hidden="true" tabindex="-1"></a><span class="va">Let</span> <span class="va">us</span> <span class="va">check</span> <span class="va">the</span> <span class="va">implementation</span> <span class="va">and</span> <span class="va">results</span>.</span>
<span id="cb12-716"><a href="#cb12-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-717"><a href="#cb12-717" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Goal</span><span class="op">-</span><span class="va">Bias</span> <span class="va">RRT</span> <span class="va">Implementation</span><span class="op">**</span></span>
<span id="cb12-718"><a href="#cb12-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-721"><a href="#cb12-721" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb12-722"><a href="#cb12-722" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">numpy</span> <span class="va">as</span> <span class="va">np</span></span>
<span id="cb12-723"><a href="#cb12-723" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">matplotlib</span></span>
<span id="cb12-724"><a href="#cb12-724" aria-hidden="true" tabindex="-1"></a><span class="va">matplotlib</span>.<span class="va">use</span>(<span class="ss">'Agg'</span>)  # <span class="va">Set</span> <span class="va">the</span> <span class="va">backend</span> <span class="va">to</span> <span class="va">a</span> <span class="va">non</span><span class="op">-</span><span class="va">interactive</span> <span class="va">backend</span></span>
<span id="cb12-725"><a href="#cb12-725" aria-hidden="true" tabindex="-1"></a><span class="va">import</span> <span class="va">matplotlib</span>.<span class="va">pyplot</span> <span class="va">as</span> <span class="va">plt</span></span>
<span id="cb12-726"><a href="#cb12-726" aria-hidden="true" tabindex="-1"></a><span class="va">from</span> <span class="va">matplotlib</span>.<span class="va">patches</span> <span class="va">import</span> <span class="va">Circle</span></span>
<span id="cb12-727"><a href="#cb12-727" aria-hidden="true" tabindex="-1"></a><span class="va">from</span> <span class="va">matplotlib</span>.<span class="va">animation</span> <span class="va">import</span> <span class="va">PillowWriter</span><span class="op">,</span> <span class="va">FuncAnimation</span></span>
<span id="cb12-728"><a href="#cb12-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-729"><a href="#cb12-729" aria-hidden="true" tabindex="-1"></a># <span class="va">Environment</span></span>
<span id="cb12-730"><a href="#cb12-730" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span> <span class="op">=</span> {<span class="ss">'coord'</span><span class="op">:</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span>])}</span>
<span id="cb12-731"><a href="#cb12-731" aria-hidden="true" tabindex="-1"></a><span class="va">theta_goal</span> <span class="op">=</span> {<span class="ss">'coord'</span><span class="op">:</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span>])}</span>
<span id="cb12-732"><a href="#cb12-732" aria-hidden="true" tabindex="-1"></a><span class="va">centers</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">array</span>([[<span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.7</span>]<span class="op">,</span> [<span class="fl">0.35</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.5</span>]])</span>
<span id="cb12-733"><a href="#cb12-733" aria-hidden="true" tabindex="-1"></a><span class="va">radii</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">array</span>([<span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.2</span><span class="op">,</span> <span class="fl">0.2</span>])</span>
<span id="cb12-734"><a href="#cb12-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-735"><a href="#cb12-735" aria-hidden="true" tabindex="-1"></a># <span class="va">Parameters</span></span>
<span id="cb12-736"><a href="#cb12-736" aria-hidden="true" tabindex="-1"></a><span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb12-737"><a href="#cb12-737" aria-hidden="true" tabindex="-1"></a><span class="va">delta</span> <span class="op">=</span> <span class="fl">0.1</span></span>
<span id="cb12-738"><a href="#cb12-738" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span></span>
<span id="cb12-739"><a href="#cb12-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-740"><a href="#cb12-740" aria-hidden="true" tabindex="-1"></a># <span class="va">Initialize</span> <span class="va">figure</span></span>
<span id="cb12-741"><a href="#cb12-741" aria-hidden="true" tabindex="-1"></a><span class="va">fig</span><span class="op">,</span> <span class="va">ax</span> <span class="op">=</span> <span class="va">plt</span>.<span class="va">subplots</span>()</span>
<span id="cb12-742"><a href="#cb12-742" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">grid</span>(<span class="va">True</span>)</span>
<span id="cb12-743"><a href="#cb12-743" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_xlim</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-744"><a href="#cb12-744" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_ylim</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>)</span>
<span id="cb12-745"><a href="#cb12-745" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">set_aspect</span>(<span class="ss">'equal'</span><span class="op">,</span> <span class="va">adjustable</span><span class="op">=</span><span class="ss">'box'</span>)</span>
<span id="cb12-746"><a href="#cb12-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-747"><a href="#cb12-747" aria-hidden="true" tabindex="-1"></a># <span class="va">Draw</span> <span class="va">obstacles</span></span>
<span id="cb12-748"><a href="#cb12-748" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="va">in</span> <span class="va">range</span>(<span class="va">len</span>(<span class="va">radii</span>))<span class="op">:</span></span>
<span id="cb12-749"><a href="#cb12-749" aria-hidden="true" tabindex="-1"></a>    <span class="va">circle</span> <span class="op">=</span> <span class="va">Circle</span>(<span class="va">centers</span>[<span class="op">:,</span> <span class="va">idx</span>]<span class="op">,</span> <span class="va">radii</span>[<span class="va">idx</span>]<span class="op">,</span> <span class="va">color</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="va">alpha</span><span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb12-750"><a href="#cb12-750" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">add_patch</span>(<span class="va">circle</span>)</span>
<span id="cb12-751"><a href="#cb12-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-752"><a href="#cb12-752" aria-hidden="true" tabindex="-1"></a># <span class="va">Plot</span> <span class="va">start</span> <span class="va">and</span> <span class="va">goal</span></span>
<span id="cb12-753"><a href="#cb12-753" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">plot</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span><span class="ss">'k'</span>)</span>
<span id="cb12-754"><a href="#cb12-754" aria-hidden="true" tabindex="-1"></a><span class="va">ax</span>.<span class="va">plot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span><span class="ss">'k'</span>)</span>
<span id="cb12-755"><a href="#cb12-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-756"><a href="#cb12-756" aria-hidden="true" tabindex="-1"></a># <span class="va">Initialize</span> <span class="va">tree</span></span>
<span id="cb12-757"><a href="#cb12-757" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>[<span class="ss">'parent'</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb12-758"><a href="#cb12-758" aria-hidden="true" tabindex="-1"></a><span class="va">G</span> <span class="op">=</span> [<span class="va">theta_start</span>]</span>
<span id="cb12-759"><a href="#cb12-759" aria-hidden="true" tabindex="-1"></a><span class="va">final_path_plotted</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-760"><a href="#cb12-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-761"><a href="#cb12-761" aria-hidden="true" tabindex="-1"></a><span class="va">def</span> <span class="va">update</span>(<span class="va">frame</span>)<span class="op">:</span></span>
<span id="cb12-762"><a href="#cb12-762" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> <span class="va">G</span><span class="op">,</span> <span class="va">final_path_plotted</span></span>
<span id="cb12-763"><a href="#cb12-763" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">frame</span> <span class="op">==</span> <span class="fl">0</span> <span class="va">or</span> <span class="va">final_path_plotted</span><span class="op">:</span></span>
<span id="cb12-764"><a href="#cb12-764" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span>
<span id="cb12-765"><a href="#cb12-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-766"><a href="#cb12-766" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Sample</span> <span class="va">random</span> <span class="va">joint</span> <span class="va">position</span></span>
<span id="cb12-767"><a href="#cb12-767" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">np</span>.<span class="va">random</span>.<span class="va">rand</span>() <span class="op">&lt;</span> <span class="fl">0.2</span><span class="op">:</span></span>
<span id="cb12-768"><a href="#cb12-768" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">theta_goal</span>[<span class="ss">'coord'</span>]</span>
<span id="cb12-769"><a href="#cb12-769" aria-hidden="true" tabindex="-1"></a>    <span class="kw">else</span><span class="op">:</span></span>
<span id="cb12-770"><a href="#cb12-770" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">random</span>.<span class="va">rand</span>(<span class="fl">2</span>)</span>
<span id="cb12-771"><a href="#cb12-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-772"><a href="#cb12-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-773"><a href="#cb12-773" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Find</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span> <span class="va">nearest</span> <span class="va">to</span> <span class="va">theta_rand</span></span>
<span id="cb12-774"><a href="#cb12-774" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist</span> <span class="op">=</span> [<span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">node</span>[<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">theta_rand</span>) <span class="kw">for</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span>]</span>
<span id="cb12-775"><a href="#cb12-775" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near_index</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">argmin</span>(<span class="va">dist</span>)</span>
<span id="cb12-776"><a href="#cb12-776" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near</span> <span class="op">=</span> <span class="va">G</span>[<span class="va">theta_near_index</span>]</span>
<span id="cb12-777"><a href="#cb12-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-778"><a href="#cb12-778" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Take</span> <span class="va">a</span> <span class="va">step</span> <span class="va">from</span> <span class="va">theta_near</span> <span class="va">towards</span> <span class="va">theta_rand</span></span>
<span id="cb12-779"><a href="#cb12-779" aria-hidden="true" tabindex="-1"></a>    <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">theta_rand</span> <span class="op">-</span> <span class="va">theta_near</span>[<span class="ss">'coord'</span>]</span>
<span id="cb12-780"><a href="#cb12-780" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist_to_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">vec_to_rand</span>)</span>
<span id="cb12-781"><a href="#cb12-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-782"><a href="#cb12-782" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span> <span class="op">=</span> {}</span>
<span id="cb12-783"><a href="#cb12-783" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">dist_to_rand</span> <span class="op">&lt;</span> <span class="va">delta</span><span class="op">:</span></span>
<span id="cb12-784"><a href="#cb12-784" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">=</span> <span class="va">theta_rand</span></span>
<span id="cb12-785"><a href="#cb12-785" aria-hidden="true" tabindex="-1"></a>    <span class="kw">else</span><span class="op">:</span></span>
<span id="cb12-786"><a href="#cb12-786" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">=</span> <span class="va">theta_near</span>[<span class="ss">'coord'</span>] <span class="op">+</span> <span class="va">delta</span> <span class="op">*</span> <span class="va">vec_to_rand</span> <span class="op">/</span> <span class="va">dist_to_rand</span></span>
<span id="cb12-787"><a href="#cb12-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-788"><a href="#cb12-788" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Check</span> <span class="kw">if</span> <span class="va">theta_new</span> <span class="va">is</span> <span class="va">collision</span><span class="op">-</span><span class="va">free</span></span>
<span id="cb12-789"><a href="#cb12-789" aria-hidden="true" tabindex="-1"></a>    <span class="va">collision</span> <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-790"><a href="#cb12-790" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">jdx</span> <span class="va">in</span> <span class="va">range</span>(<span class="va">len</span>(<span class="va">radii</span>))<span class="op">:</span></span>
<span id="cb12-791"><a href="#cb12-791" aria-hidden="true" tabindex="-1"></a>        <span class="va">center</span> <span class="op">=</span> <span class="va">centers</span>[<span class="op">:,</span> <span class="va">jdx</span>]</span>
<span id="cb12-792"><a href="#cb12-792" aria-hidden="true" tabindex="-1"></a>        <span class="va">radius</span> <span class="op">=</span> <span class="va">radii</span>[<span class="va">jdx</span>]</span>
<span id="cb12-793"><a href="#cb12-793" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">theta_new</span>[<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">center</span>) <span class="op">&lt;</span> <span class="va">radius</span><span class="op">:</span></span>
<span id="cb12-794"><a href="#cb12-794" aria-hidden="true" tabindex="-1"></a>            <span class="va">collision</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-795"><a href="#cb12-795" aria-hidden="true" tabindex="-1"></a>            <span class="kw">break</span></span>
<span id="cb12-796"><a href="#cb12-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-797"><a href="#cb12-797" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">collision</span><span class="op">:</span></span>
<span id="cb12-798"><a href="#cb12-798" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span>
<span id="cb12-799"><a href="#cb12-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-800"><a href="#cb12-800" aria-hidden="true" tabindex="-1"></a>    # <span class="va">If</span> <span class="va">collision</span><span class="op">-</span><span class="va">free</span><span class="op">,</span> <span class="va">add</span> <span class="va">theta_new</span> <span class="va">to</span> <span class="va">tree</span> <span class="va">with</span> <span class="va">parent</span> <span class="va">theta_near</span></span>
<span id="cb12-801"><a href="#cb12-801" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>[<span class="ss">'parent'</span>] <span class="op">=</span> <span class="va">theta_near_index</span></span>
<span id="cb12-802"><a href="#cb12-802" aria-hidden="true" tabindex="-1"></a>    <span class="va">G</span>.<span class="va">append</span>(<span class="va">theta_new</span>)</span>
<span id="cb12-803"><a href="#cb12-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-804"><a href="#cb12-804" aria-hidden="true" tabindex="-1"></a>    # <span class="va">Plot</span> <span class="va">node</span> <span class="va">and</span> <span class="va">edge</span></span>
<span id="cb12-805"><a href="#cb12-805" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">plot</span>(<span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="ss">'o'</span><span class="op">,</span> <span class="va">color</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="va">markerfacecolor</span><span class="op">=</span>[<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])</span>
<span id="cb12-806"><a href="#cb12-806" aria-hidden="true" tabindex="-1"></a>    <span class="va">ax</span>.<span class="va">plot</span>([<span class="va">theta_near</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]]<span class="op">,</span> [<span class="va">theta_near</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="va">theta_new</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]]<span class="op">,</span> <span class="ss">'k-'</span><span class="op">,</span> <span class="va">linewidth</span><span class="op">=</span><span class="fl">2</span>)</span>
<span id="cb12-807"><a href="#cb12-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-808"><a href="#cb12-808" aria-hidden="true" tabindex="-1"></a>    # <span class="va">If</span> <span class="va">goal</span> <span class="va">is</span> <span class="va">close</span> <span class="va">enough</span> <span class="va">to</span> <span class="va">the</span> <span class="va">last</span> <span class="va">node</span> <span class="va">in</span> <span class="va">G</span><span class="op">,</span> <span class="va">plot</span> <span class="va">the</span> <span class="va">final</span> <span class="va">path</span></span>
<span id="cb12-809"><a href="#cb12-809" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">np</span>.<span class="va">linalg</span>.<span class="va">norm</span>(<span class="va">G</span>[<span class="op">-</span><span class="fl">1</span>][<span class="ss">'coord'</span>] <span class="op">-</span> <span class="va">theta_goal</span>[<span class="ss">'coord'</span>]) <span class="op">&lt;</span> <span class="va">epsilon</span><span class="op">:</span></span>
<span id="cb12-810"><a href="#cb12-810" aria-hidden="true" tabindex="-1"></a>        <span class="va">next_theta</span> <span class="op">=</span> <span class="va">G</span>[<span class="op">-</span><span class="fl">1</span>]</span>
<span id="cb12-811"><a href="#cb12-811" aria-hidden="true" tabindex="-1"></a>        <span class="kw">while</span> <span class="va">next_theta</span>[<span class="ss">'parent'</span>] <span class="va">is</span> <span class="va">not</span> <span class="va">None</span><span class="op">:</span></span>
<span id="cb12-812"><a href="#cb12-812" aria-hidden="true" tabindex="-1"></a>            <span class="va">prev_theta</span> <span class="op">=</span> <span class="va">G</span>[<span class="va">next_theta</span>[<span class="ss">'parent'</span>]]</span>
<span id="cb12-813"><a href="#cb12-813" aria-hidden="true" tabindex="-1"></a>            <span class="va">line</span><span class="op">,</span> <span class="op">=</span> <span class="va">ax</span>.<span class="va">plot</span>([<span class="va">next_theta</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]<span class="op">,</span> <span class="va">prev_theta</span>[<span class="ss">'coord'</span>][<span class="fl">0</span>]]<span class="op">,</span> [<span class="va">next_theta</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]<span class="op">,</span> <span class="va">prev_theta</span>[<span class="ss">'coord'</span>][<span class="fl">1</span>]]<span class="op">,</span> <span class="ss">'orange'</span><span class="op">,</span> <span class="va">linewidth</span><span class="op">=</span><span class="fl">3</span>)</span>
<span id="cb12-814"><a href="#cb12-814" aria-hidden="true" tabindex="-1"></a>            <span class="va">next_theta</span> <span class="op">=</span> <span class="va">prev_theta</span></span>
<span id="cb12-815"><a href="#cb12-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-816"><a href="#cb12-816" aria-hidden="true" tabindex="-1"></a>        # <span class="va">Add</span> <span class="va">final</span> <span class="va">path</span> <span class="va">to</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-817"><a href="#cb12-817" aria-hidden="true" tabindex="-1"></a>        <span class="va">final_path_plotted</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-818"><a href="#cb12-818" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="va">line</span><span class="op">,</span></span>
<span id="cb12-819"><a href="#cb12-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-820"><a href="#cb12-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-821"><a href="#cb12-821" aria-hidden="true" tabindex="-1"></a># <span class="va">Create</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-822"><a href="#cb12-822" aria-hidden="true" tabindex="-1"></a><span class="va">ani</span> <span class="op">=</span> <span class="va">FuncAnimation</span>(<span class="va">fig</span><span class="op">,</span> <span class="va">update</span><span class="op">,</span> <span class="va">frames</span><span class="op">=</span><span class="va">N</span><span class="op">,</span> <span class="va">repeat</span><span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-823"><a href="#cb12-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-824"><a href="#cb12-824" aria-hidden="true" tabindex="-1"></a># <span class="va">Save</span> <span class="va">the</span> <span class="va">animation</span></span>
<span id="cb12-825"><a href="#cb12-825" aria-hidden="true" tabindex="-1"></a><span class="va">writer</span> <span class="op">=</span> <span class="va">PillowWriter</span>(<span class="va">fps</span><span class="op">=</span><span class="fl">20</span>)</span>
<span id="cb12-826"><a href="#cb12-826" aria-hidden="true" tabindex="-1"></a><span class="va">ani</span>.<span class="va">save</span>(<span class="st">"Goal_bias_RRT.gif"</span><span class="op">,</span> <span class="va">writer</span><span class="op">=</span><span class="va">writer</span>)</span>
<span id="cb12-827"><a href="#cb12-827" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-828"><a href="#cb12-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-829"><a href="#cb12-829" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">MATLAB</span> <span class="va">Implementation</span><span class="op">**</span></span>
<span id="cb12-830"><a href="#cb12-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-831"><a href="#cb12-831" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">details</span><span class="op">&gt;</span></span>
<span id="cb12-832"><a href="#cb12-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-835"><a href="#cb12-835" aria-hidden="true" tabindex="-1"></a><span class="in">```{matlab}</span></span>
<span id="cb12-836"><a href="#cb12-836" aria-hidden="true" tabindex="-1"></a><span class="va">clear</span></span>
<span id="cb12-837"><a href="#cb12-837" aria-hidden="true" tabindex="-1"></a><span class="va">close</span> <span class="va">all</span></span>
<span id="cb12-838"><a href="#cb12-838" aria-hidden="true" tabindex="-1"></a><span class="co">% Environment initiation</span></span>
<span id="cb12-839"><a href="#cb12-839" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>.<span class="va">coord</span> <span class="op">=</span> [<span class="fl">0</span><span class="op">;</span> <span class="fl">0</span>]<span class="op">;</span></span>
<span id="cb12-840"><a href="#cb12-840" aria-hidden="true" tabindex="-1"></a><span class="va">theta_goal</span> <span class="op">=</span> [<span class="fl">1</span><span class="op">;</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb12-841"><a href="#cb12-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-842"><a href="#cb12-842" aria-hidden="true" tabindex="-1"></a><span class="co">% Obstacle Parameters</span></span>
<span id="cb12-843"><a href="#cb12-843" aria-hidden="true" tabindex="-1"></a><span class="co">% First obstacle center and radius</span></span>
<span id="cb12-844"><a href="#cb12-844" aria-hidden="true" tabindex="-1"></a><span class="va">center</span> <span class="op">=</span> [<span class="fl">0.2</span><span class="op">;</span> <span class="fl">0.35</span>]<span class="op">;</span></span>
<span id="cb12-845"><a href="#cb12-845" aria-hidden="true" tabindex="-1"></a><span class="va">radius</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb12-846"><a href="#cb12-846" aria-hidden="true" tabindex="-1"></a><span class="co">% Second obstacle center and radius</span></span>
<span id="cb12-847"><a href="#cb12-847" aria-hidden="true" tabindex="-1"></a><span class="va">center2</span> <span class="op">=</span> [<span class="fl">0.5</span><span class="op">;</span> <span class="fl">0.3</span>]<span class="op">;</span> </span>
<span id="cb12-848"><a href="#cb12-848" aria-hidden="true" tabindex="-1"></a><span class="va">radius2</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb12-849"><a href="#cb12-849" aria-hidden="true" tabindex="-1"></a><span class="co">% Third obstacle center and radius</span></span>
<span id="cb12-850"><a href="#cb12-850" aria-hidden="true" tabindex="-1"></a><span class="va">center3</span> <span class="op">=</span> [<span class="fl">0.7</span><span class="op">;</span> <span class="fl">0.5</span>]<span class="op">;</span></span>
<span id="cb12-851"><a href="#cb12-851" aria-hidden="true" tabindex="-1"></a><span class="va">radius3</span> <span class="op">=</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb12-852"><a href="#cb12-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-853"><a href="#cb12-853" aria-hidden="true" tabindex="-1"></a><span class="co">% Specifying parameters</span></span>
<span id="cb12-854"><a href="#cb12-854" aria-hidden="true" tabindex="-1"></a><span class="va">epsilon</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb12-855"><a href="#cb12-855" aria-hidden="true" tabindex="-1"></a><span class="va">delta</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb12-856"><a href="#cb12-856" aria-hidden="true" tabindex="-1"></a><span class="va">N</span> <span class="op">=</span> <span class="fl">1000</span><span class="op">;</span></span>
<span id="cb12-857"><a href="#cb12-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-858"><a href="#cb12-858" aria-hidden="true" tabindex="-1"></a><span class="co">% Visualizing the environment</span></span>
<span id="cb12-859"><a href="#cb12-859" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span></span>
<span id="cb12-860"><a href="#cb12-860" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span></span>
<span id="cb12-861"><a href="#cb12-861" aria-hidden="true" tabindex="-1"></a><span class="va">hold</span> <span class="va">on</span></span>
<span id="cb12-862"><a href="#cb12-862" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span>([<span class="fl">0</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="fl">1</span>])</span>
<span id="cb12-863"><a href="#cb12-863" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span> <span class="va">equal</span></span>
<span id="cb12-864"><a href="#cb12-864" aria-hidden="true" tabindex="-1"></a><span class="va">viscircles</span>(<span class="va">center</span><span class="op">',</span> <span class="va">radius</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])<span class="op">;</span></span>
<span id="cb12-865"><a href="#cb12-865" aria-hidden="true" tabindex="-1"></a><span class="va">viscircles</span>(<span class="va">center2</span><span class="op">',</span> <span class="va">radius2</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.7</span><span class="op">,</span> <span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.3</span>])<span class="op">;</span> <span class="co">% Visualizing the second obstacle</span></span>
<span id="cb12-866"><a href="#cb12-866" aria-hidden="true" tabindex="-1"></a><span class="va">viscircles</span>(<span class="va">center3</span><span class="op">',</span> <span class="va">radius3</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.7</span>])<span class="op">;</span> <span class="co">% Visualizing the third obstacle</span></span>
<span id="cb12-867"><a href="#cb12-867" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="fl">0</span><span class="op">,</span> <span class="fl">0</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> <span class="ss">'k'</span>)</span>
<span id="cb12-868"><a href="#cb12-868" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="ss">'ko'</span><span class="op">,</span> <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> <span class="ss">'k'</span>)</span>
<span id="cb12-869"><a href="#cb12-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-870"><a href="#cb12-870" aria-hidden="true" tabindex="-1"></a><span class="co">% Initializing the tree</span></span>
<span id="cb12-871"><a href="#cb12-871" aria-hidden="true" tabindex="-1"></a><span class="va">theta_start</span>.<span class="va">parent</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb12-872"><a href="#cb12-872" aria-hidden="true" tabindex="-1"></a><span class="va">G</span>(<span class="fl">1</span>) <span class="op">=</span> <span class="va">theta_start</span><span class="op">;</span></span>
<span id="cb12-873"><a href="#cb12-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-874"><a href="#cb12-874" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">idx</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">N</span></span>
<span id="cb12-875"><a href="#cb12-875" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-876"><a href="#cb12-876" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Stop if the last node in G is close to theta_goal</span></span>
<span id="cb12-877"><a href="#cb12-877" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">norm</span>(<span class="va">G</span>(<span class="kw">end</span>).<span class="va">coord</span>  <span class="op">-</span> <span class="va">theta_goal</span>) <span class="op">&lt;</span> <span class="va">epsilon</span></span>
<span id="cb12-878"><a href="#cb12-878" aria-hidden="true" tabindex="-1"></a>        <span class="kw">break</span></span>
<span id="cb12-879"><a href="#cb12-879" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb12-880"><a href="#cb12-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-881"><a href="#cb12-881" aria-hidden="true" tabindex="-1"></a>    <span class="co">% sample random joint position: probability 0.2</span></span>
<span id="cb12-882"><a href="#cb12-882" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-883"><a href="#cb12-883" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">rand</span>() <span class="op">&lt;</span> <span class="fl">0.2</span></span>
<span id="cb12-884"><a href="#cb12-884" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">theta_goal</span><span class="op">;</span></span>
<span id="cb12-885"><a href="#cb12-885" aria-hidden="true" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb12-886"><a href="#cb12-886" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">2</span><span class="op">,</span><span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb12-887"><a href="#cb12-887" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb12-888"><a href="#cb12-888" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-889"><a href="#cb12-889" aria-hidden="true" tabindex="-1"></a>    <span class="co">% find node in G nearest to theta_rand</span></span>
<span id="cb12-890"><a href="#cb12-890" aria-hidden="true" tabindex="-1"></a>    <span class="va">min_dist</span> <span class="op">=</span> <span class="va">inf</span><span class="op">;</span></span>
<span id="cb12-891"><a href="#cb12-891" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near_index</span> <span class="op">=</span> <span class="fl">0</span><span class="op">;</span></span>
<span id="cb12-892"><a href="#cb12-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-893"><a href="#cb12-893" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">jdx</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">length</span>(<span class="va">G</span>)</span>
<span id="cb12-894"><a href="#cb12-894" aria-hidden="true" tabindex="-1"></a>        <span class="va">coord</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">jdx</span>).<span class="va">coord</span><span class="op">;</span></span>
<span id="cb12-895"><a href="#cb12-895" aria-hidden="true" tabindex="-1"></a>        <span class="va">dist</span> <span class="op">=</span> <span class="va">norm</span>(<span class="va">theta_rand</span> <span class="op">-</span> <span class="va">coord</span>)<span class="op">;</span></span>
<span id="cb12-896"><a href="#cb12-896" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="va">dist</span> <span class="op">&lt;</span> <span class="va">min_dist</span></span>
<span id="cb12-897"><a href="#cb12-897" aria-hidden="true" tabindex="-1"></a>            <span class="va">min_dist</span> <span class="op">=</span> <span class="va">dist</span><span class="op">;</span></span>
<span id="cb12-898"><a href="#cb12-898" aria-hidden="true" tabindex="-1"></a>            <span class="va">theta_near_index</span> <span class="op">=</span> <span class="va">jdx</span><span class="op">;</span></span>
<span id="cb12-899"><a href="#cb12-899" aria-hidden="true" tabindex="-1"></a>        <span class="kw">end</span></span>
<span id="cb12-900"><a href="#cb12-900" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb12-901"><a href="#cb12-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-902"><a href="#cb12-902" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_near</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">theta_near_index</span>)<span class="op">;</span></span>
<span id="cb12-903"><a href="#cb12-903" aria-hidden="true" tabindex="-1"></a>    <span class="co">% take a step from theta_near towards theta_rand</span></span>
<span id="cb12-904"><a href="#cb12-904" aria-hidden="true" tabindex="-1"></a>    <span class="va">vec_to_rand</span> <span class="op">=</span> <span class="va">theta_rand</span> <span class="op">-</span> <span class="va">theta_near</span>.<span class="va">coord</span><span class="op">;</span></span>
<span id="cb12-905"><a href="#cb12-905" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist_to_rand</span> <span class="op">=</span> <span class="va">norm</span>(<span class="va">vec_to_rand</span>)<span class="op">;</span></span>
<span id="cb12-906"><a href="#cb12-906" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">dist_to_rand</span> <span class="op">&lt;</span> <span class="va">delta</span></span>
<span id="cb12-907"><a href="#cb12-907" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">=</span> <span class="va">theta_rand</span><span class="op">;</span></span>
<span id="cb12-908"><a href="#cb12-908" aria-hidden="true" tabindex="-1"></a>    <span class="kw">else</span></span>
<span id="cb12-909"><a href="#cb12-909" aria-hidden="true" tabindex="-1"></a>        <span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">=</span> <span class="va">theta_near</span>.<span class="va">coord</span> <span class="op">+</span> <span class="va">delta</span> <span class="op">*</span> <span class="op">...</span></span>
<span id="cb12-910"><a href="#cb12-910" aria-hidden="true" tabindex="-1"></a>        <span class="va">vec_to_rand</span><span class="op">/</span><span class="va">dist_to_rand</span><span class="op">;</span></span>
<span id="cb12-911"><a href="#cb12-911" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb12-912"><a href="#cb12-912" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-913"><a href="#cb12-913" aria-hidden="true" tabindex="-1"></a>    <span class="co">% check if theta_new is collision free with all obstacles</span></span>
<span id="cb12-914"><a href="#cb12-914" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist_to_obs1</span> <span class="op">=</span> <span class="va">norm</span>(<span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">-</span> <span class="va">center</span>)<span class="op">;</span></span>
<span id="cb12-915"><a href="#cb12-915" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist_to_obs2</span> <span class="op">=</span> <span class="va">norm</span>(<span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">-</span> <span class="va">center2</span>)<span class="op">;</span></span>
<span id="cb12-916"><a href="#cb12-916" aria-hidden="true" tabindex="-1"></a>    <span class="va">dist_to_obs3</span> <span class="op">=</span> <span class="va">norm</span>(<span class="va">theta_new</span>.<span class="va">coord</span> <span class="op">-</span> <span class="va">center3</span>)<span class="op">;</span></span>
<span id="cb12-917"><a href="#cb12-917" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="va">dist_to_obs1</span> <span class="op">&lt;</span> <span class="va">radius</span> <span class="op">||</span> <span class="va">dist_to_obs2</span> <span class="op">&lt;</span> <span class="va">radius2</span> <span class="op">||</span> <span class="va">dist_to_obs3</span> <span class="op">&lt;</span> <span class="va">radius3</span></span>
<span id="cb12-918"><a href="#cb12-918" aria-hidden="true" tabindex="-1"></a>        <span class="kw">continue</span></span>
<span id="cb12-919"><a href="#cb12-919" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb12-920"><a href="#cb12-920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-921"><a href="#cb12-921" aria-hidden="true" tabindex="-1"></a>    <span class="co">% if collision free, add theta_new to tree with parent theta_near</span></span>
<span id="cb12-922"><a href="#cb12-922" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>.<span class="va">parent</span> <span class="op">=</span> <span class="va">theta_near_index</span><span class="op">;</span></span>
<span id="cb12-923"><a href="#cb12-923" aria-hidden="true" tabindex="-1"></a>    <span class="va">G</span> <span class="op">=</span> [<span class="va">G</span><span class="op">,</span> <span class="va">theta_new</span>]<span class="op">;</span></span>
<span id="cb12-924"><a href="#cb12-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-925"><a href="#cb12-925" aria-hidden="true" tabindex="-1"></a>    <span class="co">% plot node and edge</span></span>
<span id="cb12-926"><a href="#cb12-926" aria-hidden="true" tabindex="-1"></a>    <span class="va">plot</span>(<span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="ss">'o'</span><span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>]<span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-927"><a href="#cb12-927" aria-hidden="true" tabindex="-1"></a>    <span class="ss">'MarkerFaceColor'</span><span class="op">,</span> [<span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0.5</span>])</span>
<span id="cb12-928"><a href="#cb12-928" aria-hidden="true" tabindex="-1"></a>    <span class="va">line</span>([<span class="va">theta_near</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">1</span>)]<span class="op">,</span> [<span class="va">theta_near</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-929"><a href="#cb12-929" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_new</span>.<span class="va">coord</span>(<span class="fl">2</span>)]<span class="op">,</span> <span class="ss">'Color'</span><span class="op">,</span> <span class="ss">'k'</span><span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">2</span>)<span class="op">;</span></span>
<span id="cb12-930"><a href="#cb12-930" aria-hidden="true" tabindex="-1"></a>    <span class="va">drawnow</span></span>
<span id="cb12-931"><a href="#cb12-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-932"><a href="#cb12-932" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-933"><a href="#cb12-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-934"><a href="#cb12-934" aria-hidden="true" tabindex="-1"></a><span class="co">% work backwards from the final node to the root of the tree</span></span>
<span id="cb12-935"><a href="#cb12-935" aria-hidden="true" tabindex="-1"></a><span class="va">child_theta</span> <span class="op">=</span> <span class="va">G</span>(<span class="kw">end</span>)<span class="op">;</span></span>
<span id="cb12-936"><a href="#cb12-936" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="va">child_theta</span>.<span class="va">parent</span> <span class="op">~=</span> <span class="fl">0</span></span>
<span id="cb12-937"><a href="#cb12-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-938"><a href="#cb12-938" aria-hidden="true" tabindex="-1"></a>    <span class="va">parent_theta_index</span> <span class="op">=</span> <span class="va">child_theta</span>.<span class="va">parent</span><span class="op">;</span></span>
<span id="cb12-939"><a href="#cb12-939" aria-hidden="true" tabindex="-1"></a>    <span class="va">parent_theta</span> <span class="op">=</span> <span class="va">G</span>(<span class="va">parent_theta_index</span>)<span class="op">;</span></span>
<span id="cb12-940"><a href="#cb12-940" aria-hidden="true" tabindex="-1"></a>    <span class="va">line</span>([<span class="va">child_theta</span>.<span class="va">coord</span>(<span class="fl">1</span>)<span class="op">,</span> <span class="va">parent_theta</span>.<span class="va">coord</span>(<span class="fl">1</span>)]<span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-941"><a href="#cb12-941" aria-hidden="true" tabindex="-1"></a>        [<span class="va">child_theta</span>.<span class="va">coord</span>(<span class="fl">2</span>)<span class="op">,</span> <span class="va">parent_theta</span>.<span class="va">coord</span>(<span class="fl">2</span>)]<span class="op">,</span> <span class="op">...</span></span>
<span id="cb12-942"><a href="#cb12-942" aria-hidden="true" tabindex="-1"></a>        <span class="ss">'Color'</span><span class="op">,</span> [<span class="fl">1</span><span class="op">,</span> <span class="fl">0.5</span><span class="op">,</span> <span class="fl">0</span>]<span class="op">,</span> <span class="ss">'LineWidth'</span><span class="op">,</span> <span class="fl">3</span>)<span class="op">;</span></span>
<span id="cb12-943"><a href="#cb12-943" aria-hidden="true" tabindex="-1"></a>    <span class="va">child_theta</span> <span class="op">=</span> <span class="va">parent_theta</span><span class="op">;</span></span>
<span id="cb12-944"><a href="#cb12-944" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-945"><a href="#cb12-945" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-946"><a href="#cb12-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-947"><a href="#cb12-947" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span><span class="va">details</span><span class="op">&gt;</span></span>
<span id="cb12-948"><a href="#cb12-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-949"><a href="#cb12-949" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Result</span><span class="op">:**</span></span>
<span id="cb12-950"><a href="#cb12-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-951"><a href="#cb12-951" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">img</span> <span class="va">src</span><span class="op">=</span><span class="st">"Goal_bias_RRT.gif"</span> <span class="va">alt</span><span class="op">=</span><span class="st">"Animated GIF"</span> <span class="va">loop</span> <span class="va">width</span><span class="op">=</span><span class="st">"50%"</span> <span class="va">height</span><span class="op">=</span><span class="st">"50%"</span><span class="op">&gt;</span></span>
<span id="cb12-952"><a href="#cb12-952" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-953"><a href="#cb12-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-954"><a href="#cb12-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-955"><a href="#cb12-955" aria-hidden="true" tabindex="-1"></a><span class="va">The</span> <span class="va">samples</span> ùëÅ <span class="va">across</span> <span class="va">ten</span> <span class="va">runs</span> <span class="va">with</span> <span class="va">baseline</span> <span class="va">and</span> <span class="va">goal</span> <span class="va">bias</span> <span class="va">are</span> <span class="va">tabulated</span> <span class="va">below</span>.</span>
<span id="cb12-956"><a href="#cb12-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-957"><a href="#cb12-957" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-958"><a href="#cb12-958" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="va">run</span>  <span class="op">|</span> <span class="va">baseline</span> <span class="op">|</span> <span class="va">goal</span> <span class="va">bias</span><span class="op">|</span></span>
<span id="cb12-959"><a href="#cb12-959" aria-hidden="true" tabindex="-1"></a><span class="op">|------|----------|----------|</span></span>
<span id="cb12-960"><a href="#cb12-960" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">1</span>    <span class="op">|</span>   <span class="fl">254</span>    <span class="op">|</span>   <span class="fl">225</span>    <span class="op">|</span></span>
<span id="cb12-961"><a href="#cb12-961" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">2</span>    <span class="op">|</span>   <span class="fl">363</span>    <span class="op">|</span>   <span class="fl">169</span>    <span class="op">|</span></span>
<span id="cb12-962"><a href="#cb12-962" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">3</span>    <span class="op">|</span>   <span class="fl">318</span>    <span class="op">|</span>   <span class="fl">150</span>    <span class="op">|</span></span>
<span id="cb12-963"><a href="#cb12-963" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">4</span>    <span class="op">|</span>   <span class="fl">590</span>    <span class="op">|</span>   <span class="fl">143</span>    <span class="op">|</span></span>
<span id="cb12-964"><a href="#cb12-964" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">5</span>    <span class="op">|</span>   <span class="fl">352</span>    <span class="op">|</span>   <span class="fl">249</span>    <span class="op">|</span></span>
<span id="cb12-965"><a href="#cb12-965" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">6</span>    <span class="op">|</span>   <span class="fl">359</span>    <span class="op">|</span>   <span class="fl">166</span>    <span class="op">|</span></span>
<span id="cb12-966"><a href="#cb12-966" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">7</span>    <span class="op">|</span>   <span class="fl">202</span>    <span class="op">|</span>   <span class="fl">251</span>    <span class="op">|</span></span>
<span id="cb12-967"><a href="#cb12-967" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">8</span>    <span class="op">|</span>   <span class="fl">267</span>    <span class="op">|</span>   <span class="fl">162</span>    <span class="op">|</span></span>
<span id="cb12-968"><a href="#cb12-968" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">9</span>    <span class="op">|</span>   <span class="fl">440</span>    <span class="op">|</span>   <span class="fl">183</span>    <span class="op">|</span></span>
<span id="cb12-969"><a href="#cb12-969" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="fl">10</span>   <span class="op">|</span>   <span class="fl">226</span>    <span class="op">|</span>   <span class="fl">313</span>    <span class="op">|</span></span>
<span id="cb12-970"><a href="#cb12-970" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-971"><a href="#cb12-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-972"><a href="#cb12-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-973"><a href="#cb12-973" aria-hidden="true" tabindex="-1"></a><span class="va">On</span> <span class="va">average</span><span class="op">,</span> <span class="va">the</span> <span class="op">**</span><span class="va">baseline</span><span class="op">**</span> <span class="va">required</span> <span class="op">**</span><span class="fl">337</span><span class="op">**</span> <span class="va">samples</span> <span class="va">to</span> <span class="va">reach</span> <span class="va">a</span> <span class="va">valid</span> <span class="va">motion</span> <span class="va">plan</span><span class="op">,</span> <span class="kw">while</span> <span class="op">**</span><span class="va">goal</span> <span class="va">bias</span><span class="op">**</span> <span class="va">needed</span> <span class="op">**</span><span class="fl">201</span><span class="op">**</span> <span class="va">samples</span>. <span class="va">For</span> <span class="op">**</span><span class="va">Environment</span> <span class="fl">3</span><span class="op">**</span> <span class="va">the</span> <span class="va">evidence</span> <span class="va">suggests</span> <span class="va">that</span> <span class="va">biasing</span> <span class="va">the</span> <span class="va">samples</span> <span class="va">towards</span> ùúÉùëîùëúùëéùëô <span class="va">decreases</span> <span class="va">the</span> <span class="va">total</span> <span class="va">number</span> <span class="va">of</span> <span class="va">samples</span> <span class="va">and</span> <span class="va">causes</span> <span class="va">RRT</span> <span class="va">to</span> <span class="va">reach</span> <span class="va">a</span> <span class="va">solution</span> <span class="va">faster</span>. <span class="va">Intuitively</span><span class="op">,</span> <span class="va">this</span> <span class="va">is</span> <span class="va">because</span> <span class="va">the</span> <span class="va">tree</span> <span class="va">is</span> <span class="va">trying</span> <span class="va">to</span> <span class="va">move</span> <span class="va">in</span> <span class="va">the</span> <span class="va">direction</span> <span class="va">of</span> <span class="va">the</span> <span class="va">goal</span> <span class="va">more</span> <span class="va">frequently</span>. </span>
<span id="cb12-974"><a href="#cb12-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-975"><a href="#cb12-975" aria-hidden="true" tabindex="-1"></a><span class="va">This</span> <span class="va">is</span> <span class="va">particularly</span> <span class="va">advantageous</span> <span class="va">when</span> <span class="va">the</span> <span class="va">robot</span> <span class="va">is</span> <span class="va">in</span> <span class="va">free</span> <span class="va">space</span> (<span class="va">or</span> <span class="va">has</span> <span class="va">passed</span> <span class="va">the</span> <span class="va">obstacles</span>) <span class="va">and</span> <span class="va">should</span> <span class="va">move</span> <span class="va">directly</span> <span class="va">towards</span> <span class="va">the</span> <span class="va">goal</span>. <span class="va">The</span> <span class="va">code</span> <span class="va">snippet</span> <span class="va">required</span> <span class="va">to</span> <span class="va">implement</span> <span class="va">goal</span> <span class="va">bias</span> <span class="va">is</span> <span class="va">shown</span> <span class="va">below</span><span class="op">:</span></span>
<span id="cb12-976"><a href="#cb12-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-977"><a href="#cb12-977" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Python</span> <span class="va">version</span><span class="op">**</span></span>
<span id="cb12-978"><a href="#cb12-978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-979"><a href="#cb12-979" aria-hidden="true" tabindex="-1"></a>```<span class="va">python</span></span>
<span id="cb12-980"><a href="#cb12-980" aria-hidden="true" tabindex="-1"></a># <span class="va">Sample</span> <span class="va">random</span> <span class="va">joint</span> <span class="va">position</span><span class="op">:</span> <span class="va">probability</span> <span class="fl">0.2</span></span>
<span id="cb12-981"><a href="#cb12-981" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="va">np</span>.<span class="va">random</span>.<span class="va">rand</span>() <span class="op">&lt;</span> <span class="fl">0.2</span><span class="op">:</span></span>
<span id="cb12-982"><a href="#cb12-982" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">theta_goal</span>[<span class="ss">'coord'</span>]</span>
<span id="cb12-983"><a href="#cb12-983" aria-hidden="true" tabindex="-1"></a><span class="kw">else</span><span class="op">:</span></span>
<span id="cb12-984"><a href="#cb12-984" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">np</span>.<span class="va">random</span>.<span class="va">rand</span>(<span class="fl">2</span>)</span>
<span id="cb12-985"><a href="#cb12-985" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-986"><a href="#cb12-986" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">MATLAB</span> <span class="va">version</span><span class="op">**</span></span>
<span id="cb12-987"><a href="#cb12-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-988"><a href="#cb12-988" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">details</span><span class="op">&gt;</span></span>
<span id="cb12-989"><a href="#cb12-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-990"><a href="#cb12-990" aria-hidden="true" tabindex="-1"></a>```<span class="va">matlab</span></span>
<span id="cb12-991"><a href="#cb12-991" aria-hidden="true" tabindex="-1"></a><span class="co">% sample random joint position: probability 0.2</span></span>
<span id="cb12-992"><a href="#cb12-992" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-993"><a href="#cb12-993" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="va">rand</span>() <span class="op">&lt;</span> <span class="fl">0.2</span></span>
<span id="cb12-994"><a href="#cb12-994" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">theta_goal</span><span class="op">;</span></span>
<span id="cb12-995"><a href="#cb12-995" aria-hidden="true" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb12-996"><a href="#cb12-996" aria-hidden="true" tabindex="-1"></a>    <span class="va">theta_rand</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">2</span><span class="op">,</span><span class="fl">1</span>)<span class="op">;</span></span>
<span id="cb12-997"><a href="#cb12-997" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb12-998"><a href="#cb12-998" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-999"><a href="#cb12-999" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span><span class="va">details</span><span class="op">&gt;</span></span>
<span id="cb12-1000"><a href="#cb12-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1001"><a href="#cb12-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1002"><a href="#cb12-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1003"><a href="#cb12-1003" aria-hidden="true" tabindex="-1"></a><span class="op">**</span><span class="va">Sample</span> <span class="va">Efficiency</span> <span class="va">Comparison</span><span class="op">:**</span></span>
<span id="cb12-1004"><a href="#cb12-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1005"><a href="#cb12-1005" aria-hidden="true" tabindex="-1"></a>‚Ä¢ <span class="va">Goal</span><span class="op">-</span><span class="va">biased</span> <span class="va">RRT</span> <span class="va">seemed</span> <span class="va">to</span> <span class="va">be</span> <span class="va">more</span> <span class="va">sample</span><span class="op">-</span><span class="va">efficient</span> <span class="va">in</span> <span class="va">open</span> <span class="va">or</span> <span class="va">less</span> <span class="va">complex</span> <span class="va">environments</span> <span class="va">because</span> <span class="va">it</span> <span class="va">directs</span> <span class="va">its</span> <span class="va">exploration</span> <span class="va">towards</span> <span class="va">the</span> <span class="va">goal</span><span class="op">,</span> <span class="va">thereby</span> <span class="va">potentially</span> <span class="va">finding</span> <span class="va">a</span> <span class="va">path</span> <span class="va">with</span> <span class="va">fewer</span> <span class="va">samples</span>.</span>
<span id="cb12-1006"><a href="#cb12-1006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1007"><a href="#cb12-1007" aria-hidden="true" tabindex="-1"></a>‚Ä¢ <span class="va">In</span> <span class="va">contrast</span><span class="op">,</span> <span class="va">the</span> <span class="va">baseline</span> <span class="va">RRT</span> <span class="va">might</span> <span class="va">be</span> <span class="va">more</span> <span class="va">effective</span> <span class="va">in</span> <span class="va">highly</span> <span class="va">cluttered</span> <span class="va">environments</span> <span class="va">where</span> <span class="va">a</span> <span class="va">direct</span> <span class="va">path</span> <span class="va">to</span> <span class="va">the</span> <span class="va">goal</span> <span class="va">is</span> <span class="va">less</span> <span class="va">likely</span><span class="op">,</span> <span class="va">and</span> <span class="va">a</span> <span class="va">more</span> <span class="va">uniform</span> <span class="va">exploration</span> <span class="va">of</span> <span class="va">the</span> <span class="va">space</span> <span class="va">is</span> <span class="va">beneficial</span>.</span>
<span id="cb12-1008"><a href="#cb12-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1009"><a href="#cb12-1009" aria-hidden="true" tabindex="-1"></a><span class="va">We</span> <span class="va">need</span> <span class="va">to</span> <span class="va">understand</span> <span class="va">the</span> <span class="va">key</span> <span class="va">differences</span> <span class="va">between</span> <span class="va">the</span> <span class="va">two</span> <span class="kw">methods</span> <span class="va">and</span> <span class="va">their</span> <span class="va">impact</span> <span class="va">on</span> <span class="va">sample</span> <span class="va">efficiency</span><span class="op">:</span></span>
<span id="cb12-1010"><a href="#cb12-1010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1011"><a href="#cb12-1011" aria-hidden="true" tabindex="-1"></a><span class="op">*</span> <span class="va">Baseline</span> <span class="va">RRT</span><span class="op">:</span> <span class="va">This</span> <span class="va">approach</span> <span class="va">uniformly</span> <span class="va">samples</span> <span class="va">the</span> <span class="va">entire</span> <span class="va">configuration</span> <span class="va">space</span> <span class="va">without</span> <span class="va">any</span> <span class="va">bias</span> <span class="va">towards</span> <span class="va">the</span> <span class="va">goal</span>. <span class="va">It</span> <span class="va">explores</span> <span class="va">the</span> <span class="va">space</span> <span class="va">in</span> <span class="va">a</span> <span class="va">more</span> <span class="va">scattered</span> <span class="va">manner</span><span class="op">,</span> <span class="va">which</span> <span class="va">can</span> <span class="va">be</span> <span class="va">beneficial</span> <span class="va">in</span> <span class="va">complex</span> <span class="va">environments</span> <span class="va">with</span> <span class="va">many</span> <span class="va">obstacles</span>. <span class="va">However</span><span class="op">,</span> <span class="va">it</span> <span class="va">might</span> <span class="va">take</span> <span class="va">more</span> <span class="va">samples</span> <span class="va">to</span> <span class="va">find</span> <span class="va">a</span> <span class="va">path</span> <span class="va">to</span> <span class="va">the</span> <span class="va">goal</span><span class="op">,</span> <span class="va">especially</span> <span class="va">in</span> <span class="va">large</span> <span class="va">or</span> <span class="va">open</span> <span class="va">spaces</span><span class="op">,</span> <span class="va">because</span> <span class="va">the</span> <span class="va">sampling</span> <span class="va">is</span> <span class="va">entirely</span> <span class="va">random</span> <span class="va">and</span> <span class="va">not</span> <span class="va">directed</span> <span class="va">towards</span> <span class="va">the</span> <span class="va">goal</span>.</span>
<span id="cb12-1012"><a href="#cb12-1012" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-1013"><a href="#cb12-1013" aria-hidden="true" tabindex="-1"></a><span class="op">*</span> <span class="va">Goal</span><span class="op">-</span><span class="va">Biased</span> <span class="va">RRT</span><span class="op">:</span> <span class="va">In</span> <span class="va">this</span> <span class="va">approach</span><span class="op">,</span> <span class="va">the</span> <span class="va">algorithm</span> <span class="va">is</span> <span class="va">biased</span> <span class="va">to</span> <span class="va">sample</span> <span class="va">near</span> <span class="va">the</span> <span class="va">goal</span> <span class="va">state</span> <span class="va">more</span> <span class="va">frequently</span>. <span class="va">This</span> <span class="va">bias</span> <span class="va">can</span> <span class="va">significantly</span> <span class="va">reduce</span> <span class="va">the</span> <span class="va">number</span> <span class="va">of</span> <span class="va">samples</span> <span class="va">required</span> <span class="va">to</span> <span class="va">find</span> <span class="va">a</span> <span class="va">path</span> <span class="va">to</span> <span class="va">the</span> <span class="va">goal</span> <span class="va">in</span> <span class="va">many</span> <span class="va">cases</span><span class="op">,</span> <span class="va">especially</span> <span class="va">in</span> <span class="va">less</span> <span class="va">complex</span> <span class="va">environments</span> <span class="va">or</span> <span class="va">when</span> <span class="va">the</span> <span class="va">goal</span> <span class="va">is</span> <span class="va">not</span> <span class="va">surrounded</span> <span class="va">by</span> <span class="va">obstacles</span>. <span class="va">The</span> <span class="va">downside</span> <span class="va">is</span> <span class="va">that</span> <span class="va">in</span> <span class="va">highly</span> <span class="va">cluttered</span> <span class="va">environments</span><span class="op">,</span> <span class="va">this</span> <span class="va">bias</span> <span class="va">might</span> <span class="va">lead</span> <span class="va">to</span> <span class="va">more</span> <span class="va">samples</span> <span class="va">being</span> <span class="va">wasted</span> <span class="va">near</span> <span class="va">the</span> <span class="va">goal</span> <span class="va">where</span> <span class="va">paths</span> <span class="va">are</span> <span class="va">infeasible</span>.</span>
<span id="cb12-1014"><a href="#cb12-1014" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1015"><a href="#cb12-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1016"><a href="#cb12-1016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1017"><a href="#cb12-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-1018"><a href="#cb12-1018" aria-hidden="true" tabindex="-1"></a>```{<span class="op">=</span><span class="va">html</span>}</span>
<span id="cb12-1019"><a href="#cb12-1019" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">script</span><span class="op">&gt;</span></span>
<span id="cb12-1020"><a href="#cb12-1020" aria-hidden="true" tabindex="-1"></a><span class="va">const</span> <span class="va">tooltipTriggerList</span> <span class="op">=</span> <span class="va">document</span>.<span class="va">querySelectorAll</span>(<span class="ss">'[data-bs-toggle="tooltip"]'</span>)</span>
<span id="cb12-1021"><a href="#cb12-1021" aria-hidden="true" tabindex="-1"></a><span class="va">const</span> <span class="va">tooltipList</span> <span class="op">=</span> [<span class="op">...</span><span class="va">tooltipTriggerList</span>].<span class="va">map</span>(<span class="va">tooltipTriggerEl</span> <span class="op">=&gt;</span> <span class="va">new</span> <span class="va">bootstrap</span>.<span class="va">Tooltip</span>(<span class="va">tooltipTriggerEl</span>))</span>
<span id="cb12-1022"><a href="#cb12-1022" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span><span class="va">script</span><span class="op">&gt;</span></span>
<span id="cb12-1023"><a href="#cb12-1023" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="va">style</span><span class="op">&gt;</span></span>
<span id="cb12-1024"><a href="#cb12-1024" aria-hidden="true" tabindex="-1"></a><span class="va">div</span>#<span class="va">quarto</span><span class="op">-</span><span class="va">sidebar</span><span class="op">-</span><span class="va">glass</span> { <span class="va">display</span><span class="op">:</span> <span class="va">none</span> <span class="bn">!important; }</span></span>
<span id="cb12-1025"><a href="#cb12-1025" aria-hidden="true" tabindex="-1"></a><span class="va">ul</span>.<span class="va">navbar</span><span class="op">-</span><span class="va">nav</span>.<span class="va">navbar</span><span class="op">-</span><span class="va">nav</span><span class="op">-</span><span class="va">scroll</span> { <span class="op">-</span><span class="va">webkit</span><span class="op">-</span><span class="va">flex</span><span class="op">-</span><span class="va">direction</span><span class="op">:</span> <span class="va">row</span> <span class="bn">!important; }</span></span>
<span id="cb12-1026"><a href="#cb12-1026" aria-hidden="true" tabindex="-1"></a><span class="op">/*</span> #<span class="va">quarto</span><span class="op">-</span><span class="va">sidebar</span> { <span class="va">padding</span><span class="op">:</span> <span class="fl">5</span><span class="va">px</span><span class="op">;</span> }</span>
<span id="cb12-1027"><a href="#cb12-1027" aria-hidden="true" tabindex="-1"></a>#<span class="va">quarto</span><span class="op">-</span><span class="va">sidebar</span> <span class="op">&gt;</span> <span class="op">*</span> { <span class="va">padding</span><span class="op">:</span> <span class="fl">5</span><span class="va">px</span><span class="op">;</span> }</span>
<span id="cb12-1028"><a href="#cb12-1028" aria-hidden="true" tabindex="-1"></a><span class="va">div</span>.<span class="va">sidebar</span><span class="op">-</span><span class="va">menu</span><span class="op">-</span><span class="va">container</span> <span class="op">&gt;</span> <span class="op">*</span> { <span class="va">padding</span><span class="op">:</span> <span class="fl">5</span><span class="va">px</span> <span class="fl">5</span><span class="va">px</span> <span class="fl">5</span><span class="va">px</span> <span class="fl">5</span><span class="va">px</span><span class="op">;</span> }</span>
<span id="cb12-1029"><a href="#cb12-1029" aria-hidden="true" tabindex="-1"></a>#<span class="va">quarto</span><span class="op">-</span><span class="va">margin</span><span class="op">-</span><span class="va">sidebar</span> { <span class="va">padding</span><span class="op">:</span> <span class="fl">40</span><span class="va">px</span><span class="op">;</span> } <span class="op">*/</span></span>
<span id="cb12-1030"><a href="#cb12-1030" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span><span class="va">style</span><span class="op">&gt;</span></span>
<span id="cb12-1031"><a href="#cb12-1031" aria-hidden="true" tabindex="-1"></a>```</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Nishant Bharali</div>   
    <div class="nav-footer-center"><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/NishantBharali/Blog/blob/main/Robotics/RRT.qmd" class="toc-action">View source</a></p></div></div><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/nishant-kumar-bharali/">LinkedIn</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://github.com/NishantBharali">GitHub</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://stackoverflow.com/users/18371927/nishant">Stack Overflow</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="mailto:nishantkb@vt.edu">Mail</a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>